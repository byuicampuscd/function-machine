"use strict";$(document).ready(function(){$.getJSON("../funcMachineSettings.json",function(n){window.professorConfigFile=n,$.each(n,function(n,e){var o=$("<option></option>").append(e.name);$(o).val(e.equation),$("select").append(o),0===n&&changePlot(e.equation)})})});
"use strict";function startFuncMach(){var t=$("input[type='number']"),e=$("#animate:checked").length>0,n=$("#showGraph:checked").length>0,o={callback:function(t){return new Promise(function(e){console.log("finished!"),e(t)})},animateHide:e,graphHide:n,equation:profOpt.equation},i={datapoints:[],currentRound:0,graphOpt:o};t.each(function(t){var e=+$(this).val(),n=profOpt.equation;if(e){var o=n.replace("x","("+e+")"),a=math.eval(o),c=this.getBoundingClientRect(),u={x:e,y:a,id:t,changeEqu:profOpt.equation.replace("x","("+e+")"),updatePoint:xMemory[t]!==e,element:$("<p>"+e+"</p>")[0],beginCoor:{top:c.top,left:c.left},endCoor:{top:55,left:300}};u.updatePoint&&$("td#yval"+(t+1)).html(""),xMemory[t]=e,i.datapoints.push(u)}}),animatorControl(i)}function checkConfig(t){var e;return $.each(professorConfigFile,function(n,o){o.equation===t&&(e=o)}),e}function changePlot(t){window.profOpt=checkConfig(t);var e="y = ",n=""+t,o=$("#functionMachine #equ")[0],i=$("#functionMachine #y");$(o).empty(""),katex.render(e,i[0]),katex.render(n,o)}for(var xMemory=[],inputs=document.querySelectorAll("input[type='number']"),inputCount=inputs.length,i=0;inputCount>i;i++)xMemory[i]=null;$("select").change(function(t){changePlot(t.target.value)}),$(document).keypress(function(t){13==t.which&&startFuncMach()}),$("input[type='button'][value='Go!']").click(function(){startFuncMach()});
"use strict";function animationTemplate(n){var t=n.datapoints[n.currentRound],e=t.beginCoor.top+5,a=t.beginCoor.left+30,o=t.endCoor.top+5,i=t.endCoor.left+30,r=246.5,u=t.id.toString(),s=$("#numContainer"),p=t.element;return lastSheet.insertRule("@keyframes animationPath"+u+" {\n                            0% {\n                                opacity: 0;\n                                top: "+e+"px;\n                                left: "+a+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+e+"px;\n                                left: "+r+"px;\n                            }\n                            66% {\n                                top: "+o+"px;\n                                left: "+r+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+o+"px;\n                                left: "+i+"px;\n                            }\n                        }",lastSheet.cssRules.length),$(s).append(p),new Promise(function(t){$(p).css({position:"absolute",top:e+"px",left:a+"px",animation:"animationPath"+u+" "+aniDuration+"s ease-in-out",opacity:"0",zIndex:"100"}).bind("animationend",function(e){t(n)})})}function updateRound(n){var t=n.datapoints[n.currentRound];return new Promise(function(e){n.currentRound+=1,t.updatePoint=!1,e(n)})}function replaceXEqu(n){return new Promise(function(t){$(statusBar).html("<p>Calculating</p>"),$(equPara).css("animation","textDisappear "+aniDur+"s ease-in-out").bind("animationend",function(e){$(equPara).css("opacity",0),t(n)})})}function showEvaluateEqu(n){var t=n.datapoints[n.currentRound],e=t.changeEqu;return new Promise(function(t){katex.render(""+e,equPara),$(equPara).css("animation","textAppear "+aniDur+"s ease-in-out").bind("animationend",function(e){$(equPara).css("opacity",1),t(n)})})}function showYAns(n){var t=n.datapoints[n.currentRound],e=t.beginCoor.top,a=t.beginCoor.left+100,o=t.endCoor.top,i=t.endCoor.left;return t.endCoor={top:e,left:a},t.beginCoor={top:o,left:i},t.element.innerText=t.y,new Promise(function(e){$(equPara).css("animation","textDisappear "+aniDur+"s ease-in-out").bind("animationend",function(a){$(equPara).css("opacity",0),katex.render(""+t.y,equPara),$(equPara).css("animation","textAppear 1s ease-in-out").bind("animationend",function(t){$(equPara).css("opacity",1),e(n)})})})}function placeYValue(n){var t=n.datapoints[n.currentRound],e=t.endCoor.top,a=t.endCoor.left;return t.beginCoor={top:e,left:a},t.endCoor={top:150,left:300},new Promise(function(e){var a=$("td#yval"+(t.id+1))[0];$(a).html(""),$(a).append("<p>"+t.y+"</p>"),e(n)})}function resetRound(n){n.datapoints[n.currentRound];return new Promise(function(t){$(equPara).css("animation","textDisappear "+aniDur+"s ease-in-out").bind("animationend",function(e){$(equPara).css("opacity",0),katex.render(""+profOpt.equation,equPara),$(equPara).css("animation","textAppear "+aniDur+"s ease-in-out").bind("animationend",function(e){$(equPara).css("opacity",1),$(statusBar).html(""),t(n)})})})}function plotter(n){n.graphOpt.callback()}function animatorControl(n){var t=$("#numContainer"),e=Promise.resolve(n);t.innerHTML="";for(var a=0;a<n.datapoints.length;a++)n.datapoints[a].updatePoint===!0&&(e=e.then(animationTemplate).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(animationTemplate).then(placeYValue).then(animationTemplate).then(resetRound)),e=e.then(updateRound)}var statusBar=$("#status p"),lastSheet=document.styleSheets[document.styleSheets.length-1],equPara=$("#functionMachine #equ")[0],aniDur=1,aniDuration=3;
"use strict";!function(){for(var t,a,d,p,r=$("tbody"),n=19,e=1;n>=e;e++)p=$("<input>"),t=$("<td></td>"),a=$("<td></td>"),d=$("<tr></tr>"),$(d).attr("id","row"+e),$(p).attr("name","input"+e).attr("type","number"),$(a).attr("id","yval"+e),$(t).append(p),$(d).append(t).append(a),$(r).append(d)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJldmVudHMuanMiLCJhbmltYXRvcmNvbnRyb2wuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiZ2V0SlNPTiIsInJlc3VsdCIsIndpbmRvdyIsInByb2Zlc3NvckNvbmZpZ0ZpbGUiLCJlYWNoIiwiaSIsImZpZWxkIiwib3B0IiwiYXBwZW5kIiwibmFtZSIsInZhbCIsImVxdWF0aW9uIiwiY2hhbmdlUGxvdCIsInN0YXJ0RnVuY01hY2giLCJ4aW5wdXRzIiwiaGlkZUFuaW1hdGlvbkNoZWNrZWQiLCJsZW5ndGgiLCJoaWRlR3JhcGhDaGVja2VkIiwiZ3JhcGhPcHQiLCJjYWxsYmFjayIsImFuaVNldHRpbmdzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjb25zb2xlIiwibG9nIiwiYW5pbWF0ZUhpZGUiLCJncmFwaEhpZGUiLCJwcm9mT3B0IiwiZGF0YXBvaW50cyIsImN1cnJlbnRSb3VuZCIsInh2YWwiLCJ0aGlzIiwicmVwbGFjZVgiLCJyZXBsYWNlIiwieXZhbCIsIm1hdGgiLCJldmFsIiwiaW5wdXRDb29yIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicG9pbnQiLCJ4IiwieSIsImlkIiwiY2hhbmdlRXF1IiwidXBkYXRlUG9pbnQiLCJ4TWVtb3J5IiwiZWxlbWVudCIsImJlZ2luQ29vciIsInRvcCIsImxlZnQiLCJlbmRDb29yIiwiaHRtbCIsInB1c2giLCJhbmltYXRvckNvbnRyb2wiLCJjaGVja0NvbmZpZyIsIml0ZW0iLCJlcXVhdCIsImVxdVBhcmEiLCJ5UGFyYSIsImVtcHR5Iiwia2F0ZXgiLCJyZW5kZXIiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRDb3VudCIsImNoYW5nZSIsImUiLCJ0YXJnZXQiLCJ2YWx1ZSIsImtleXByZXNzIiwid2hpY2giLCJjbGljayIsImFuaW1hdGlvblRlbXBsYXRlIiwicG9pbnREYXRhIiwic3RhcnRUb3BPZmYiLCJzdGFydExlZnRPZmYiLCJlbmRUb3BPZmYiLCJlbmRMZWZ0T2ZmIiwiaGlnaHdheVBhdGgiLCJ0b1N0cmluZyIsIm51bUNvbnRhaW5lciIsIm51bVBhcmEiLCJsYXN0U2hlZXQiLCJpbnNlcnRSdWxlIiwiY3NzUnVsZXMiLCJjc3MiLCJwb3NpdGlvbiIsImFuaW1hdGlvbiIsImFuaUR1cmF0aW9uIiwib3BhY2l0eSIsInpJbmRleCIsImJpbmQiLCJ1cGRhdGVSb3VuZCIsInBsYWNlaG9sZGVyIiwicmVwbGFjZVhFcXUiLCJkYXRhIiwic3RhdHVzQmFyIiwiYW5pRHVyIiwic2hvd0V2YWx1YXRlRXF1Iiwic2hvd1lBbnMiLCJuZXdFbmRUb3AiLCJuZXdFbmRMZWZ0IiwibmV3QmVnaW5Ub3AiLCJuZXdCZWdpbkxlZnQiLCJpbm5lclRleHQiLCJwbGFjZVlWYWx1ZSIsImlucHV0IiwicmVzZXRSb3VuZCIsInBsb3R0ZXIiLCJkcHMiLCJjaGFpbiIsImlubmVySFRNTCIsInRoZW4iLCJzdHlsZVNoZWV0cyIsInRkMSIsInRkMiIsInRyIiwidGJvZHkiLCJyb3dDb3VudCIsImoiLCJhdHRyIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFBQSxHQUFFQyxVQUFVQyxNQUFNLFdBRWRGLEVBQUVHLFFBQVEsOEJBQStCLFNBQVVDLEdBRS9DQyxPQUFPQyxvQkFBc0JGLEVBRTdCSixFQUFFTyxLQUFLSCxFQUFRLFNBQVVJLEVBQUdDLEdBRXhCLEdBQUlDLEdBQU1WLEVBQUUscUJBQXFCVyxPQUFPRixFQUFNRyxLQUU5Q1osR0FBRVUsR0FBS0csSUFBSUosRUFBTUssVUFFakJkLEVBQUUsVUFBVVcsT0FBT0QsR0FFVCxJQUFORixHQUNBTyxXQUFXTixFQUFNSztBQ2ZqQyxZQVFBLFNBQVNFLGlCQUVMLEdBQUlDLEdBQVVqQixFQUFFLHdCQUNaa0IsRUFBdUJsQixFQUFFLG9CQUFvQm1CLE9BQVMsRUFDdERDLEVBQW1CcEIsRUFBRSxzQkFBc0JtQixPQUFTLEVBQ3BERSxHQUNJQyxTQUFVLFNBQVVDLEdBQ2hCLE1BQU8sSUFBSUMsU0FBUSxTQUFV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QXVCRCxHQUV2QjFILEVBQUU2RyxHQUFPYyxLQUFLLE9BQWQsUUFBOEJELEdBQUtDLEtBQUssT0FBUSxVQUVoRDNILEVBQUVzSCxHQUFLSyxLQUFLLEtBQVosT0FBeUJELEdBRXpCMUgsRUFBRXFILEdBQUsxRyxPQUFPa0csR0FDZDdHLEVBQUV1SCxHQUFJNUcsT0FBTzBHLEdBQUsxRyxPQUFPMkcsR0FDekJ0SCxFQUFFd0gsR0FBTzdHLE9BQU80RyIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICQuZ2V0SlNPTihcIi4uL2Z1bmNNYWNoaW5lU2V0dGluZ3MuanNvblwiLCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgIHdpbmRvdy5wcm9mZXNzb3JDb25maWdGaWxlID0gcmVzdWx0O1xyXG5cclxuICAgICAgICAkLmVhY2gocmVzdWx0LCBmdW5jdGlvbiAoaSwgZmllbGQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBvcHQgPSAkKFwiPG9wdGlvbj48L29wdGlvbj5cIikuYXBwZW5kKGZpZWxkLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgJChvcHQpLnZhbChmaWVsZC5lcXVhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAkKFwic2VsZWN0XCIpLmFwcGVuZChvcHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZVBsb3QoZmllbGQuZXF1YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxufSk7XHJcbiIsInZhciB4TWVtb3J5ID0gW10sXHJcbiAgICBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbdHlwZT0nbnVtYmVyJ11cIiksXHJcbiAgICBpbnB1dENvdW50ID0gaW5wdXRzLmxlbmd0aDtcclxuXHJcbmZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRDb3VudDsgaSsrKSB7XHJcbiAgICB4TWVtb3J5W2ldID0gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnRGdW5jTWFjaCgpIHtcclxuXHJcbiAgICB2YXIgeGlucHV0cyA9ICQoXCJpbnB1dFt0eXBlPSdudW1iZXInXVwiKSxcclxuICAgICAgICBoaWRlQW5pbWF0aW9uQ2hlY2tlZCA9ICQoXCIjYW5pbWF0ZTpjaGVja2VkXCIpLmxlbmd0aCA+IDAsXHJcbiAgICAgICAgaGlkZUdyYXBoQ2hlY2tlZCA9ICQoXCIjc2hvd0dyYXBoOmNoZWNrZWRcIikubGVuZ3RoID4gMCxcclxuICAgICAgICBncmFwaE9wdCA9IHtcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChhbmlTZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJmaW5pc2hlZCFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYW5pbWF0ZUhpZGU6IGhpZGVBbmltYXRpb25DaGVja2VkLFxyXG4gICAgICAgICAgICBncmFwaEhpZGU6IGhpZGVHcmFwaENoZWNrZWQsXHJcbiAgICAgICAgICAgIGVxdWF0aW9uOiBwcm9mT3B0LmVxdWF0aW9uXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbmlTZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgZGF0YXBvaW50czogW10sXHJcbiAgICAgICAgICAgIGN1cnJlbnRSb3VuZDogMCxcclxuICAgICAgICAgICAgZ3JhcGhPcHQ6IGdyYXBoT3B0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB4aW5wdXRzLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICB2YXIgeHZhbCA9ICskKHRoaXMpLnZhbCgpLFxyXG4gICAgICAgICAgICBlcXVhdGlvbiA9IHByb2ZPcHQuZXF1YXRpb247XHJcblxyXG4gICAgICAgIGlmICh4dmFsKSB7XHJcbiAgICAgICAgICAgIHZhciByZXBsYWNlWCA9IGVxdWF0aW9uLnJlcGxhY2UoXCJ4XCIsIGAoJHt4dmFsfSlgKSxcclxuICAgICAgICAgICAgICAgIHl2YWwgPSBtYXRoLmV2YWwocmVwbGFjZVgpLFxyXG4gICAgICAgICAgICAgICAgaW5wdXRDb29yID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgICAgIHBvaW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHh2YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogeXZhbCxcclxuICAgICAgICAgICAgICAgICAgICBpZDogaSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VFcXU6IHByb2ZPcHQuZXF1YXRpb24ucmVwbGFjZShcInhcIiwgYCgke3h2YWx9KWApLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBvaW50OiB4TWVtb3J5W2ldICE9PSB4dmFsLFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICQoYDxwPiR7eHZhbH08L3A+YClbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW5Db29yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogaW5wdXRDb29yLnRvcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogaW5wdXRDb29yLmxlZnRcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZENvb3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiA1NSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMzAwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIENsZWFyIG91dCB0aGUgWXMgd2hlbiB0aGV5IGRvbid0IGVxdWFsIGVhY2ggb3RoZXIgYW5kIG5lZWQgdG8gYmUgdXBkYXRlZFxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAocG9pbnQudXBkYXRlUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICQoYHRkI3l2YWwke2kgKyAxfWApLmh0bWwoXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qVXBkYXRlIHRoZSB4bWVtb3J5Ki9cclxuICAgICAgICAgICAgeE1lbW9yeVtpXSA9IHh2YWw7XHJcblxyXG4gICAgICAgICAgICBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzLnB1c2gocG9pbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGFuaW1hdG9yQ29udHJvbChhbmlTZXR0aW5ncyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrQ29uZmlnKHZhbCkge1xyXG4gICAgdmFyIHByb2ZPcHQ7XHJcbiAgICAkLmVhY2gocHJvZmVzc29yQ29uZmlnRmlsZSwgZnVuY3Rpb24gKGksIGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbS5lcXVhdGlvbiA9PT0gdmFsKSB7XHJcbiAgICAgICAgICAgIHByb2ZPcHQgPSBpdGVtO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gcHJvZk9wdDtcclxufVxyXG5cclxuLy9EaXBzbGF5IEthdGV4IGVxdWF0aW9uXHJcbmZ1bmN0aW9uIGNoYW5nZVBsb3QodmFsKSB7XHJcblxyXG4gICAgd2luZG93LnByb2ZPcHQgPSBjaGVja0NvbmZpZyh2YWwpO1xyXG5cclxuICAgIHZhciB5ID0gYHkgPSBgLFxyXG4gICAgICAgIGVxdWF0ID0gYCR7dmFsfWAsXHJcbiAgICAgICAgZXF1UGFyYSA9ICQoXCIjZnVuY3Rpb25NYWNoaW5lICNlcXVcIilbMF0sXHJcbiAgICAgICAgeVBhcmEgPSAkKFwiI2Z1bmN0aW9uTWFjaGluZSAjeVwiKTtcclxuXHJcbiAgICAkKGVxdVBhcmEpLmVtcHR5KFwiXCIpO1xyXG5cclxuICAgIGthdGV4LnJlbmRlcih5LCB5UGFyYVswXSk7XHJcbiAgICBrYXRleC5yZW5kZXIoZXF1YXQsIGVxdVBhcmEpO1xyXG59XHJcblxyXG4vKioqKipET0NVTUVOVCBvbmNoYW5nZSBFVkVOVCBIQU5ETEVSKioqKiovXHJcbiQoXCJzZWxlY3RcIikuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XHJcbiAgICBjaGFuZ2VQbG90KGUudGFyZ2V0LnZhbHVlKTtcclxufSk7XHJcblxyXG4vKioqKkRPQ1VNRU5UIGtleWRvd24gRVZFTlQgSEFORExFUioqKiovXHJcbiQoZG9jdW1lbnQpLmtleXByZXNzKGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAoZS53aGljaCA9PSAxMykge1xyXG4gICAgICAgIHN0YXJ0RnVuY01hY2goKTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vKioqKipHTyEgQ2xpY2sqKioqKi9cclxuJChcImlucHV0W3R5cGU9J2J1dHRvbiddW3ZhbHVlPSdHbyEnXVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgLy9UT0RPOiBNb3N0IGxpa2VseSB0byBkZXRlY3QgaWYgYW4gYW5pbWF0aW9uIGlzIG9jY3VycmluZyBpdCB3b3VsZCBiZSBiZXN0IHRvIGNoZWNrIG9mIGEgc3BlY2lmaWMgYW5pbWF0aW9uIGNsYXNzIGV4aXN0cyBvbiB0aGUgd2VicGFnZS5cclxuXHJcbiAgICAvLyAgICBpZiAoJCgnOmFuaW1hdGVkJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICBzdGFydEZ1bmNNYWNoKCk7XHJcbiAgICAvLyAgICB9XHJcblxyXG59KTsiLCJ2YXIgc3RhdHVzQmFyID0gJChcIiNzdGF0dXMgcFwiKSxcclxuICAgIGxhc3RTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW2RvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aCAtIDFdLFxyXG4gICAgZXF1UGFyYSA9ICQoXCIjZnVuY3Rpb25NYWNoaW5lICNlcXVcIilbMF0sXHJcbiAgICBhbmlEdXIgPSAxLFxyXG4gICAgYW5pRHVyYXRpb24gPSAzO1xyXG5cclxuZnVuY3Rpb24gYW5pbWF0aW9uVGVtcGxhdGUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBHZXQgYWxsIHRoZSBjb29yZGluYXRlIGRhdGEsIGVsZW1lbnRzIGFuZCBjb250YWluZXJzIGluIG9yZGVyIHRvIG1ha2UgdGhlIGFuaW1hdGlvbiB3b3JrXHJcbiAgICAqL1xyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcclxuICAgICAgICBzdGFydFRvcE9mZiA9IHBvaW50RGF0YS5iZWdpbkNvb3IudG9wICsgNSxcclxuICAgICAgICBzdGFydExlZnRPZmYgPSBwb2ludERhdGEuYmVnaW5Db29yLmxlZnQgKyAzMCxcclxuICAgICAgICBlbmRUb3BPZmYgPSBwb2ludERhdGEuZW5kQ29vci50b3AgKyA1LFxyXG4gICAgICAgIGVuZExlZnRPZmYgPSBwb2ludERhdGEuZW5kQ29vci5sZWZ0ICsgMzAsXHJcbiAgICAgICAgaGlnaHdheVBhdGggPSAyNDYuNSxcclxuICAgICAgICBpZCA9IHBvaW50RGF0YS5pZC50b1N0cmluZygpLFxyXG4gICAgICAgIG51bUNvbnRhaW5lciA9ICQoXCIjbnVtQ29udGFpbmVyXCIpLFxyXG4gICAgICAgIG51bVBhcmEgPSBwb2ludERhdGEuZWxlbWVudDtcclxuXHJcbiAgICAvKlxyXG4gICAgRHluYW1pY2FsbHkgaW5zZXJ0IGEgdW5pcXVlIGFuaW1hdGlvbiBrZXlmcmFtZSBmb3IgZWFjaCBpbnB1dFxyXG4gICAgKi9cclxuICAgIGxhc3RTaGVldC5pbnNlcnRSdWxlKGBAa2V5ZnJhbWVzIGFuaW1hdGlvblBhdGgke2lkfSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7c3RhcnRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtzdGFydExlZnRPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzMyUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtzdGFydFRvcE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke2hpZ2h3YXlQYXRofXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNjYlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7ZW5kVG9wT2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7aGlnaHdheVBhdGh9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA5MCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtlbmRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtlbmRMZWZ0T2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCwgbGFzdFNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XHJcblxyXG4gICAgLypcclxuICAgIEF0dGFjaCB0aGUgbnVtYmVyXHJcbiAgICAqL1xyXG4gICAgJChudW1Db250YWluZXIpLmFwcGVuZChudW1QYXJhKTtcclxuXHJcbiAgICAvKlxyXG4gICAgTWFrZSB0aGUgcHJvbWlzZSB0aGF0IHdoZW4gdGhlIGR5bmFtaWMgYW5pbWF0aW9uIGlzIGRvbmUgdGhlbiB0aGlzIHByb21pc2UgaXMgZmluaXNoZWRcclxuICAgICovXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKG51bVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgXCJwb3NpdGlvblwiOiBcImFic29sdXRlXCIsXHJcbiAgICAgICAgICAgICAgICBcInRvcFwiOiBgJHtzdGFydFRvcE9mZn1weGAsXHJcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogYCR7c3RhcnRMZWZ0T2ZmfXB4YCxcclxuICAgICAgICAgICAgICAgIFwiYW5pbWF0aW9uXCI6IGBhbmltYXRpb25QYXRoJHtpZH0gJHthbmlEdXJhdGlvbn1zIGVhc2UtaW4tb3V0YCxcclxuICAgICAgICAgICAgICAgIFwib3BhY2l0eVwiOiBgMGAsXHJcbiAgICAgICAgICAgICAgICBcInpJbmRleFwiOiBgMTAwYFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYmluZCgnYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVJvdW5kKGFuaVNldHRpbmdzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgcGxhY2Vob2xkZXIgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kICs9IDE7XHJcbiAgICAgICAgcGxhY2Vob2xkZXIudXBkYXRlUG9pbnQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIHJlcGxhY2VYRXF1KGRhdGEpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBSZXBsYWNlIHRoZSB4IGluIHRoZSBkaXNhcHBlYXJlZCBlcXVhdGlvbiB3aXRob3V0IGhhdmluZyB0aGUgeSBkaXNhcHBlYXIuXHJcbiAgICAqL1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgJChzdGF0dXNCYXIpXHJcbiAgICAgICAgICAgIC5odG1sKFwiPHA+Q2FsY3VsYXRpbmc8L3A+XCIpO1xyXG5cclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJ9cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgIC5iaW5kKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RXZhbHVhdGVFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBHZXQgdGhlIHkgYW5zd2VyIGFuZCB0aGUgeC1jaGFuZ2VkIGVxdWF0aW9uXHJcbiAgICAqL1xyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcclxuICAgICAgICBjaGFuZ2VFcXUgPSBwb2ludERhdGEuY2hhbmdlRXF1O1xyXG5cclxuICAgIC8qXHJcbiAgICBTaG93IHRoZSBuZXcgZXF1YXRpb24gd2l0aCB0aGUgcmVwbGFjZWQgeC12YWx1ZSBlcXVhdGlvblxyXG4gICAgKi9cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGthdGV4LnJlbmRlcihgJHtjaGFuZ2VFcXV9YCwgZXF1UGFyYSk7XHJcblxyXG4gICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cn1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgLmJpbmQoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAxKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dZQW5zKGFuaVNldHRpbmdzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAvKlxyXG4gICAgR2V0IHRoZSBvcmlnaW5hbCB4LWlucHV0IGJveCBjb29yZGluYXRlc1xyXG4gICAgKi9cclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXHJcbiAgICAgICAgbmV3RW5kVG9wID0gcG9pbnREYXRhLmJlZ2luQ29vci50b3AsXHJcbiAgICAgICAgbmV3RW5kTGVmdCA9IHBvaW50RGF0YS5iZWdpbkNvb3IubGVmdCArIDEwMCxcclxuICAgICAgICBuZXdCZWdpblRvcCA9IHBvaW50RGF0YS5lbmRDb29yLnRvcCxcclxuICAgICAgICBuZXdCZWdpbkxlZnQgPSBwb2ludERhdGEuZW5kQ29vci5sZWZ0O1xyXG5cclxuICAgIC8qXHJcbiAgICBDaGFuZ2UgdGhlIGNvb3JkaW5hdGVzIGluIHRoZSBhbmlTZXR0aW5ncyBzbyB0aGF0IHRoZSBhbmltYXRpb24gcGF0aCBcclxuICAgIHN0YXJ0cyBpbiB0aGUgbWFjaGluZSBhbmQgZW5kcyBpbiBjb29yZGluYXRlZCB5IGNvbHVtblxyXG4gICAgKi9cclxuICAgIHBvaW50RGF0YS5lbmRDb29yID0ge1xyXG4gICAgICAgIHRvcDogbmV3RW5kVG9wLFxyXG4gICAgICAgIGxlZnQ6IG5ld0VuZExlZnRcclxuICAgIH07XHJcblxyXG4gICAgcG9pbnREYXRhLmJlZ2luQ29vciA9IHtcclxuICAgICAgICB0b3A6IG5ld0JlZ2luVG9wLFxyXG4gICAgICAgIGxlZnQ6IG5ld0JlZ2luTGVmdFxyXG4gICAgfTtcclxuXHJcbiAgICAvKlxyXG4gICAgVGhlIG5ldyBwYXJhZ3JhcGggdGFnIHRvIGJlIGFuaW1hdGVkIGlzIHRoZSB5IHZhbHVlXHJcbiAgICAqL1xyXG4gICAgcG9pbnREYXRhLmVsZW1lbnQuaW5uZXJUZXh0ID0gcG9pbnREYXRhLnlcclxuXHJcbiAgICAvKlxyXG4gICAgQW5pbWF0ZSB0aGUgbmV3IHkgdmFsdWUgdG8gdGhlIGNvb3JkaW5hdGVkIHkgY29sdW1uIGFuZCBvbmNlIFxyXG4gICAgYW5pbWF0aW9uIGlzIGRvbmUgdGhlbiByZXR1cm4gdGhlIHByb21pc2VcclxuICAgICovXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJ9cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgIC5iaW5kKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICBrYXRleC5yZW5kZXIoYCR7cG9pbnREYXRhLnl9YCwgZXF1UGFyYSk7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCAndGV4dEFwcGVhciAxcyBlYXNlLWluLW91dCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmJpbmQoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGxhY2VZVmFsdWUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBHZXQgdGhlIGN1cnJlbnQgcm91bmQsIHRoZSB5LWNvbHVtbiBjb29yZGluYXRlcywgYW5kIHRoZSBzdGF0dXMgYmFyIGNvb3JkaW5hdGVzXHJcbiAgICAqL1xyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcclxuICAgICAgICBuZXdCZWdpblRvcCA9IHBvaW50RGF0YS5lbmRDb29yLnRvcCxcclxuICAgICAgICBuZXdCZWdpbkxlZnQgPSBwb2ludERhdGEuZW5kQ29vci5sZWZ0O1xyXG5cclxuICAgIHBvaW50RGF0YS5iZWdpbkNvb3IgPSB7XHJcbiAgICAgICAgdG9wOiBuZXdCZWdpblRvcCxcclxuICAgICAgICBsZWZ0OiBuZXdCZWdpbkxlZnRcclxuICAgIH1cclxuXHJcbiAgICBwb2ludERhdGEuZW5kQ29vciA9IHtcclxuICAgICAgICB0b3A6IDE1MCxcclxuICAgICAgICBsZWZ0OiAzMDBcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgT25jZSB0aGUgeS12YWx1ZSBhcHBlYXJzIGluIHRoZSBjb3JyZWN0IHktY29sdW1uIHRoZW4gZnVsZmlsbCB0aGUgcHJvbWlzZS5cclxuICAgICovXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICB2YXIgaW5wdXQgPSAkKGB0ZCN5dmFsJHtwb2ludERhdGEuaWQgKyAxfWApWzBdO1xyXG4gICAgICAgICQoaW5wdXQpLmh0bWwoXCJcIik7XHJcbiAgICAgICAgJChpbnB1dCkuYXBwZW5kKGA8cD4ke3BvaW50RGF0YS55fTwvcD5gKTtcclxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldFJvdW5kKGFuaVNldHRpbmdzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAvKlxyXG4gICAgR2V0IHRoZSBjdXJyZW50IHJvdW5kIGFuZCBjdXJyZW50IGRhdGEgcG9pbnRzXHJcbiAgICAqL1xyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcclxuXHJcbiAgICAvKlxyXG4gICAgT25jZSB0aGUgZXF1YXRpb24gaXMgY2xlYXJlZCBhbmQgcmVzZXQgdG8gdGhlIGRlZmF1bHQgZXF1YXRpb24gXHJcbiAgICB0aGVuIGZ1bGZpbGwgdGhlIHByb21pc2VcclxuICAgICovXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJ9cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgIC5iaW5kKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICBrYXRleC5yZW5kZXIoYCR7cHJvZk9wdC5lcXVhdGlvbn1gLCBlcXVQYXJhKTtcclxuICAgICAgICAgICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0QXBwZWFyICR7YW5pRHVyfXMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5iaW5kKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChzdGF0dXNCYXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsb3R0ZXIoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgYW5pU2V0dGluZ3MuZ3JhcGhPcHQuY2FsbGJhY2soKTtcclxufVxyXG5cclxuLy9IYW5kbGUgYWxsIENTUyBhbmltYXRpb25zXHJcbmZ1bmN0aW9uIGFuaW1hdG9yQ29udHJvbChkcHMpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIG51bUNvbnRhaW5lciA9ICQoXCIjbnVtQ29udGFpbmVyXCIpLFxyXG4gICAgICAgIGNoYWluID0gUHJvbWlzZS5yZXNvbHZlKGRwcyk7XHJcblxyXG4gICAgbnVtQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkcHMuZGF0YXBvaW50cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAvL1RPRE86IFNlbmQgdGhlIHgtdmFsdWUgYW5kIHRoZSB5LXZhbHVlIHRvZ2V0aGVyLlxyXG4gICAgICAgIC8vVE9ETzogQ2hlY2sgdG8gc2VlIHdoYXQgSSBjYW4gdGFrZSBvdXQgaW4gb3JkZXIgdG8gbWFrZSBmdW5jdGlvbnMuXHJcblxyXG4gICAgICAgIGlmIChkcHMuZGF0YXBvaW50c1tpXS51cGRhdGVQb2ludCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjaGFpbiA9IGNoYWluLnRoZW4oYW5pbWF0aW9uVGVtcGxhdGUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXBsYWNlWEVxdSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dFdmFsdWF0ZUVxdSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dZQW5zKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oYW5pbWF0aW9uVGVtcGxhdGUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihwbGFjZVlWYWx1ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGFuaW1hdGlvblRlbXBsYXRlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzZXRSb3VuZClcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIC50aGVuKHBsb3R0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGFpbiA9IGNoYWluLnRoZW4odXBkYXRlUm91bmQpO1xyXG4gICAgfVxyXG59IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qKioqVEFCTEUgTUFLRVIqKioqL1xyXG4gICAgdmFyIHRib2R5ID0gJChcInRib2R5XCIpLFxyXG4gICAgICAgIHRkMSxcclxuICAgICAgICB0ZDIsXHJcbiAgICAgICAgdHIsXHJcbiAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgcm93Q291bnQgPSAxOTtcclxuXHJcbiAgICBmb3IgKHZhciBqID0gMTsgaiA8PSByb3dDb3VudDsgaisrKSB7XHJcbiAgICAgICAgaW5wdXQgPSAkKFwiPGlucHV0PlwiKTtcclxuICAgICAgICB0ZDEgPSAkKFwiPHRkPjwvdGQ+XCIpO1xyXG4gICAgICAgIHRkMiA9ICQoXCI8dGQ+PC90ZD5cIik7XHJcbiAgICAgICAgdHIgPSAkKFwiPHRyPjwvdHI+XCIpO1xyXG5cclxuICAgICAgICAkKHRyKS5hdHRyKFwiaWRcIiwgYHJvdyR7an1gKTtcclxuXHJcbiAgICAgICAgJChpbnB1dCkuYXR0cihcIm5hbWVcIiwgYGlucHV0JHtqfWApLmF0dHIoXCJ0eXBlXCIsIFwibnVtYmVyXCIpO1xyXG5cbiAgICAgICAgJCh0ZDIpLmF0dHIoXCJpZFwiLCBgeXZhbCR7an1gKTtcblxyXG4gICAgICAgICQodGQxKS5hcHBlbmQoaW5wdXQpO1xyXG4gICAgICAgICQodHIpLmFwcGVuZCh0ZDEpLmFwcGVuZCh0ZDIpO1xyXG4gICAgICAgICQodGJvZHkpLmFwcGVuZCh0cik7XHJcbiAgICB9XHJcbn0oKSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
