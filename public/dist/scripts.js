"use strict";$(document).ready(function(){$.getJSON("../funcMachineSettings.json",function(n){window.professorConfigFile=n,$.each(n,function(n,e){var o=$("<option></option>").append(e.name);$(o).val(e.equation),$("select").append(o),0===n&&changePlot(e.equation)})})});
"use strict";function startFuncMach(){var e=$("input[type='number']"),t=$("#animate:checked").length>0,n=$("#showGraph:checked").length>0,o=({callback:function(){return Promise.resolve(console.log("Done!"))},animate:t,showGraph:n,equation:profOpt.equation},{datapoints:[],currentRound:0});$.each(e,function(e,t){var n=$(t).val(),a=profOpt.equation;if(n){var c=a.replace("x","("+n+")"),i=math.eval(c),r=t.getBoundingClientRect(),u={x:n,y:i,id:e,changeEqu:profOpt.equation.replace("x","("+n+")"),updatePoint:!0,element:$("<p>"+n+"</p>")[0],beginCoor:{top:r.top,left:r.left},endCoor:{top:55,left:300}};o.datapoints.push(u)}}),animatorControl(o)}function checkConfig(e){var t;return $.each(professorConfigFile,function(n,o){o.equation===e&&(t=o)}),t}function changePlot(e){window.profOpt=checkConfig(e);var t="y = ",n=""+e,o=$("#functionMachine #equ")[0],a=$("#functionMachine #y");$(o).empty(""),katex.render(t,a[0]),katex.render(n,o)}var xMemory=[];$("select").change(function(e){changePlot(e.target.value)}),$(document).keypress(function(e){13==e.which&&startFuncMach()}),$("input[type='button'][value='Go!']").click(function(){startFuncMach()});
"use strict";function animationTemplate(n){var t=n.datapoints[n.currentRound],e=t.beginCoor.top+5,a=t.beginCoor.left+30,o=t.endCoor.top+5,i=t.endCoor.left+30,r=246.5,s=t.id.toString(),u=$("#numContainer"),p=t.element;return lastSheet.insertRule("@keyframes animationPath"+s+" {\n                            0% {\n                                opacity: 0;\n                                top: "+e+"px;\n                                left: "+a+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+e+"px;\n                                left: "+r+"px;\n                            }\n                            66% {\n                                top: "+o+"px;\n                                left: "+r+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+o+"px;\n                                left: "+i+"px;\n                            }\n                        }",lastSheet.cssRules.length),$(u).append(p),new Promise(function(t){$(p).css("position","absolute").css("top",e+"px").css("left",a+"px").css("animation","animationPath"+s+" 4s ease-in-out").css("opacity","0").css("zIndex","100").bind("animationend",function(e){t(n)})})}function updateRound(n){var t=n.datapoints[n.currentRound];return new Promise(function(e){n.currentRound+=1,t.updatePoint=!1,e(n)})}function replaceXEqu(n){return new Promise(function(t){$(statusBar).html("").html("<p>Calculating</p>"),$(equPara).css("animation","textDisappear 2s ease-in-out").bind("animationend",function(e){$(equPara).css("opacity",0),t(n)})})}function showEvaluateEqu(n){var t=n.datapoints[n.currentRound],e=t.changeEqu;return new Promise(function(a){"number"==typeof t.y&&$(statusBar).html("").html("<p>Returning answer.</p>"),katex.render(""+e,equPara),$(equPara).css("animation","textAppear 1s ease-in-out").bind("animationend",function(t){$(equPara).css("opacity",1),a(n)})})}function showYAns(n){var t=n.datapoints[n.currentRound],e=t.beginCoor.top,a=t.beginCoor.left+100,o=t.endCoor.top,i=t.endCoor.left;return t.endCoor={top:e,left:a},t.beginCoor={top:o,left:i},t.element.innerText=t.y,new Promise(function(e){$(statusBar).html("").html("<p>Sending answer</p>"),$(equPara).css("animation","textDisappear 2s ease-in-out").bind("animationend",function(a){$(equPara).css("opacity",0),katex.render(""+t.y,equPara),$(equPara).css("animation","textAppear 1s ease-in-out").bind("animationend",function(n){$(equPara).css("opacity",1)}),e(n)})})}function placeYValue(n){var t=n.datapoints[n.currentRound],e=t.endCoor.top,a=t.endCoor.left;return t.beginCoor={top:e,left:a},t.endCoor={top:150,left:300},new Promise(function(e){$(statusBar).html("").html("<p>Plotting...</p>");var a=$("td#yval"+(t.id+1))[0];$(a).html(""),$(a).append("<p>"+t.y+"</p>"),e(n)})}function resetRound(n){n.datapoints[n.currentRound];return new Promise(function(t){$(equPara).css("animation","textDisappear 2s ease-in-out").bind("animationend",function(e){$(statusBar).html("").html("<p>Resetting...</p>"),$(equPara).css("opacity",0),katex.render(""+profOpt.equation,equPara),$(equPara).css("animation","textAppear 1s ease-in-out").bind("animationend",function(n){$(equPara).css("opacity",1),$(statusBar).html("")}),t(n)})})}function animatorControl(n){var t=$("#numContainer"),e=Promise.resolve(n);t.innerHTML="";for(var a=0;a<n.datapoints.length;a++)n.datapoints[a].updatePoint===!0&&(e=e.then(animationTemplate).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(animationTemplate).then(placeYValue).then(animationTemplate).then(resetRound)),e=e.then(updateRound)}var statusBar=$("#status p"),lastSheet=document.styleSheets[document.styleSheets.length-1],equPara=$("#functionMachine #equ")[0];
"use strict";!function(){for(var t,a,d,p,r=$("tbody"),n=19,e=1;n>=e;e++)p=$("<input>"),t=$("<td></td>"),a=$("<td></td>"),d=$("<tr></tr>"),$(d).attr("id","row"+e),$(p).attr("name","input"+e).attr("type","number"),$(a).attr("id","yval"+e),$(t).append(p),$(d).append(t).append(a),$(r).append(d)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJldmVudHMuanMiLCJhbmltYXRvcmNvbnRyb2wuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiZ2V0SlNPTiIsInJlc3VsdCIsIndpbmRvdyIsInByb2Zlc3NvckNvbmZpZ0ZpbGUiLCJlYWNoIiwiaSIsImZpZWxkIiwib3B0IiwiYXBwZW5kIiwibmFtZSIsInZhbCIsImVxdWF0aW9uIiwiY2hhbmdlUGxvdCIsInN0YXJ0RnVuY01hY2giLCJ4aW5wdXRzIiwiaGlkZUFuaW1hdGlvbkNoZWNrZWQiLCJsZW5ndGgiLCJoaWRlR3JhcGhDaGVja2VkIiwiYW5pU2V0dGluZ3MiLCJjYWxsYmFjayIsIlByb21pc2UiLCJyZXNvbHZlIiwiY29uc29sZSIsImxvZyIsImFuaW1hdGUiLCJzaG93R3JhcGgiLCJwcm9mT3B0IiwiZGF0YXBvaW50cyIsImN1cnJlbnRSb3VuZCIsInh2YWwiLCJyZXBsYWNlWCIsInJlcGxhY2UiLCJ5dmFsIiwibWF0aCIsImV2YWwiLCJpbnB1dENvb3IiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwb2ludCIsIngiLCJ5IiwiaWQiLCJjaGFuZ2VFcXUiLCJ1cGRhdGVQb2ludCIsImVsZW1lbnQiLCJiZWdpbkNvb3IiLCJ0b3AiLCJsZWZ0IiwiZW5kQ29vciIsInB1c2giLCJhbmltYXRvckNvbnRyb2wiLCJjaGVja0NvbmZpZyIsIml0ZW0iLCJlcXVhdCIsImVxdVBhcmEiLCJ5UGFyYSIsImVtcHR5Iiwia2F0ZXgiLCJyZW5kZXIiLCJ4TWVtb3J5IiwiY2hhbmdlIiwiZSIsInRhcmdldCIsInZhbHVlIiwia2V5cHJlc3MiLCJ3aGljaCIsImNsaWNrIiwiYW5pbWF0aW9uVGVtcGxhdGUiLCJwb2ludERhdGEiLCJzdGFydFRvcE9mZiIsInN0YXJ0TGVmdE9mZiIsImVuZFRvcE9mZiIsImVuZExlZnRPZmYiLCJoaWdod2F5UGF0aCIsInRvU3RyaW5nIiwibnVtQ29udGFpbmVyIiwibnVtUGFyYSIsImxhc3RTaGVldCIsImluc2VydFJ1bGUiLCJjc3NSdWxlcyIsImNzcyIsImJpbmQiLCJ1cGRhdGVSb3VuZCIsInBsYWNlaG9sZGVyIiwicmVwbGFjZVhFcXUiLCJkYXRhIiwic3RhdHVzQmFyIiwiaHRtbCIsInNob3dFdmFsdWF0ZUVxdSIsInNob3dZQW5zIiwibmV3RW5kVG9wIiwibmV3RW5kTGVmdCIsIm5ld0JlZ2luVG9wIiwibmV3QmVnaW5MZWZ0IiwiaW5uZXJUZXh0IiwicGxhY2VZVmFsdWUiLCJpbnB1dCIsInJlc2V0Um91bmQiLCJkcHMiLCJjaGFpbiIsImlubmVySFRNTCIsInRoZW4iLCJzdHlsZVNoZWV0cyIsInRkMSIsInRkMiIsInRyIiwidGJvZHkiLCJyb3dDb3VudCIsImoiLCJhdHRyIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFBQSxHQUFFQyxVQUFVQyxNQUFNLFdBRWRGLEVBQUVHLFFBQVEsOEJBQStCLFNBQVVDLEdBRS9DQyxPQUFPQyxvQkFBc0JGLEVBRTdCSixFQUFFTyxLQUFLSCxFQUFRLFNBQVVJLEVBQUdDLEdBRXhCLEdBQUlDLEdBQU1WLEVBQUUscUJBQXFCVyxPQUFPRixFQUFNRyxLQUU5Q1osR0FBRVUsR0FBS0csSUFBSUosRUFBTUssVUFFakJkLEVBQUUsVUFBVVcsT0FBT0QsR0FFVCxJQUFORixHQUNBTyxXQUFXTixFQUFNSztBQ2ZqQyxZQUVBLFNBQVNFLGlCQUVMLEdBQUlDLEdBQVVqQixFQUFFLHdCQUNaa0IsRUFBdUJsQixFQUFFLG9CQUFvQm1CLE9BQVMsRUFDdERDLEVBQW1CcEIsRUFBRSxzQkFBc0JtQixPQUFTLEVBU3BERSxJQVBJQyxTQUFVLFdBQ04sTUFBT0MsU0FBUUMsUUFBUUMsUUFBUUMsSUFBSSxXQUV2Q0MsUUFBU1QsRUFDVFUsVUFBV1IsRUFDWE4sU0FBVWUsUUFBUWYsV0FHbEJnQixjQUNBQyxhQUFjLEdBR3RCL0IsR0FBRU8sS0FBS1UsRUFBUyxTQUFVVCxFQUFHSyxHQUN6QixHQUFJbUIsR0FBT2hDLEVBQUVhLEdBQUtBLE1BQ2RD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LEVBQVE5RSxRQUFRQyxRQUFRNEUsRUFFNUJ2QixHQUFheUIsVUFBWSxFQUV6QixLQUFLLEdBQUk5RixHQUFJLEVBQUdBLEVBQUk0RixFQUFJdEUsV0FBV1gsT0FBUVgsSUFFbkM0RixFQUFJdEUsV0FBV3RCLEdBQUdxQyxlQUFnQixJQUNsQ3dELEVBQVFBLEVBQU1FLEtBQUtsQyxtQkFDZGtDLEtBQUtqQixhQUNMaUIsS0FBS2IsaUJBQ0xhLEtBQUtaLFVBQ0xZLEtBQUtsQyxtQkFDTGtDLEtBQUtOLGFBQ0xNLEtBQUtsQyxtQkFDTGtDLEtBQUtKLGFBR2RFLEVBQVFBLEVBQU1FLEtBQUtuQixhQXRPM0IsR0FBSUksV0FBWXhGLEVBQUUsYUFDZCtFLFVBQVk5RSxTQUFTdUcsWUFBWXZHLFNBQVN1RyxZQUFZckYsT0FBUyxHQUMvRHFDLFFBQVV4RCxFQUFFLHlCQUF5QjtBQ0Z6QyxjQUFDLFdBV0csSUFBSyxHQU5EeUcsR0FDQUMsRUFDQUMsRUFDQVQsRUFKQVUsRUFBUTVHLEVBQUUsU0FLVjZHLEVBQVcsR0FFTkMsRUFBSSxFQUFRRCxHQUFMQyxFQUFlQSxJQUMzQlosRUFBUWxHLEVBQUUsV0FDVnlHLEVBQU16RyxFQUFFLGFBQ1IwRyxFQUFNMUcsRUFBRSxhQUNSMkcsRUFBSzNHLEVBQUUsYUFFUEEsRUFBRTJHLEdBQUlJLEtBQUssS0FBWCxNQUF1QkQsR0FFdkI5RyxFQUFFa0csR0FBT2EsS0FBSyxPQUFkLFFBQThCRCxHQUFLQyxLQUFLLE9BQVEsVUFFaEQvRyxFQUFFMEcsR0FBS0ssS0FBSyxLQUFaLE9BQXlCRCxHQUV6QjlHLEVBQUV5RyxHQUFLOUYsT0FBT3VGLEdBQ2RsRyxFQUFFMkcsR0FBSWhHLE9BQU84RixHQUFLOUYsT0FBTytGLEdBQ3pCMUcsRUFBRTRHLEdBQU9qRyxPQUFPZ0ciLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAkLmdldEpTT04oXCIuLi9mdW5jTWFjaGluZVNldHRpbmdzLmpzb25cIiwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICB3aW5kb3cucHJvZmVzc29yQ29uZmlnRmlsZSA9IHJlc3VsdDtcclxuXHJcbiAgICAgICAgJC5lYWNoKHJlc3VsdCwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0ID0gJChcIjxvcHRpb24+PC9vcHRpb24+XCIpLmFwcGVuZChmaWVsZC5uYW1lKTtcclxuXHJcbiAgICAgICAgICAgICQob3B0KS52YWwoZmllbGQuZXF1YXRpb24pO1xyXG5cclxuICAgICAgICAgICAgJChcInNlbGVjdFwiKS5hcHBlbmQob3B0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VQbG90KGZpZWxkLmVxdWF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbn0pO1xyXG4iLCJ2YXIgeE1lbW9yeSA9IFtdO1xyXG5cclxuZnVuY3Rpb24gc3RhcnRGdW5jTWFjaCgpIHtcclxuXHJcbiAgICB2YXIgeGlucHV0cyA9ICQoXCJpbnB1dFt0eXBlPSdudW1iZXInXVwiKSxcclxuICAgICAgICBoaWRlQW5pbWF0aW9uQ2hlY2tlZCA9ICQoXCIjYW5pbWF0ZTpjaGVja2VkXCIpLmxlbmd0aCA+IDAsXHJcbiAgICAgICAgaGlkZUdyYXBoQ2hlY2tlZCA9ICQoXCIjc2hvd0dyYXBoOmNoZWNrZWRcIikubGVuZ3RoID4gMCxcclxuICAgICAgICBncmFwaE9wdCA9IHtcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY29uc29sZS5sb2coXCJEb25lIVwiKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFuaW1hdGU6IGhpZGVBbmltYXRpb25DaGVja2VkLFxyXG4gICAgICAgICAgICBzaG93R3JhcGg6IGhpZGVHcmFwaENoZWNrZWQsXHJcbiAgICAgICAgICAgIGVxdWF0aW9uOiBwcm9mT3B0LmVxdWF0aW9uXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbmlTZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgZGF0YXBvaW50czogW10sXHJcbiAgICAgICAgICAgIGN1cnJlbnRSb3VuZDogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgJC5lYWNoKHhpbnB1dHMsIGZ1bmN0aW9uIChpLCB2YWwpIHtcclxuICAgICAgICB2YXIgeHZhbCA9ICQodmFsKS52YWwoKSxcclxuICAgICAgICAgICAgZXF1YXRpb24gPSBwcm9mT3B0LmVxdWF0aW9uO1xyXG5cclxuICAgICAgICBpZiAoeHZhbCkge1xyXG4gICAgICAgICAgICB2YXIgcmVwbGFjZVggPSBlcXVhdGlvbi5yZXBsYWNlKFwieFwiLCBgKCR7eHZhbH0pYCksXHJcbiAgICAgICAgICAgICAgICB5dmFsID0gbWF0aC5ldmFsKHJlcGxhY2VYKSxcclxuICAgICAgICAgICAgICAgIGlucHV0Q29vciA9IHZhbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgICAgIHBvaW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHh2YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogeXZhbCxcclxuICAgICAgICAgICAgICAgICAgICBpZDogaSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VFcXU6IHByb2ZPcHQuZXF1YXRpb24ucmVwbGFjZShcInhcIiwgYCgke3h2YWx9KWApLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBvaW50OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICQoYDxwPiR7eHZhbH08L3A+YClbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW5Db29yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogaW5wdXRDb29yLnRvcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogaW5wdXRDb29yLmxlZnRcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZENvb3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiA1NSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMzAwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gQ09NTUVOVEVEIE9VVCBjb2RlIGlzIG1lYW50IHRvIHNldCB1cCBhbiBhcnJheSB0aGF0IGFuYXlsemVzIFxyXG4gICAgICAgICAgICAvLyB3aGV0aGVyIG9yIG5vdCBpZiBhIG51bWJlciBuZWVkcyB0byBiZSBhbmltYXRlZCBhZ2Fpbi4gIEl0IGFsbW9zdFxyXG4gICAgICAgICAgICAvLyB3b3JrcyBhbmQgcHJvYmFibHkgbmVlZHMgdG8gYmUgcHV0IHNvbWV3aGVyZSBlbHNlIGluIHRoZSBjb2RlLiAgSW5cclxuICAgICAgICAgICAgLy8gaXRzICBjdXJyZW50IHBsYWNlbWVudCBpdCBpcyBqdXN0IG9uZSBiZWhpbmQuXHJcbi8qXHJcblxyXG4gICAgICAgICAgICBpZiAoeE1lbW9yeVtpXSA9PT0geHZhbCkge1xyXG4gICAgICAgICAgICAgICAgcG9pbnQudXBkYXRlUG9pbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4qL1xyXG5cclxuXHJcbiAgICAgICAgICAgIGFuaVNldHRpbmdzLmRhdGFwb2ludHMucHVzaChwb2ludCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbi8qXHJcbiAgICBpZiAoeE1lbW9yeS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAkLmVhY2goeGlucHV0cywgZnVuY3Rpb24gKGksIHZhbCkge1xyXG4gICAgICAgICAgICB2YXIgeHZhbHVlID0gJCh2YWwpLnZhbCgpO1xyXG4gICAgICAgICAgICB4TWVtb3J5LnB1c2goeHZhbHVlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coeHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4aW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB4ZXIgPSAkKHhpbnB1dHNbaV0pLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgeE1lbSA9ICt4TWVtb3J5W2ldO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coK3hlciwgeE1lbSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoK3hlciAhPT0geE1lbSkge1xyXG4gICAgICAgICAgICAgICAgeE1lbW9yeVtpXSA9ICt4ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAqL1xyXG4gICAgYW5pbWF0b3JDb250cm9sKGFuaVNldHRpbmdzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tDb25maWcodmFsKSB7XHJcbiAgICB2YXIgcHJvZk9wdDtcclxuICAgICQuZWFjaChwcm9mZXNzb3JDb25maWdGaWxlLCBmdW5jdGlvbiAoaSwgaXRlbSkge1xyXG4gICAgICAgIGlmIChpdGVtLmVxdWF0aW9uID09PSB2YWwpIHtcclxuICAgICAgICAgICAgcHJvZk9wdCA9IGl0ZW07XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiBwcm9mT3B0O1xyXG59XHJcblxyXG4vL0RpcHNsYXkgS2F0ZXggZXF1YXRpb25cclxuZnVuY3Rpb24gY2hhbmdlUGxvdCh2YWwpIHtcclxuXHJcbiAgICB3aW5kb3cucHJvZk9wdCA9IGNoZWNrQ29uZmlnKHZhbCk7XHJcblxyXG4gICAgdmFyIHkgPSBgeSA9IGAsXHJcbiAgICAgICAgZXF1YXQgPSBgJHt2YWx9YCxcclxuICAgICAgICBlcXVQYXJhID0gJChcIiNmdW5jdGlvbk1hY2hpbmUgI2VxdVwiKVswXSxcclxuICAgICAgICB5UGFyYSA9ICQoXCIjZnVuY3Rpb25NYWNoaW5lICN5XCIpO1xyXG5cclxuICAgICQoZXF1UGFyYSkuZW1wdHkoXCJcIik7XHJcblxyXG4gICAga2F0ZXgucmVuZGVyKHksIHlQYXJhWzBdKTtcclxuICAgIGthdGV4LnJlbmRlcihlcXVhdCwgZXF1UGFyYSk7XHJcbn1cclxuXHJcbi8qKioqKkRPQ1VNRU5UIG9uY2hhbmdlIEVWRU5UIEhBTkRMRVIqKioqKi9cclxuJChcInNlbGVjdFwiKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcclxuICAgIGNoYW5nZVBsb3QoZS50YXJnZXQudmFsdWUpO1xyXG59KTtcclxuXHJcbi8qKioqRE9DVU1FTlQga2V5ZG93biBFVkVOVCBIQU5ETEVSKioqKi9cclxuJChkb2N1bWVudCkua2V5cHJlc3MoZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmIChlLndoaWNoID09IDEzKSB7XHJcbiAgICAgICAgc3RhcnRGdW5jTWFjaCgpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8qKioqKkdPISBDbGljayoqKioqL1xyXG4kKFwiaW5wdXRbdHlwZT0nYnV0dG9uJ11bdmFsdWU9J0dvISddXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAvL1RPRE86IE1vc3QgbGlrZWx5IHRvIGRldGVjdCBpZiBhbiBhbmltYXRpb24gaXMgb2NjdXJyaW5nIGl0IHdvdWxkIGJlIGJlc3QgdG8gY2hlY2sgb2YgYSBzcGVjaWZpYyBhbmltYXRpb24gY2xhc3MgZXhpc3RzIG9uIHRoZSB3ZWJwYWdlLlxyXG5cclxuICAgIC8vICAgIGlmICgkKCc6YW5pbWF0ZWQnKS5sZW5ndGggPT09IDApIHtcclxuICAgIHN0YXJ0RnVuY01hY2goKTtcclxuICAgIC8vICAgIH1cclxuXHJcbn0pOyIsInZhciBzdGF0dXNCYXIgPSAkKFwiI3N0YXR1cyBwXCIpLFxyXG4gICAgbGFzdFNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoIC0gMV0sXHJcbiAgICBlcXVQYXJhID0gJChcIiNmdW5jdGlvbk1hY2hpbmUgI2VxdVwiKVswXTtcclxuXHJcbmZ1bmN0aW9uIGFuaW1hdGlvblRlbXBsYXRlKGFuaVNldHRpbmdzKSB7XHJcblxyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcclxuICAgICAgICBzdGFydFRvcE9mZiA9IHBvaW50RGF0YS5iZWdpbkNvb3IudG9wICsgNSxcclxuICAgICAgICBzdGFydExlZnRPZmYgPSBwb2ludERhdGEuYmVnaW5Db29yLmxlZnQgKyAzMCxcclxuICAgICAgICBlbmRUb3BPZmYgPSBwb2ludERhdGEuZW5kQ29vci50b3AgKyA1LFxyXG4gICAgICAgIGVuZExlZnRPZmYgPSBwb2ludERhdGEuZW5kQ29vci5sZWZ0ICsgMzAsXHJcbiAgICAgICAgaGlnaHdheVBhdGggPSAyNDYuNSxcclxuICAgICAgICBpZCA9IHBvaW50RGF0YS5pZC50b1N0cmluZygpLFxyXG4gICAgICAgIG51bUNvbnRhaW5lciA9ICQoXCIjbnVtQ29udGFpbmVyXCIpLFxyXG4gICAgICAgIG51bVBhcmEgPSBwb2ludERhdGEuZWxlbWVudDtcclxuXHJcbiAgICBsYXN0U2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyBhbmltYXRpb25QYXRoJHtpZH0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke3N0YXJ0VG9wT2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7c3RhcnRMZWZ0T2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMzMlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7c3RhcnRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtoaWdod2F5UGF0aH1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDY2JSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke2VuZFRvcE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke2hpZ2h3YXlQYXRofXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOTAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7ZW5kVG9wT2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7ZW5kTGVmdE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsIGxhc3RTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG5cclxuICAgICQobnVtQ29udGFpbmVyKS5hcHBlbmQobnVtUGFyYSk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgJChudW1QYXJhKVxyXG4gICAgICAgICAgICAuY3NzKFwicG9zaXRpb25cIiwgXCJhYnNvbHV0ZVwiKVxyXG4gICAgICAgICAgICAuY3NzKFwidG9wXCIsIGAke3N0YXJ0VG9wT2ZmfXB4YClcclxuICAgICAgICAgICAgLmNzcyhcImxlZnRcIiwgYCR7c3RhcnRMZWZ0T2ZmfXB4YClcclxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgYW5pbWF0aW9uUGF0aCR7aWR9IDRzIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgLmNzcyhcIm9wYWNpdHlcIiwgYDBgKVxyXG4gICAgICAgICAgICAuY3NzKFwiekluZGV4XCIsIGAxMDBgKVxyXG4gICAgICAgICAgICAuYmluZCgnYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVJvdW5kKGFuaVNldHRpbmdzKSB7XHJcblxyXG4gICAgdmFyIHBsYWNlaG9sZGVyID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGFuaVNldHRpbmdzLmN1cnJlbnRSb3VuZCArPSAxO1xyXG4gICAgICAgIHBsYWNlaG9sZGVyLnVwZGF0ZVBvaW50ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiByZXBsYWNlWEVxdShkYXRhKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKHN0YXR1c0JhcilcclxuICAgICAgICAgICAgLmh0bWwoXCJcIilcclxuICAgICAgICAgICAgLmh0bWwoXCI8cD5DYWxjdWxhdGluZzwvcD5cIik7XHJcblxyXG4gICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBcInRleHREaXNhcHBlYXIgMnMgZWFzZS1pbi1vdXRcIilcclxuICAgICAgICAgICAgLmJpbmQoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAwKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dFdmFsdWF0ZUVxdShhbmlTZXR0aW5ncykge1xyXG5cclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXHJcbiAgICAgICAgY2hhbmdlRXF1ID0gcG9pbnREYXRhLmNoYW5nZUVxdTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBwb2ludERhdGEueSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAkKHN0YXR1c0JhcilcclxuICAgICAgICAgICAgICAgIC5odG1sKFwiXCIpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChcIjxwPlJldHVybmluZyBhbnN3ZXIuPC9wPlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGthdGV4LnJlbmRlcihgJHtjaGFuZ2VFcXV9YCwgZXF1UGFyYSk7XHJcblxyXG4gICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCAndGV4dEFwcGVhciAxcyBlYXNlLWluLW91dCcpXHJcbiAgICAgICAgICAgIC5iaW5kKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93WUFucyhhbmlTZXR0aW5ncykge1xyXG5cclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXHJcbiAgICAgICAgbmV3RW5kVG9wID0gcG9pbnREYXRhLmJlZ2luQ29vci50b3AsXHJcbiAgICAgICAgbmV3RW5kTGVmdCA9IHBvaW50RGF0YS5iZWdpbkNvb3IubGVmdCArIDEwMCxcclxuICAgICAgICBuZXdCZWdpblRvcCA9IHBvaW50RGF0YS5lbmRDb29yLnRvcCxcclxuICAgICAgICBuZXdCZWdpbkxlZnQgPSBwb2ludERhdGEuZW5kQ29vci5sZWZ0O1xyXG5cclxuICAgIHBvaW50RGF0YS5lbmRDb29yID0ge1xyXG4gICAgICAgIHRvcDogbmV3RW5kVG9wLFxyXG4gICAgICAgIGxlZnQ6IG5ld0VuZExlZnRcclxuICAgIH07XHJcblxyXG4gICAgcG9pbnREYXRhLmJlZ2luQ29vciA9IHtcclxuICAgICAgICB0b3A6IG5ld0JlZ2luVG9wLFxyXG4gICAgICAgIGxlZnQ6IG5ld0JlZ2luTGVmdFxyXG4gICAgfTtcclxuXHJcbiAgICBwb2ludERhdGEuZWxlbWVudC5pbm5lclRleHQgPSBwb2ludERhdGEueVxyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG5cclxuICAgICAgICAkKHN0YXR1c0JhcilcclxuICAgICAgICAgICAgLmh0bWwoXCJcIilcclxuICAgICAgICAgICAgLmh0bWwoXCI8cD5TZW5kaW5nIGFuc3dlcjwvcD5cIik7XHJcblxyXG4gICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCAndGV4dERpc2FwcGVhciAycyBlYXNlLWluLW91dCcpXHJcbiAgICAgICAgICAgIC5iaW5kKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICBrYXRleC5yZW5kZXIoYCR7cG9pbnREYXRhLnl9YCwgZXF1UGFyYSk7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCAndGV4dEFwcGVhciAxcyBlYXNlLWluLW91dCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmJpbmQoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsYWNlWVZhbHVlKGFuaVNldHRpbmdzKSB7XHJcblxyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcclxuICAgICAgICBuZXdCZWdpblRvcCA9IHBvaW50RGF0YS5lbmRDb29yLnRvcCxcclxuICAgICAgICBuZXdCZWdpbkxlZnQgPSBwb2ludERhdGEuZW5kQ29vci5sZWZ0O1xyXG5cclxuICAgIHBvaW50RGF0YS5iZWdpbkNvb3IgPSB7XHJcbiAgICAgICAgdG9wOiBuZXdCZWdpblRvcCxcclxuICAgICAgICBsZWZ0OiBuZXdCZWdpbkxlZnRcclxuICAgIH1cclxuXHJcbiAgICBwb2ludERhdGEuZW5kQ29vciA9IHtcclxuICAgICAgICB0b3A6IDE1MCxcclxuICAgICAgICBsZWZ0OiAzMDBcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuXHJcbiAgICAgICAgJChzdGF0dXNCYXIpXHJcbiAgICAgICAgICAgIC5odG1sKFwiXCIpXHJcbiAgICAgICAgICAgIC5odG1sKFwiPHA+UGxvdHRpbmcuLi48L3A+XCIpO1xyXG5cclxuICAgICAgICB2YXIgaW5wdXQgPSAkKGB0ZCN5dmFsJHtwb2ludERhdGEuaWQgKyAxfWApWzBdO1xyXG4gICAgICAgICQoaW5wdXQpLmh0bWwoXCJcIik7XHJcbiAgICAgICAgJChpbnB1dCkuYXBwZW5kKGA8cD4ke3BvaW50RGF0YS55fTwvcD5gKTtcclxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldFJvdW5kKGFuaVNldHRpbmdzKSB7XHJcblxyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgJ3RleHREaXNhcHBlYXIgMnMgZWFzZS1pbi1vdXQnKVxyXG4gICAgICAgICAgICAuYmluZChcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICQoc3RhdHVzQmFyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKFwiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoXCI8cD5SZXNldHRpbmcuLi48L3A+XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAwKTtcclxuICAgICAgICAgICAgICAgIGthdGV4LnJlbmRlcihgJHtwcm9mT3B0LmVxdWF0aW9ufWAsIGVxdVBhcmEpO1xyXG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgJ3RleHRBcHBlYXIgMXMgZWFzZS1pbi1vdXQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5iaW5kKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChzdGF0dXNCYXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vL0hhbmRsZSBhbGwgQ1NTIGFuaW1hdGlvbnNcclxuZnVuY3Rpb24gYW5pbWF0b3JDb250cm9sKGRwcykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgbnVtQ29udGFpbmVyID0gJChcIiNudW1Db250YWluZXJcIiksXHJcbiAgICAgICAgY2hhaW4gPSBQcm9taXNlLnJlc29sdmUoZHBzKTtcclxuXHJcbiAgICBudW1Db250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRwcy5kYXRhcG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGRwcy5kYXRhcG9pbnRzW2ldLnVwZGF0ZVBvaW50ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNoYWluID0gY2hhaW4udGhlbihhbmltYXRpb25UZW1wbGF0ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlcGxhY2VYRXF1KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd0V2YWx1YXRlRXF1KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd1lBbnMpXHJcbiAgICAgICAgICAgICAgICAudGhlbihhbmltYXRpb25UZW1wbGF0ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHBsYWNlWVZhbHVlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oYW5pbWF0aW9uVGVtcGxhdGUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXNldFJvdW5kKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgLnRoZW4ocGxvdHRlcilcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hhaW4gPSBjaGFpbi50aGVuKHVwZGF0ZVJvdW5kKTtcclxuICAgIH1cclxufSIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAvKioqKlRBQkxFIE1BS0VSKioqKi9cclxuICAgIHZhciB0Ym9keSA9ICQoXCJ0Ym9keVwiKSxcclxuICAgICAgICB0ZDEsXHJcbiAgICAgICAgdGQyLFxyXG4gICAgICAgIHRyLFxyXG4gICAgICAgIGlucHV0LFxyXG4gICAgICAgIHJvd0NvdW50ID0gMTk7XHJcblxyXG4gICAgZm9yICh2YXIgaiA9IDE7IGogPD0gcm93Q291bnQ7IGorKykge1xyXG4gICAgICAgIGlucHV0ID0gJChcIjxpbnB1dD5cIik7XHJcbiAgICAgICAgdGQxID0gJChcIjx0ZD48L3RkPlwiKTtcclxuICAgICAgICB0ZDIgPSAkKFwiPHRkPjwvdGQ+XCIpO1xyXG4gICAgICAgIHRyID0gJChcIjx0cj48L3RyPlwiKTtcclxuXHJcbiAgICAgICAgJCh0cikuYXR0cihcImlkXCIsIGByb3cke2p9YCk7XHJcblxyXG4gICAgICAgICQoaW5wdXQpLmF0dHIoXCJuYW1lXCIsIGBpbnB1dCR7an1gKS5hdHRyKFwidHlwZVwiLCBcIm51bWJlclwiKTtcclxuXG4gICAgICAgICQodGQyKS5hdHRyKFwiaWRcIiwgYHl2YWwke2p9YCk7XG5cclxuICAgICAgICAkKHRkMSkuYXBwZW5kKGlucHV0KTtcclxuICAgICAgICAkKHRyKS5hcHBlbmQodGQxKS5hcHBlbmQodGQyKTtcclxuICAgICAgICAkKHRib2R5KS5hcHBlbmQodHIpO1xyXG4gICAgfVxyXG59KCkpO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
