"use strict";!function(){for(var t,a,d,p,r=$("tbody"),n=19,e=1;e<=n;e++)p=$("<input>"),t=$("<td></td>"),a=$("<td></td>"),d=$("<tr></tr>"),$(d).attr("id","row"+e),$(p).attr("name","input"+e).attr("type","number"),$(a).attr("id","yval"+e),$(t).append(p),$(d).append(t).append(a),$(r).append(d)}();
"use strict";var plotGraph=function(){function t(t){return function(e){var n=(0).toFixed(2);return function(e){var a=t.x*e;this.textContent="( "+a.toFixed(2)+", "+n+")"}}}function e(t){return function(){var e=t.x,n=t.y;return function(t){this.textContent="( "+e+", "+(n*t).toFixed(2)+")"}}}function n(t){return"graphPoint"+t}function a(t){var e=d3.selectAll(c).append("g").attr("class","point").attr("id",n(t.id));return e.append("circle").attr("r",4).attr("cx",0).attr("cy",0),e.append("text").text("(0, 0)").attr("x",5).attr("y",15),e.attr("transform","translate("+d(0)+" "+l(0)+")"),e}function r(r,i){var o,u,s=r.datapoints[r.currentRound];document.querySelectorAll(c+" .graph .line").length>0;r.datapoints.forEach(function(t){t.updatePoint&&d3.select("#"+n(t.id)).remove()}),r.graphOpt.graphHide?d3.select(c+" .graph .line").attr("display","none"):d3.select(c+" .graph .line").attr("display","inline"),s.updatePoint?(o=a(s),r.graphOpt.animateHide?(o.attr("transform","translate("+d(s.x)+" "+l(s.y)+")"),o.select("text").text("("+s.x+", "+s.y+")"),i(r)):(u=o.transition().duration(1500).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+l(0)+")"),u.select("text").tween("text",t(s)),u.transition().duration(1500).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+l(s.y)+")").each("end",function(){i(r)}).select("text").tween("text",e(s)))):i(r)}function i(t,e){var n=t.graphOpt,a={target:e,data:[{fn:n.equation,skipTip:!0}],xAxis:{domain:[n.view.x.min,n.view.x.max]},yAxis:{domain:[n.view.y.min,n.view.y.max]},disableZoom:!0,grid:!0};o=e,c=o+" .content",u=n.equation,s=functionPlot(a),d=s.meta.xScale,l=s.meta.yScale,d3.selectAll(c+" .point").remove()}var o,c,u,s,d,l;return{update:r,setup:i}}();
"use strict";$(document).ready(function(){function t(t,n){var a=JSON.stringify(n),o=$("<option></option>").append(t.name);$(o).val(t.equation).attr("data-profOpt",a),$("select").append(o)}var n=location.search.substring(1),a=n.split("=")[1]+".json";$.getJSON(a,function(n){window.professorConfigFile=n,$.each(n,function(n,a){var o={graphOpt:a};t(a,o),0===n&&(plotGraph.setup(o,"#graph"),changePlot(a.equation))})}).fail(function(){$("#status p").append("Add a query string")})});
"use strict";function runAnimation(n,t){return function(e){var a=e.datapoints[e.currentRound],i=a.element;return new Promise(function(a){$(i).html(t).css({animation:""+n+e.currentRound+" "+aniDuration+"s ease-in-out"}).one("animationend",function(n){a(e)})})}}function statusMessage(n){var t=$("#status p");return function(e){return new Promise(function(a){t.html(n),a(e)})}}function replaceXEqu(n){return new Promise(function(t){$(equPara).css("animation","textDisappear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",0),t(n)})})}function showEvaluateEqu(n){var t=n.datapoints[n.currentRound],e=t.changeEqu;return new Promise(function(t){katex.render(""+e,equPara),$(equPara).css("animation","textAppear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",1),t(n)})})}function showYAns(n){var t=n.datapoints[n.currentRound];return new Promise(function(e){$(equPara).css("animation","textDisappear "+aniDuration+"s ease-in-out").one("animationend",function(){$(equPara).css("opacity",0),katex.render(""+t.y,equPara),e(n)})})}function showEquationAgain(n){return new Promise(function(t){$(equPara).css("animation","textAppear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",1),t(n)})})}function placeYValue(n){var t=n.datapoints[n.currentRound];return new Promise(function(e){var a=$("td#yval"+(t.id+1))[0];$(a).html(""),$(a).append("<p>"+t.y+"</p>"),e(n)})}function resetRound(n){return new Promise(function(t){$(equPara).css("animation","textDisappear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",0),katex.render(""+profOpt.equation,equPara),t(n)})})}function showDefaultEqu(n){return new Promise(function(t){$(equPara).css("animation","textAppear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",1),t(n)})})}function plotter(n){n.datapoints[n.currentRound];return new Promise(function(t){plotGraph.update(n,n.graphOpt.callback),t(n)})}function updateRound(n){var t=n.datapoints[n.currentRound];return new Promise(function(e){n.currentRound+=1,t.updatePoint=!1,e(n)})}function animateFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(../img/functionMachineAni.gif)"}),t(n)})}function stopAniFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(../img/functionMachineStill.gif)"}),t(n)})}function miniAni(n){return new Promise(function(t){var e=n.datapoints[n.currentRound],a=e.y,i=$("<p>"+a+"</p>");$("body").append(i),i.css({position:"absolute",opacity:0,left:550,top:50}).animate({opacity:1,top:100},function(e){i.css({display:"none"}),t(n)})})}function aniPromiseChain(n,t){plotGraph.setup(n,"#graph"),n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(runAnimation("xToMachine",n.x)).then(animateFuncMachine).then(statusMessage("Calculating")).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(showEquationAgain).then(stopAniFuncMachine).then(miniAni).then(runAnimation("machineToY",n.y)).then(placeYValue).then(runAnimation("yToStatusBar","("+n.x+","+n.y+")")).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter).then(statusMessage("Resetting")).then(resetRound).then(statusMessage("")).then(showDefaultEqu)),t=t.then(updateRound)})}function animateHide(n,t){plotGraph.setup(n,"#graph"),n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(placeYValue).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter).then(statusMessage("Resetting")).then(resetRound).then(showDefaultEqu)),t=t.then(updateRound)})}function noGraph(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(runAnimation("xToMachine",n.x)).then(animateFuncMachine).then(statusMessage("Calculating")).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(showEquationAgain).then(stopAniFuncMachine).then(miniAni).then(runAnimation("machineToY",n.y)).then(placeYValue).then(statusMessage("Resetting")).then(resetRound).then(statusMessage("")).then(showDefaultEqu)),t=t.then(updateRound)})}function solveForY(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(placeYValue)),t=t.then(updateRound)})}function animatorControl(n){var t=$("#numContainer"),e=Promise.resolve(n);t.innerHTML="",n.graphOpt.graphHide&&n.graphOpt.animateHide?solveForY(n,e):n.graphOpt.animateHide?animateHide(n,e):n.graphOpt.graphHide?noGraph(n,e):aniPromiseChain(n,e)}var equPara=$("#functionMachine #equ")[0],aniDuration=2;
"use strict";function changePlot(t){xMemory=[],clearValues(),window.profOpt=checkConfig(t);var n="y = ",e=""+t,o=$("#functionMachine #equ")[0],a=$("#functionMachine #y");$(o).empty(""),katex.render(n,a[0]),katex.render(e,o)}function stairStep(t){var n=246.5,e=document.styleSheets[document.styleSheets.length-1];e.insertRule("@keyframes "+t.name+" {\n                            0% {\n                                opacity: 1;\n                                top: "+t.startTopOff+"px;\n                                left: "+t.startLeftOff+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+t.startTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            66% {\n                                top: "+t.endTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+t.endTopOff+"px;\n                                left: "+t.endLeftOff+"px;\n                            }\n                        }",e.cssRules.length)}function makeXToMachine(t,n){stairStep({startTopOff:t.top+5,startLeftOff:t.left+30,endTopOff:55,endLeftOff:300,name:"xToMachine"+n})}function makeMachineToY(t,n){stairStep({startTopOff:100,startLeftOff:530,endTopOff:t.top+5,endLeftOff:t.right+5,name:"machineToY"+n})}function makeYToStatusBar(t,n){stairStep({startTopOff:t.top+5,startLeftOff:t.right+10,endTopOff:150,endLeftOff:300,name:"yToStatusBar"+n})}function setUpObject(t,n,e){t.each(function(t){var o,a,i=$(this).val();if(i&&(o=+i,a=o.toFixed(profOpt.rounding),$(this).val(a),profOpt.view.x.min<=a&&a<=profOpt.view.x.max)){var p=n.equation.replace("x","("+a+")"),r=math.eval(p),u=(this.getBoundingClientRect(),{x:a,y:r.toFixed(profOpt.rounding),id:t,changeEqu:profOpt.equation.replace("x","("+a+")"),updatePoint:xMemory[t]!==a,element:$("#numContainer p").get(t)});u.updatePoint&&$("td#yval"+(t+1)).html(""),xMemory[t]=a,e.datapoints.push(u)}})}function startFuncMach(){var t=$("input[type='number']"),n=$("#animate:checked").length>0,e=$("#showGraph:checked").length>0,o={callback:function(t){return new Promise(function(n){t.datapoints[t.currentRound].updatePoint=!1,n(t)})},animateHide:n,graphHide:e,equation:profOpt.equation,view:profOpt.view},a={datapoints:[],currentRound:0,graphOpt:o};setUpObject(t,o,a),animatorControl(a)}function checkConfig(t){var n;return $.each(professorConfigFile,function(e,o){o.equation===t&&(n=o)}),n}function clearValues(){var t=$("input[type='number']"),n=$("tr td:nth-of-type(2)");t.each(function(t,n){n.value=""}),n.each(function(t,n){n.innerHTML=""})}for(var xMemory=[],inputs=document.querySelectorAll("input[type='number']"),inputCount=inputs.length,run=!0,i=0;i<inputs.length;i++)inputs[i].oninput=function(t){var n=t.srcElement.value;profOpt.view.x.min<=n&&n<=profOpt.view.x.max?(run=!0,$("input[type='button'][value='Go!']").prop("disabled",!1).css({cursor:"pointer"}),$("#status p").html("")):(run=!1,$("input[type='button'][value='Go!']").prop("disabled",!0).css({cursor:"not-allowed"}),$("#status p").html(n+" x-value out of domains."))};for(var i=0;i<inputCount;i++){xMemory[i]=null;var inputCoor=inputs[i].getBoundingClientRect();makeXToMachine(inputCoor,i),makeMachineToY(inputCoor,i),makeYToStatusBar(inputCoor,i),$("#numContainer").append($("<p></p>"))}$("select").change(function(t){var n=$('option[value="'+t.target.value+'"]'),e=JSON.parse(n.attr("data-profopt"));plotGraph.setup(e,"#graph"),changePlot(t.target.value)}),$(document).keypress(function(t){13==t.which&&run&&startFuncMach()}),$("input[type='button'][value='Go!']").click(function(){run&&startFuncMach()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbG90R3JhcGguanMiLCJhamF4LmpzIiwiYW5pbWF0b3Jjb250cm9sLmpzIiwiZXZlbnRzLmpzIl0sIm5hbWVzIjpbInRkMSIsInRkMiIsInRyIiwiaW5wdXQiLCJ0Ym9keSIsIiQiLCJyb3dDb3VudCIsImoiLCJhdHRyIiwiYXBwZW5kIiwicGxvdEdyYXBoIiwidXBkYXRlVGV4dFgiLCJjdXJyZW50UG9pbnQiLCJkIiwiemVybyIsInRvRml4ZWQiLCJ0IiwibG9jYXRpb24iLCJ4IiwidGhpcyIsInRleHRDb250ZW50IiwidXBkYXRlVGV4dFkiLCJ4Um91bmRlZCIsInlWYWwiLCJ5IiwibWFrZVBvaW50SWQiLCJudW1JbiIsIm1ha2VQb2ludEdyb3VwIiwicG9pbnRHcm91cCIsImQzIiwic2VsZWN0QWxsIiwiZG90TG9jYXRpb24iLCJpZCIsInRleHQiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJ1cGRhdGUiLCJhbmlPcHRpb25zIiwiY2FsbGJhY2siLCJ0cmFuc2l0aW9uIiwiZGF0YXBvaW50cyIsImN1cnJlbnRSb3VuZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImZvckVhY2giLCJwb2ludCIsInVwZGF0ZVBvaW50Iiwic2VsZWN0IiwicmVtb3ZlIiwiZ3JhcGhPcHQiLCJncmFwaEhpZGUiLCJhbmltYXRlSGlkZSIsImR1cmF0aW9uIiwiZWFzZSIsInR3ZWVuIiwiZWFjaCIsInNldHVwIiwic2VsZWN0b3IiLCJvcHRzSW4iLCJncmFwaE9wdGlvbnMiLCJ0YXJnZXQiLCJkYXRhIiwiZm4iLCJlcXVhdGlvbiIsInNraXBUaXAiLCJ4QXhpcyIsImRvbWFpbiIsInZpZXciLCJtaW4iLCJtYXgiLCJ5QXhpcyIsImRpc2FibGVab29tIiwiZ3JpZCIsImdyYXBoTG9jYXRpb25TZWxlY3RvciIsImN1cnJlbnRFcXVhdGlvbiIsImZ1blBsb3QiLCJmdW5jdGlvblBsb3QiLCJtZXRhIiwicmVhZHkiLCJzaG93UHJvZk9wdGlvbnMiLCJwcm9mT3B0IiwiaW5pdCIsInN0cmluZ2lmaWVkRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvcHQiLCJuYW1lIiwidmFsIiwicXVlcnlTdHJpbmciLCJzZWFyY2giLCJzdWJzdHJpbmciLCJxdWVyeSIsInNwbGl0IiwiZ2V0SlNPTiIsInJlc3VsdCIsIndpbmRvdyIsInByb2Zlc3NvckNvbmZpZ0ZpbGUiLCJpIiwiY2hhbmdlUGxvdCIsImZhaWwiLCJydW5BbmltYXRpb24iLCJ2YWx1ZSIsImFuaVNldHRpbmdzIiwiZGF0YXBvaW50IiwibnVtUGFyYSIsImVsZW1lbnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImh0bWwiLCJjc3MiLCJhbmltYXRpb24iLCJhbmlEdXJhdGlvbiIsIm9uZSIsImUiLCJzdGF0dXNNZXNzYWdlIiwibWVzc2FnZSIsInN0YXR1c0JhciIsInJlcGxhY2VYRXF1IiwiZXF1UGFyYSIsInNob3dFdmFsdWF0ZUVxdSIsInBvaW50RGF0YSIsImNoYW5nZUVxdSIsImthdGV4IiwicmVuZGVyIiwic2hvd1lBbnMiLCJzaG93RXF1YXRpb25BZ2FpbiIsInBsYWNlWVZhbHVlIiwicmVzZXRSb3VuZCIsInNob3dEZWZhdWx0RXF1IiwicGxvdHRlciIsInVwZGF0ZVJvdW5kIiwicGxhY2Vob2xkZXIiLCJhbmltYXRlRnVuY01hY2hpbmUiLCJiYWNrZ3JvdW5kLWltYWdlIiwic3RvcEFuaUZ1bmNNYWNoaW5lIiwibWluaUFuaSIsInl2YWx1ZSIsInBhcmEiLCJwb3NpdGlvbiIsIm9wYWNpdHkiLCJsZWZ0IiwidG9wIiwiYW5pbWF0ZSIsImRpc3BsYXkiLCJhbmlQcm9taXNlQ2hhaW4iLCJkcHMiLCJjaGFpbiIsInRoZW4iLCJub0dyYXBoIiwic29sdmVGb3JZIiwiYW5pbWF0b3JDb250cm9sIiwibnVtQ29udGFpbmVyIiwiaW5uZXJIVE1MIiwieE1lbW9yeSIsImNsZWFyVmFsdWVzIiwiY2hlY2tDb25maWciLCJlcXVhdCIsInlQYXJhIiwiZW1wdHkiLCJzdGFpclN0ZXAiLCJvcHRpb25zIiwiaGlnaHdheVBhdGgiLCJsYXN0U2hlZXQiLCJzdHlsZVNoZWV0cyIsImluc2VydFJ1bGUiLCJzdGFydFRvcE9mZiIsInN0YXJ0TGVmdE9mZiIsImVuZFRvcE9mZiIsImVuZExlZnRPZmYiLCJjc3NSdWxlcyIsIm1ha2VYVG9NYWNoaW5lIiwiaW5wdXRDb3JkcyIsImluZGV4IiwibWFrZU1hY2hpbmVUb1kiLCJyaWdodCIsIm1ha2VZVG9TdGF0dXNCYXIiLCJzZXRVcE9iamVjdCIsInhpbnB1dHMiLCJ4dmFsIiwicm91bmRpdCIsInh2YWx1ZSIsInJvdW5kaW5nIiwicmVwbGFjZVgiLCJyZXBsYWNlIiwieXZhbCIsIm1hdGgiLCJldmFsIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0IiwicHVzaCIsInN0YXJ0RnVuY01hY2giLCJoaWRlQW5pbWF0aW9uQ2hlY2tlZCIsImhpZGVHcmFwaENoZWNrZWQiLCJpdGVtIiwieWlucHV0cyIsImlucHV0cyIsImlucHV0Q291bnQiLCJydW4iLCJvbmlucHV0IiwieElucHV0VmFsIiwic3JjRWxlbWVudCIsInByb3AiLCJjdXJzb3IiLCJpbnB1dENvb3IiLCJjaGFuZ2UiLCJzZWxlY3RlZCIsInBhcnNlIiwia2V5cHJlc3MiLCJ3aGljaCIsImNsaWNrIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUFDLFdBYUcsSUFBSyxHQU5EQSxHQUNBQyxFQUNBQyxFQUNBQyxFQUpBQyxFQUFRQyxFQUFFLFNBS1ZDLEVBQVcsR0FFTkMsRUFBSSxFQUFHQSxHQUFLRCxFQUFVQyxJQUMzQkosRUFBUUUsRUFBRSxXQUNWTCxFQUFNSyxFQUFFLGFBQ1JKLEVBQU1JLEVBQUUsYUFDUkgsRUFBS0csRUFBRSxhQUVQQSxFQUFFSCxHQUFJTSxLQUFLLEtBQVgsTUFBdUJELEdBRXZCRixFQUFFRixHQUFPSyxLQUFLLE9BQWQsUUFBOEJELEdBQUtDLEtBQUssT0FBUSxVQUVoREgsRUFBRUosR0FBS08sS0FBSyxLQUFaLE9BQXlCRCxHQUV6QkYsRUFBRUwsR0FBS1MsT0FBT04sR0FD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TSxXQUNyQ1osS0FDQVAiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKlxuICAgIE1ha2UgdGhlIHdob2xlIHRhYmxlIGFuZCBjZWxscyBmb3IgdGhlIGlucHV0IGJveGVzIGFuZCB1c2VyIGludGVyYWN0aW9uLlxuICAgICovXG4gICAgdmFyIHRib2R5ID0gJChcInRib2R5XCIpLFxuICAgICAgICB0ZDEsXG4gICAgICAgIHRkMixcbiAgICAgICAgdHIsXG4gICAgICAgIGlucHV0LFxuICAgICAgICByb3dDb3VudCA9IDE5O1xuXG4gICAgZm9yICh2YXIgaiA9IDE7IGogPD0gcm93Q291bnQ7IGorKykge1xuICAgICAgICBpbnB1dCA9ICQoXCI8aW5wdXQ+XCIpO1xuICAgICAgICB0ZDEgPSAkKFwiPHRkPjwvdGQ+XCIpO1xuICAgICAgICB0ZDIgPSAkKFwiPHRkPjwvdGQ+XCIpO1xuICAgICAgICB0ciA9ICQoXCI8dHI+PC90cj5cIik7XG5cbiAgICAgICAgJCh0cikuYXR0cihcImlkXCIsIGByb3cke2p9YCk7XG5cbiAgICAgICAgJChpbnB1dCkuYXR0cihcIm5hbWVcIiwgYGlucHV0JHtqfWApLmF0dHIoXCJ0eXBlXCIsIFwibnVtYmVyXCIpO1xuXG4gICAgICAgICQodGQyKS5hdHRyKFwiaWRcIiwgYHl2YWwke2p9YCk7XG5cbiAgICAgICAgJCh0ZDEpLmFwcGVuZChpbnB1dCk7XG4gICAgICAgICQodHIpLmFwcGVuZCh0ZDEpLmFwcGVuZCh0ZDIpO1xuICAgICAgICAkKHRib2R5KS5hcHBlbmQodHIpO1xuICAgIH1cbn0oKSk7XG4iLCIvKmpzbGludCBwbHVzcGx1czogdHJ1ZSwgYnJvd3NlcjogdHJ1ZSwgZGV2ZWw6IHRydWUqL1xuLypnbG9iYWwgZDMsIGZ1bmN0aW9uUGxvdCovXG52YXIgcGxvdEdyYXBoID0gKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgZ3JhcGhMb2NhdGlvblNlbGVjdG9yLFxuICAgICAgICBkb3RMb2NhdGlvbixcbiAgICAgICAgY3VycmVudEVxdWF0aW9uLFxuICAgICAgICBmdW5QbG90LFxuICAgICAgICB4U2NhbGUsXG4gICAgICAgIHlTY2FsZSxcbiAgICAgICAgZnJlZUlkID0gMDtcblxuICAgIC8vdGhlc2UgdHdvIGZ1bmN0aW9ucyBtYWtlIHRoZSBmYWN0b3J5IGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCBpbiB0aGUgYW5pbWF0aW9ucyBmb3IgdGhlIHBvaW50IGxhYmVsc1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVRleHRYKGN1cnJlbnRQb2ludCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHZhciB6ZXJvID0gKDApLnRvRml4ZWQoMik7XG5cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGN1cnJlbnRQb2ludC54ICogdDtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRDb250ZW50ID0gXCIoIFwiICsgbG9jYXRpb24udG9GaXhlZCgyKSArIFwiLCBcIiArIHplcm8gKyBcIilcIjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVGV4dFkoY3VycmVudFBvaW50KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciB4Um91bmRlZCA9IGN1cnJlbnRQb2ludC54LFxuICAgICAgICAgICAgICAgIHlWYWwgPSBjdXJyZW50UG9pbnQueTtcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IFwiKCBcIiArIHhSb3VuZGVkICsgXCIsIFwiICsgKHlWYWwgKiB0KS50b0ZpeGVkKDIpICsgXCIpXCI7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VQb2ludElkKG51bUluKSB7XG4gICAgICAgIHJldHVybiAnZ3JhcGhQb2ludCcgKyBudW1JbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlUG9pbnRHcm91cChjdXJyZW50UG9pbnQpIHtcbiAgICAgICAgdmFyIHBvaW50R3JvdXAgPSBkMy5zZWxlY3RBbGwoZG90TG9jYXRpb24pLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAncG9pbnQnKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgbWFrZVBvaW50SWQoY3VycmVudFBvaW50LmlkKSk7XG5cbiAgICAgICAgLy9hZGQgdGhlIGNpcmNsZVxuICAgICAgICBwb2ludEdyb3VwLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgIC5hdHRyKCdyJywgNClcbiAgICAgICAgICAgIC5hdHRyKCdjeCcsIDApXG4gICAgICAgICAgICAuYXR0cignY3knLCAwKTtcblxuICAgICAgICAvL2FkZCB0aGUgbGFiZWxcbiAgICAgICAgcG9pbnRHcm91cC5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgLnRleHQoJygwLCAwKScpXG4gICAgICAgICAgICAuYXR0cigneCcsIDUpXG4gICAgICAgICAgICAuYXR0cigneScsIDE1KTtcbiAgICAgICAgLy9tb3ZlIGl0IHRvICgwLDApXG4gICAgICAgIHBvaW50R3JvdXAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeFNjYWxlKDApICsgJyAnICsgeVNjYWxlKDApICsgJyknKTtcbiAgICAgICAgcmV0dXJuIHBvaW50R3JvdXA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlKGFuaU9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBjdXJyZW50UG9pbnQgPSBhbmlPcHRpb25zLmRhdGFwb2ludHNbYW5pT3B0aW9ucy5jdXJyZW50Um91bmRdLFxuICAgICAgICAgICAgbGluZUlzUGxvdHRlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZG90TG9jYXRpb24gKyAnIC5ncmFwaCAubGluZScpLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICBwb2ludEdyb3VwLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjtcblxuICAgICAgICAvL2NsZWFyIGFueSBwb2ludHMgdGhhdCB3aWxsIGdldCB1cGRhdGVkXG4gICAgICAgIGFuaU9wdGlvbnMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICAgICAgaWYgKHBvaW50LnVwZGF0ZVBvaW50KSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjJyArIG1ha2VQb2ludElkKHBvaW50LmlkKSkucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vY2hlY2sgaWYgd2UgbmVlZCB0byBoaWRlIG9yIHNob3cgdGhlIHBsb3RsaW5lXG4gICAgICAgIGlmIChhbmlPcHRpb25zLmdyYXBoT3B0LmdyYXBoSGlkZSkge1xuICAgICAgICAgICAgZDMuc2VsZWN0KGRvdExvY2F0aW9uICsgJyAuZ3JhcGggLmxpbmUnKS5hdHRyKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGQzLnNlbGVjdChkb3RMb2NhdGlvbiArICcgLmdyYXBoIC5saW5lJykuYXR0cignZGlzcGxheScsICdpbmxpbmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vZG9lcyB0aGUgY3VycmVudFJvdW5kIG5lZWQgdG8gYmUgdXBkYXRlZGVkP1xuICAgICAgICBpZiAoIWN1cnJlbnRQb2ludC51cGRhdGVQb2ludCkge1xuICAgICAgICAgICAgLy9ub3RoaXRuZyB0byBzZWUgaGVyZSBqdXN0IGtlZXAgb24gbW92aW5nXG4gICAgICAgICAgICBjYWxsYmFjayhhbmlPcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vZHJhdyBwb2ludFxuICAgICAgICAgICAgcG9pbnRHcm91cCA9IG1ha2VQb2ludEdyb3VwKGN1cnJlbnRQb2ludCk7XG5cbiAgICAgICAgICAgIC8vaXMgYW5pbWF0aW9uIG9uP1xuICAgICAgICAgICAgaWYgKGFuaU9wdGlvbnMuZ3JhcGhPcHQuYW5pbWF0ZUhpZGUpIHtcbiAgICAgICAgICAgICAgICAvL21vdmUgaXQgaW50byBwbGFjZSB3aXRob3V0IGFuaW1hdGlvblxuICAgICAgICAgICAgICAgIHBvaW50R3JvdXAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeFNjYWxlKGN1cnJlbnRQb2ludC54KSArICcgJyArIHlTY2FsZShjdXJyZW50UG9pbnQueSkgKyAnKScpO1xuICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBsYWJsZVxuICAgICAgICAgICAgICAgIHBvaW50R3JvdXAuc2VsZWN0KCd0ZXh0JykudGV4dCgnKCcgKyBjdXJyZW50UG9pbnQueCArICcsICcgKyBjdXJyZW50UG9pbnQueSArICcpJyk7XG4gICAgICAgICAgICAgICAgLy9jYWxsIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soYW5pT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9kcmF3IHBvaW50IHdpdGggYW5pbWFpb25cbiAgICAgICAgICAgICAgICAvL0ZpcnN0IHRyYW5zaXRpb24gLSBtb3ZlIHRoZSBncm91cCBpbiB0aGUgWFxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24gPSBwb2ludEdyb3VwXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDE1MDApXG4gICAgICAgICAgICAgICAgICAgIC5lYXNlKCdjdWJpYy1vdXQnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeFNjYWxlKGN1cnJlbnRQb2ludC54KSArICcgJyArIHlTY2FsZSgwKSArICcpJyk7XG4gICAgICAgICAgICAgICAgLy9zdWIgdHJhbnNpdGlvbiAtIHVwZGF0ZSB0aGUgbGFiZWxcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLnNlbGVjdCgndGV4dCcpLnR3ZWVuKCd0ZXh0JywgdXBkYXRlVGV4dFgoY3VycmVudFBvaW50KSk7XG5cbiAgICAgICAgICAgICAgICAvL1NlY29uZCB0cmFuc2l0aW9uIC0gbW92ZSB0aGUgZ3JvdXAgaW4gdGhlIFlcbiAgICAgICAgICAgICAgICAvL3N1YiB0cmFuc2l0aW9uIC0gdXBkYXRlIHRoZSBsYWJlbFxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24udHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbigxNTAwKVxuICAgICAgICAgICAgICAgICAgICAuZWFzZSgnY3ViaWMtb3V0JylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZShjdXJyZW50UG9pbnQueCkgKyAnICcgKyB5U2NhbGUoY3VycmVudFBvaW50LnkpICsgJyknKVxuICAgICAgICAgICAgICAgICAgICAuZWFjaCgnZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYW5pT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJ3RleHQnKS50d2VlbigndGV4dCcsIHVwZGF0ZVRleHRZKGN1cnJlbnRQb2ludCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0dXAoYW5pT3B0aW9ucywgc2VsZWN0b3IpIHtcbiAgICAgICAgLy9zdWdhclxuICAgICAgICB2YXIgb3B0c0luID0gYW5pT3B0aW9ucy5ncmFwaE9wdCxcbiAgICAgICAgICAgIGdyYXBoT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHNlbGVjdG9yLFxuICAgICAgICAgICAgICAgIGRhdGE6IFt7XG4gICAgICAgICAgICAgICAgICAgIGZuOiBvcHRzSW4uZXF1YXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHNraXBUaXA6IHRydWVcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICB4QXhpczoge1xuICAgICAgICAgICAgICAgICAgICBkb21haW46IFtvcHRzSW4udmlldy54Lm1pbiwgb3B0c0luLnZpZXcueC5tYXhdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB5QXhpczoge1xuICAgICAgICAgICAgICAgICAgICBkb21haW46IFtvcHRzSW4udmlldy55Lm1pbiwgb3B0c0luLnZpZXcueS5tYXhdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlWm9vbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBncmlkOiB0cnVlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vc2F2ZSBzb21lIHRoaW5ncyBmb3IgbGF0ZXJcbiAgICAgICAgZ3JhcGhMb2NhdGlvblNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIGRvdExvY2F0aW9uID0gZ3JhcGhMb2NhdGlvblNlbGVjdG9yICsgJyAuY29udGVudCc7XG4gICAgICAgIGN1cnJlbnRFcXVhdGlvbiA9IG9wdHNJbi5lcXVhdGlvbjtcblxuICAgICAgICAvL21ha2UgdGhlIHBsb3QgYW5kIHNjYWxlc1xuICAgICAgICBmdW5QbG90ID0gZnVuY3Rpb25QbG90KGdyYXBoT3B0aW9ucyk7XG4gICAgICAgIHhTY2FsZSA9IGZ1blBsb3QubWV0YS54U2NhbGU7XG4gICAgICAgIHlTY2FsZSA9IGZ1blBsb3QubWV0YS55U2NhbGU7XG5cbiAgICAgICAgLy9jbGVhbiBvdXQgYW55IG9sZCBwb2ludHMgZmlyc3RcbiAgICAgICAgZDMuc2VsZWN0QWxsKGRvdExvY2F0aW9uICsgJyAucG9pbnQnKS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB1cGRhdGU6IHVwZGF0ZSxcbiAgICAgICAgc2V0dXA6IHNldHVwXG4gICAgfTtcbn0oKSk7IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgLypcbiAgICBMb2FkIFF1ZXJ5IHN1YnN0cmluZ1xuICAgICovXG4gICAgdmFyIHF1ZXJ5U3RyaW5nID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSxcbiAgICAgICAgcXVlcnkgPSBxdWVyeVN0cmluZy5zcGxpdChcIj1cIilbMV0gKyBcIi5qc29uXCI7XG5cbiAgICBmdW5jdGlvbiBzaG93UHJvZk9wdGlvbnMocHJvZk9wdCwgaW5pdCkge1xuICAgICAgICAvKlxuICAgICAgICBBcHBlbmQgdGhlIHByb2Zlc3NvcidzIGNob3NlbiBlcXVhdGlvbnMgdG8gdGhlIGFwcGxpY2F0aW9uXG4gICAgICAgICovXG4gICAgICAgIFxuICAgICAgICB2YXIgc3RyaW5naWZpZWREYXRhID0gSlNPTi5zdHJpbmdpZnkoaW5pdCksXG4gICAgICAgICAgICBvcHQgPSAkKFwiPG9wdGlvbj48L29wdGlvbj5cIikuYXBwZW5kKHByb2ZPcHQubmFtZSk7XG5cbiAgICAgICAgJChvcHQpXG4gICAgICAgICAgICAudmFsKHByb2ZPcHQuZXF1YXRpb24pXG4gICAgICAgICAgICAuYXR0cihcImRhdGEtcHJvZk9wdFwiLCBzdHJpbmdpZmllZERhdGEpO1xuXG4gICAgICAgICQoXCJzZWxlY3RcIilcbiAgICAgICAgICAgIC5hcHBlbmQob3B0KTtcbiAgICB9XG5cbiAgICAvKlxuICAgIExvYWQgdGhlIHByb2Zlc3NvciBjb25maWd1cmF0aW9uIGZpbGVcbiAgICAqL1xuXG4gICAgJC5nZXRKU09OKHF1ZXJ5LCBmdW5jdGlvbiAocmVzdWx0KSB7XG5cbiAgICAgICAgd2luZG93LnByb2Zlc3NvckNvbmZpZ0ZpbGUgPSByZXN1bHQ7XG5cbiAgICAgICAgJC5lYWNoKHJlc3VsdCwgZnVuY3Rpb24gKGksIHByb2ZPcHQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGluaXQgPSB7XG4gICAgICAgICAgICAgICAgZ3JhcGhPcHQ6IHByb2ZPcHRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHNob3dQcm9mT3B0aW9ucyhwcm9mT3B0LCBpbml0KTtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIERpc3BsYXkgdGhlIGRlZmF1bHQgZXF1YXRpb24gdG8gdGhlIGZ1bmN0aW9uIG1hY2hpbmVcbiAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy9pbiBldmVudHMuanNcbiAgICAgICAgICAgICAgICBwbG90R3JhcGguc2V0dXAoaW5pdCwgXCIjZ3JhcGhcIilcbiAgICAgICAgICAgICAgICBjaGFuZ2VQbG90KHByb2ZPcHQuZXF1YXRpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgJChcIiNzdGF0dXMgcFwiKS5hcHBlbmQoXCJBZGQgYSBxdWVyeSBzdHJpbmdcIilcbiAgICB9KTs7XG5cbn0pO1xuIiwidmFyIGVxdVBhcmEgPSAkKFwiI2Z1bmN0aW9uTWFjaGluZSAjZXF1XCIpWzBdLFxuICAgIGFuaUR1cmF0aW9uID0gMjtcblxuZnVuY3Rpb24gcnVuQW5pbWF0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgLypcbiAgICBUaGlzIGlzIGEgZnVuY3Rpb24gZmFjdG9yeSB3aGljaCB3aWxsIGdyYWIgdGhlXG4gICAgbmVjZXNzYXJ5IGRhdGEgYW5kIHRoZW4gcmV0dXJuIHRoZSBmdW5jdGlvbiBwcm9taXNlXG4gICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gYW5pbWF0aW9uKGFuaVNldHRpbmdzKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgZGF0YXBvaW50ID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdLFxuICAgICAgICAgICAgbnVtUGFyYSA9IGRhdGFwb2ludC5lbGVtZW50O1xuXG4gICAgICAgIC8qXG4gICAgICAgIE1ha2UgdGhlIHByb21pc2UgdGhhdCB3aGVuIHRoZSBkeW5hbWljXG4gICAgICAgIGFuaW1hdGlvbiBwYXRoIGlzIGRvbmUgdGhlbiB0aGlzIHByb21pc2UgaXMgZmluaXNoZWRcbiAgICAgICAgKi9cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAkKG51bVBhcmEpXG4gICAgICAgICAgICAgICAgLmh0bWwodmFsdWUpXG4gICAgICAgICAgICAgICAgLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIFwiYW5pbWF0aW9uXCI6IGAke25hbWV9JHthbmlTZXR0aW5ncy5jdXJyZW50Um91bmR9ICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGAsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub25lKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBzdGF0dXNNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAvKlxuICAgIFRoaXMgaXMgYSBmdW5jdGlvbiBmYWN0b3J5IHdoaWNoIHdpbGwgZ3JhYiB0aGVcbiAgICBuZWNlc3NhcnkgZGF0YSBhbmQgdGhlbiByZXR1cm4gdGhlIGZ1bmN0aW9uIHByb21pc2VcbiAgICAqL1xuICAgIHZhciBzdGF0dXNCYXIgPSAkKFwiI3N0YXR1cyBwXCIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhbmlTZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgIHN0YXR1c0Jhci5odG1sKG1lc3NhZ2UpO1xuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZVhFcXUoYW5pU2V0dGluZ3MpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qXG4gICAgUmVwbGFjZSB0aGUgeCBpbiB0aGUgZGlzYXBwZWFyZWQgZXF1YXRpb24gd2l0aG91dCBoYXZpbmcgdGhlIHkgZGlzYXBwZWFyLlxuICAgICovXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICQoZXF1UGFyYSlcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJhdGlvbn1zIGVhc2UtaW4tb3V0YClcbiAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2hvd0V2YWx1YXRlRXF1KGFuaVNldHRpbmdzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKlxuICAgIEdldCB0aGUgeSBhbnN3ZXIgYW5kIHRoZSB4LWNoYW5nZWQgZXF1YXRpb25cbiAgICAqL1xuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXG4gICAgICAgIGNoYW5nZUVxdSA9IHBvaW50RGF0YS5jaGFuZ2VFcXU7XG5cbiAgICAvKlxuICAgIFNob3cgdGhlIG5ldyBlcXVhdGlvbiB3aXRoIHRoZSByZXBsYWNlZCB4LXZhbHVlIGVxdWF0aW9uXG4gICAgKi9cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAga2F0ZXgucmVuZGVyKGAke2NoYW5nZUVxdX1gLCBlcXVQYXJhKTtcblxuICAgICAgICAkKGVxdVBhcmEpXG4gICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0QXBwZWFyICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGApXG4gICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xuICAgICAgICAgICAgfSlcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2hvd1lBbnMoYW5pU2V0dGluZ3MpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qXG4gICAgR2V0IHRoZSBjdXJyZW50IHJvdW5kIGFuZCBjdXJyZW50IGRhdGEgcG9pbnRzXG4gICAgKi9cbiAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xuXG4gICAgLypcbiAgICBBbmltYXRlIHRoZSBuZXcgeSB2YWx1ZSB0byB0aGUgY29vcmRpbmF0ZWQgeSBjb2x1bW4gYW5kIG9uY2VcbiAgICBhbmltYXRpb24gaXMgZG9uZSB0aGVuIHJldHVybiB0aGUgcHJvbWlzZVxuICAgICovXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICQoZXF1UGFyYSlcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJhdGlvbn1zIGVhc2UtaW4tb3V0YClcbiAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAwKTtcbiAgICAgICAgICAgICAgICBrYXRleC5yZW5kZXIoYCR7cG9pbnREYXRhLnl9YCwgZXF1UGFyYSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuLypcblNob3cgdGhlIGNob3NlbiBlcXVhdGlvbiB0byBncmFwaFxuKi9cbmZ1bmN0aW9uIHNob3dFcXVhdGlvbkFnYWluKGFuaVNldHRpbmdzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICQoZXF1UGFyYSlcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHRBcHBlYXIgJHthbmlEdXJhdGlvbn1zIGVhc2UtaW4tb3V0YClcbiAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuLypcbk9uY2UgdGhlIHktdmFsdWUgYXBwZWFycyBpbiB0aGUgY29ycmVjdCB5LWNvbHVtbiB0aGVuIGZ1bGZpbGwgdGhlIHByb21pc2UuXG4qL1xuZnVuY3Rpb24gcGxhY2VZVmFsdWUoYW5pU2V0dGluZ3MpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB2YXIgaW5wdXQgPSAkKGB0ZCN5dmFsJHtwb2ludERhdGEuaWQgKyAxfWApWzBdO1xuICAgICAgICAkKGlucHV0KS5odG1sKFwiXCIpO1xuICAgICAgICAkKGlucHV0KS5hcHBlbmQoYDxwPiR7cG9pbnREYXRhLnl9PC9wPmApO1xuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcbiAgICB9KTtcbn1cblxuLypcbk9uY2UgdGhlIGVxdWF0aW9uIGlzIGNsZWFyZWQgYW5kIHJlc2V0IHRvIHRoZSBkZWZhdWx0IGVxdWF0aW9uXG50aGVuIGZ1bGZpbGwgdGhlIHByb21pc2VcbiovXG5mdW5jdGlvbiByZXNldFJvdW5kKGFuaVNldHRpbmdzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgJChlcXVQYXJhKVxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dERpc2FwcGVhciAke2FuaUR1cmF0aW9ufXMgZWFzZS1pbi1vdXRgKVxuICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAwKTtcbiAgICAgICAgICAgICAgICBrYXRleC5yZW5kZXIoYCR7cHJvZk9wdC5lcXVhdGlvbn1gLCBlcXVQYXJhKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vKlxuUmV0dXJuIHRvIGRlZmF1bHQgYmVnaW5uaW5nIGVxdWF0aW9uIGZvciB0aGUgbmV4dCBhbmltYXRpb24gb3IgZm9yIHRoZSBlbmRcbiovXG5mdW5jdGlvbiBzaG93RGVmYXVsdEVxdShhbmlTZXR0aW5ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAkKGVxdVBhcmEpXG4gICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0QXBwZWFyICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGApXG4gICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbi8qXG5BY2NlcHQgdGhlIGRhdGFwb2ludCBhbmQgaXRzIGl0ZXJhdG9yIGFuZCBwbG90IHRoYXQgcG9pbnQgYmVpbmcgcGFzc2VkIHRocm91Z2hcbiovXG5mdW5jdGlvbiBwbG90dGVyKGFuaVNldHRpbmdzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICBwbG90R3JhcGgudXBkYXRlKGFuaVNldHRpbmdzLCBhbmlTZXR0aW5ncy5ncmFwaE9wdC5jYWxsYmFjayk7XG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xuICAgIH0pO1xufVxuXG4vKlxuVGhpcyBmdW5jdGlvbiBhY3RzIGFzIGFuIGl0ZXJhdG9yIHNvIHRoYXQgdGhlIHByb21pc2UgY2hhaW4ga25vd3Mgd2hpY2hcbmRhdGFwb2ludCB0byBoYW5kbGUgYW5kIHRvIGFuaW1hdGVcbiovXG5mdW5jdGlvbiB1cGRhdGVSb3VuZChhbmlTZXR0aW5ncykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHBsYWNlaG9sZGVyID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIGFuaVNldHRpbmdzLmN1cnJlbnRSb3VuZCArPSAxO1xuICAgICAgICBwbGFjZWhvbGRlci51cGRhdGVQb2ludCA9IGZhbHNlO1xuXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xuICAgIH0pO1xufTtcblxuLypcblR3byBmdW5jdGlvbnMgaW4gb3JkZXIgdG8gcmVwbGFjZSB0aGUgZnVuY3Rpb24gbWFjaGluZSBnaWYgd2l0aCB0aGUgYW5pbWF0ZWRcbmdpZiBhbmQgYmFja3dhcmRzLlxuKi9cbmZ1bmN0aW9uIGFuaW1hdGVGdW5jTWFjaGluZShhbmlTZXR0aW5ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAkKFwiI2Z1bmN0aW9uTWFjaGluZVwiKS5jc3Moe1xuICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCI6IFwidXJsKC4uL2ltZy9mdW5jdGlvbk1hY2hpbmVBbmkuZ2lmKVwiXG4gICAgICAgIH0pXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHN0b3BBbmlGdW5jTWFjaGluZShhbmlTZXR0aW5ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAkKFwiI2Z1bmN0aW9uTWFjaGluZVwiKS5jc3Moe1xuICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCI6IFwidXJsKC4uL2ltZy9mdW5jdGlvbk1hY2hpbmVTdGlsbC5naWYpXCJcbiAgICAgICAgfSlcbiAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncylcbiAgICB9KTtcbn1cblxuLypcbkEgZnVuY3Rpb24gdG8gc2hvdyB0aGUgeSBhbnN3ZXIgbGVhdmluZyB0aGUgZnVuY3Rpb24gbWFjaGluZSB0b1xuc3RhcnQgdGhlIG5leHQgYW5pbWF0aW9uIG9mIGdvaW5nIGJhY2sgdG8gdGhlIHkgY29sdW1uLlxuKi9cbmZ1bmN0aW9uIG1pbmlBbmkoYW5pU2V0dGluZ3MpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblxuICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXG4gICAgICAgICAgICB5dmFsdWUgPSBwbGFjZWhvbGRlci55LFxuICAgICAgICAgICAgcGFyYSA9ICQoYDxwPiR7eXZhbHVlfTwvcD5gKTtcblxuICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQocGFyYSk7XG5cbiAgICAgICAgcGFyYVxuICAgICAgICAgICAgLmNzcyh7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDU1MCxcbiAgICAgICAgICAgICAgICB0b3A6IDUwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgdG9wOiAxMDBcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcGFyYS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbi8qXG5BIHByb21pc2UgY2hhaW4gdG8gcnVuIHRocm91Z2ggdGhlIHdob2xlIGFuaW1hdGlvbiBwcm9jZXNzXG5cbk5PVEVcbkEgcHJvbWlzZSBjaGFpbiBoYXMgYmVlbiB1dGl6aWxlZCBpbiBvcmRlciB0byBlYXNpbHkgcGx1Z2luXG5leHRyYSBmdW5jdGlvbnMgdGhhdCB3b3VsZCBiZSBncmVhdCB0byBoYXZlIGluIHRoZSBhbmltYXRpb25cbnByb2Nlc3MuICBBIHByb21pc2UgY2hhaW4gaGFzIGFsc28gYmVlbiB1c2VkIGluIG9yZGVyIHRvIHdhaXRcbmZvciBhIGFuaW1hdGlvbiB0byBlbmQgdG8gc3RhcnQgdGhlIG5leHQgYW5pbWF0aW9uLlxuKi9cblxuZnVuY3Rpb24gYW5pUHJvbWlzZUNoYWluKGRwcywgY2hhaW4pIHtcblxuICAgIHBsb3RHcmFwaC5zZXR1cChkcHMsIFwiI2dyYXBoXCIpO1xuXG4gICAgZHBzLmRhdGFwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoZGF0YXBvaW50KSB7XG4gICAgICAgIGlmIChkYXRhcG9pbnQudXBkYXRlUG9pbnQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNoYWluID0gY2hhaW5cbiAgICAgICAgICAgICAgICAudGhlbihydW5BbmltYXRpb24oXCJ4VG9NYWNoaW5lXCIsIGRhdGFwb2ludC54KSlcbiAgICAgICAgICAgICAgICAudGhlbihhbmltYXRlRnVuY01hY2hpbmUpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShcIkNhbGN1bGF0aW5nXCIpKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcGxhY2VYRXF1KVxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dFdmFsdWF0ZUVxdSlcbiAgICAgICAgICAgICAgICAudGhlbihzaG93WUFucylcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RXF1YXRpb25BZ2FpbilcbiAgICAgICAgICAgICAgICAudGhlbihzdG9wQW5pRnVuY01hY2hpbmUpXG4gICAgICAgICAgICAgICAgLnRoZW4obWluaUFuaSlcbiAgICAgICAgICAgICAgICAudGhlbihydW5BbmltYXRpb24oXCJtYWNoaW5lVG9ZXCIsIGRhdGFwb2ludC55KSlcbiAgICAgICAgICAgICAgICAudGhlbihwbGFjZVlWYWx1ZSlcbiAgICAgICAgICAgICAgICAudGhlbihydW5BbmltYXRpb24oXCJ5VG9TdGF0dXNCYXJcIiwgYCgke2RhdGFwb2ludC54fSwke2RhdGFwb2ludC55fSlgKSlcbiAgICAgICAgICAgICAgICAudGhlbihzdGF0dXNNZXNzYWdlKGBQbG90dGluZyAoJHtkYXRhcG9pbnQueH0sJHtkYXRhcG9pbnQueX0pYCkpXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxvdHRlcilcbiAgICAgICAgICAgICAgICAudGhlbihzdGF0dXNNZXNzYWdlKGBSZXNldHRpbmdgKSlcbiAgICAgICAgICAgICAgICAudGhlbihyZXNldFJvdW5kKVxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoYGApKVxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dEZWZhdWx0RXF1KTtcbiAgICAgICAgfVxuICAgICAgICBjaGFpbiA9IGNoYWluLnRoZW4odXBkYXRlUm91bmQpO1xuICAgIH0pO1xufVxuXG4vKlxuSWYgdGhlIFwiSGlkZSBBbmltYXRpb25cIiBjaGVja2JveCBpcyBjaGVja2VkIHRoZW4gc2tpcCB0aGUgd2hvbGUgYW5pbWF0aW9uXG5wcm9taXNlIGNoYWluIGFuZCBqdXN0IGFwcGVuZCB0aGUgeSB2YWx1ZXNcbiovXG5mdW5jdGlvbiBhbmltYXRlSGlkZShkcHMsIGNoYWluKSB7XG5cbiAgICBwbG90R3JhcGguc2V0dXAoZHBzLCBcIiNncmFwaFwiKTtcblxuICAgIGRwcy5kYXRhcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGRhdGFwb2ludCkge1xuICAgICAgICBpZiAoZGF0YXBvaW50LnVwZGF0ZVBvaW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjaGFpbiA9IGNoYWluXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxhY2VZVmFsdWUpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgUGxvdHRpbmcgKCR7ZGF0YXBvaW50Lnh9LCR7ZGF0YXBvaW50Lnl9KWApKVxuICAgICAgICAgICAgICAgIC50aGVuKHBsb3R0ZXIpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgUmVzZXR0aW5nYCkpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzZXRSb3VuZClcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RGVmYXVsdEVxdSk7XG4gICAgICAgIH1cbiAgICAgICAgY2hhaW4gPSBjaGFpbi50aGVuKHVwZGF0ZVJvdW5kKTtcbiAgICB9KTtcbn1cblxuLypcbklmIG5vIGdyYXBoIGlzIGNoZWNrZWQsIHRoZW4gZG8gbm90IGluY2x1ZGUgdGhlIGdyYXBoIHBsb3R0aW5nIGluIHRoZVxuYW5pbWF0aW9uXG4qL1xuXG5mdW5jdGlvbiBub0dyYXBoKGRwcywgY2hhaW4pIHtcblxuICAgIGRwcy5kYXRhcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGRhdGFwb2ludCkge1xuICAgICAgICBpZiAoZGF0YXBvaW50LnVwZGF0ZVBvaW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjaGFpbiA9IGNoYWluXG4gICAgICAgICAgICAgICAgLnRoZW4ocnVuQW5pbWF0aW9uKFwieFRvTWFjaGluZVwiLCBkYXRhcG9pbnQueCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oYW5pbWF0ZUZ1bmNNYWNoaW5lKVxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoXCJDYWxjdWxhdGluZ1wiKSlcbiAgICAgICAgICAgICAgICAudGhlbihyZXBsYWNlWEVxdSlcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RXZhbHVhdGVFcXUpXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd1lBbnMpXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd0VxdWF0aW9uQWdhaW4pXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RvcEFuaUZ1bmNNYWNoaW5lKVxuICAgICAgICAgICAgICAgIC50aGVuKG1pbmlBbmkpXG4gICAgICAgICAgICAgICAgLnRoZW4ocnVuQW5pbWF0aW9uKFwibWFjaGluZVRvWVwiLCBkYXRhcG9pbnQueSkpXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxhY2VZVmFsdWUpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgUmVzZXR0aW5nYCkpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzZXRSb3VuZClcbiAgICAgICAgICAgICAgICAudGhlbihzdGF0dXNNZXNzYWdlKGBgKSlcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RGVmYXVsdEVxdSk7XG4gICAgICAgIH1cbiAgICAgICAgY2hhaW4gPSBjaGFpbi50aGVuKHVwZGF0ZVJvdW5kKTtcbiAgICB9KTtcbn1cblxuLypcbklmIG5vIGdyYXBoIGFuZCBubyBhbmltYXRpb24gY2hlY2tib3hlcyBhcmUgY2hlY2tlZCwgdGhlbiBqdXN0IHBsYWNlIHRoZSBZIHZhbHVlc1xuZm9yIHRoZSBncmFwaC5cbiovXG5cblxuZnVuY3Rpb24gc29sdmVGb3JZKGRwcywgY2hhaW4pIHtcblxuICAgIGRwcy5kYXRhcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGRhdGFwb2ludCkge1xuICAgICAgICBpZiAoZGF0YXBvaW50LnVwZGF0ZVBvaW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjaGFpbiA9IGNoYWluXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxhY2VZVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNoYWluID0gY2hhaW4udGhlbih1cGRhdGVSb3VuZCk7XG4gICAgfSk7XG59XG5cbi8qXG5IYW5kbGUgYWxsIENTUyBhbmltYXRpb25zIGJ5IGNyZWF0aW5nIGEgUHJvbWlzZSBjaGFpbiB0aHJvdWdoIGEgZm9yIGxvb3AuXG4qL1xuZnVuY3Rpb24gYW5pbWF0b3JDb250cm9sKGRwcykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIG51bUNvbnRhaW5lciA9ICQoXCIjbnVtQ29udGFpbmVyXCIpLFxuICAgICAgICBjaGFpbiA9IFByb21pc2UucmVzb2x2ZShkcHMpO1xuXG4gICAgbnVtQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICBpZiAoZHBzLmdyYXBoT3B0LmdyYXBoSGlkZSAmJiBkcHMuZ3JhcGhPcHQuYW5pbWF0ZUhpZGUpIHtcbiAgICAgICAgc29sdmVGb3JZKGRwcywgY2hhaW4pO1xuICAgIH0gZWxzZSBpZiAoZHBzLmdyYXBoT3B0LmFuaW1hdGVIaWRlKSB7XG4gICAgICAgIGFuaW1hdGVIaWRlKGRwcywgY2hhaW4pO1xuICAgIH0gZWxzZSBpZiAoZHBzLmdyYXBoT3B0LmdyYXBoSGlkZSkge1xuICAgICAgICBub0dyYXBoKGRwcywgY2hhaW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGFuaVByb21pc2VDaGFpbihkcHMsIGNoYWluKTtcbiAgICB9XG5cbn1cbiIsIi8qXG5TZXQgdXAgdGhlIGJhc2ljIHZhcmlhYmxlcy5cbiovXG52YXIgeE1lbW9yeSA9IFtdLFxuICAgIGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFt0eXBlPSdudW1iZXInXVwiKSxcbiAgICBpbnB1dENvdW50ID0gaW5wdXRzLmxlbmd0aCxcbiAgICBydW4gPSB0cnVlO1xuXG4vKlxuQXR0YWNoIGFuIG9uaW5wdXQgZXZlbnQgdG8gYWxsIHRoZSBpbnB1dCBib3hlcyBpbiBvcmRlciB0byB2YWxpZGF0ZSB0aGVtIHdpdGhpbiB0aGUgYm91bmRzXG50aGF0IHRoZSBwcm9mZXNzb3IgaGFzIGNob3Nlbi4gIElmIHRoZSBib3VuZHMgYXJlIGV4Y2VlZGVkLCB0aGVuIGRpc2FibGUgdGhlIFwiR28hXCIgYnV0dG9uXG5hbmQgb3V0cHV0IGEgbWVzc2FnZSB0byB0aGUgc3RhdHVzIGJhci5cbiovXG5mb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuXG4gICAgaW5wdXRzW2ldLm9uaW5wdXQgPSBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgIHZhciB4SW5wdXRWYWwgPSBlLnNyY0VsZW1lbnQudmFsdWU7XG4gICAgICAgIGlmIChwcm9mT3B0LnZpZXcueC5taW4gPD0geElucHV0VmFsICYmIHhJbnB1dFZhbCA8PSBwcm9mT3B0LnZpZXcueC5tYXgpIHtcbiAgICAgICAgICAgIHJ1biA9IHRydWU7XG4gICAgICAgICAgICAkKFwiaW5wdXRbdHlwZT0nYnV0dG9uJ11bdmFsdWU9J0dvISddXCIpXG4gICAgICAgICAgICAgICAgLnByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJzb3JcIjogXCJwb2ludGVyXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoXCIjc3RhdHVzIHBcIikuaHRtbChgYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBydW4gPSBmYWxzZTtcbiAgICAgICAgICAgICQoXCJpbnB1dFt0eXBlPSdidXR0b24nXVt2YWx1ZT0nR28hJ11cIilcbiAgICAgICAgICAgICAgICAucHJvcChcImRpc2FibGVkXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIFwiY3Vyc29yXCI6IFwibm90LWFsbG93ZWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJChcIiNzdGF0dXMgcFwiKS5odG1sKGAke3hJbnB1dFZhbH0geC12YWx1ZSBvdXQgb2YgZG9tYWlucy5gKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qXG5EaXBzbGF5IEthdGV4IGVxdWF0aW9uLiBBTFNPIHVzZWQgaW4gYWpheC5qc1xuKi9cbmZ1bmN0aW9uIGNoYW5nZVBsb3QodmFsKSB7XG5cbiAgICB4TWVtb3J5ID0gW107XG5cbiAgICBjbGVhclZhbHVlcygpO1xuXG4gICAgd2luZG93LnByb2ZPcHQgPSBjaGVja0NvbmZpZyh2YWwpO1xuICAgIHZhciB5ID0gYHkgPSBgLFxuICAgICAgICBlcXVhdCA9IGAke3ZhbH1gLFxuICAgICAgICBlcXVQYXJhID0gJChcIiNmdW5jdGlvbk1hY2hpbmUgI2VxdVwiKVswXSxcbiAgICAgICAgeVBhcmEgPSAkKFwiI2Z1bmN0aW9uTWFjaGluZSAjeVwiKTtcblxuICAgICQoZXF1UGFyYSkuZW1wdHkoXCJcIik7XG5cbiAgICBrYXRleC5yZW5kZXIoeSwgeVBhcmFbMF0pO1xuICAgIGthdGV4LnJlbmRlcihlcXVhdCwgZXF1UGFyYSk7XG59XG5cbi8qXG5BbmltYXRpb24gcGF0aCBmb3IgdGhlIHN0YWlyc3RlcFxuKi9cbmZ1bmN0aW9uIHN0YWlyU3RlcChvcHRpb25zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIGhpZ2h3YXlQYXRoID0gMjQ2LjUsXG4gICAgICAgIGxhc3RTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW2RvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aCAtIDFdO1xuICAgIGxhc3RTaGVldC5pbnNlcnRSdWxlKGBAa2V5ZnJhbWVzICR7b3B0aW9ucy5uYW1lfSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCUge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7b3B0aW9ucy5zdGFydFRvcE9mZn1weDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtvcHRpb25zLnN0YXJ0TGVmdE9mZn1weDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMzMlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke29wdGlvbnMuc3RhcnRUb3BPZmZ9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7aGlnaHdheVBhdGh9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDY2JSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtvcHRpb25zLmVuZFRvcE9mZn1weDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtoaWdod2F5UGF0aH1weDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOTAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtvcHRpb25zLmVuZFRvcE9mZn1weDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtvcHRpb25zLmVuZExlZnRPZmZ9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsIGxhc3RTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xufVxuXG4vKlxuQSBzZXQgb2YgZnVuY3Rpb25zIHVzaW5nIHRoZSBzdGFpcnN0ZXAgYW5pbWF0aW9uIHRlbXBsYXRlXG50byBjcmVhdGUgcGF0aHdheXMgd2l0aCBjb29yZGluYXRlIGRhdGFcbiovXG5mdW5jdGlvbiBtYWtlWFRvTWFjaGluZShpbnB1dENvcmRzLCBpbmRleCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHN0YWlyU3RlcCh7XG4gICAgICAgIHN0YXJ0VG9wT2ZmOiBpbnB1dENvcmRzLnRvcCArIDUsXG4gICAgICAgIHN0YXJ0TGVmdE9mZjogaW5wdXRDb3Jkcy5sZWZ0ICsgMzAsXG4gICAgICAgIGVuZFRvcE9mZjogNTUsXG4gICAgICAgIGVuZExlZnRPZmY6IDMwMCxcbiAgICAgICAgbmFtZTogYHhUb01hY2hpbmUke2luZGV4fWBcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbWFrZU1hY2hpbmVUb1koaW5wdXRDb3JkcywgaW5kZXgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBzdGFpclN0ZXAoe1xuICAgICAgICBzdGFydFRvcE9mZjogMTAwLFxuICAgICAgICBzdGFydExlZnRPZmY6IDUzMCxcbiAgICAgICAgZW5kVG9wT2ZmOiBpbnB1dENvcmRzLnRvcCArIDUsXG4gICAgICAgIGVuZExlZnRPZmY6IGlucHV0Q29yZHMucmlnaHQgKyA1LFxuICAgICAgICBuYW1lOiBgbWFjaGluZVRvWSR7aW5kZXh9YFxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlWVRvU3RhdHVzQmFyKGlucHV0Q29yZHMsIGluZGV4KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgc3RhaXJTdGVwKHtcbiAgICAgICAgc3RhcnRUb3BPZmY6IGlucHV0Q29yZHMudG9wICsgNSxcbiAgICAgICAgc3RhcnRMZWZ0T2ZmOiBpbnB1dENvcmRzLnJpZ2h0ICsgMTAsXG4gICAgICAgIGVuZFRvcE9mZjogMTUwLFxuICAgICAgICBlbmRMZWZ0T2ZmOiAzMDAsXG4gICAgICAgIG5hbWU6IGB5VG9TdGF0dXNCYXIke2luZGV4fWBcbiAgICB9KTtcbn1cblxuLypcblNldCB1cCB0aGUgeE1lbW9yeSBhcnJheSBhbmQgdGhlIGFuaW1hdGlvbiBwYXRocyBmb3IgZWFjaCBpbnB1dCBib3guXG5cbk5PVEU6IFNldHRpbmcgdXAgdGhlIHhNZW1vcnkgYXJyYXkgYWxzbyBtYWtlcyBpdCBzbyB0aGF0IG5vIGFuaW1hdGlvbnNcbiAgICAgIGFyZSByZXBlYXRlZCBieSBtdWx0aXBsZSBjbGlja3Mgb24gdGhlIFwiR28hXCIgYnV0dG9uLlxuKi9cbmZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRDb3VudDsgaSsrKSB7XG4gICAgeE1lbW9yeVtpXSA9IG51bGw7XG5cbiAgICB2YXIgaW5wdXRDb29yID0gaW5wdXRzW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgbWFrZVhUb01hY2hpbmUoaW5wdXRDb29yLCBpKTtcbiAgICBtYWtlTWFjaGluZVRvWShpbnB1dENvb3IsIGkpO1xuICAgIG1ha2VZVG9TdGF0dXNCYXIoaW5wdXRDb29yLCBpKTtcbiAgICAkKFwiI251bUNvbnRhaW5lclwiKS5hcHBlbmQoJChgPHA+PC9wPmApKTtcbn1cblxuLypcblNldCB1cCB0aGUgb2JqZWN0IHRoYXQgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgcHJvbWlzZSBjaGFpblxuaW4gYW5pbWF0b3Jjb250cm9sLlxuKi9cbmZ1bmN0aW9uIHNldFVwT2JqZWN0KHhpbnB1dHMsIGdyYXBoT3B0LCBhbmlTZXR0aW5ncykge1xuICAgIHhpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICB2YXIgeHZhbHVlID0gJCh0aGlzKS52YWwoKSxcbiAgICAgICAgICAgIHh2YWwsXG4gICAgICAgICAgICByb3VuZGl0O1xuXG4gICAgICAgIGlmICh4dmFsdWUpIHtcbiAgICAgICAgICAgIHh2YWwgPSAreHZhbHVlO1xuICAgICAgICAgICAgcm91bmRpdCA9IHh2YWwudG9GaXhlZChwcm9mT3B0LnJvdW5kaW5nKTtcblxuICAgICAgICAgICAgJCh0aGlzKS52YWwocm91bmRpdCk7XG5cbiAgICAgICAgICAgIGlmIChwcm9mT3B0LnZpZXcueC5taW4gPD0gcm91bmRpdCAmJiByb3VuZGl0IDw9IHByb2ZPcHQudmlldy54Lm1heCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VYID0gZ3JhcGhPcHQuZXF1YXRpb24ucmVwbGFjZShcInhcIiwgYCgke3JvdW5kaXR9KWApLFxuICAgICAgICAgICAgICAgICAgICB5dmFsID0gbWF0aC5ldmFsKHJlcGxhY2VYKSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRDb29yID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiByb3VuZGl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogeXZhbC50b0ZpeGVkKHByb2ZPcHQucm91bmRpbmcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VFcXU6IHByb2ZPcHQuZXF1YXRpb24ucmVwbGFjZShcInhcIiwgYCgke3JvdW5kaXR9KWApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUG9pbnQ6IHhNZW1vcnlbaV0gIT09IHJvdW5kaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiAkKFwiI251bUNvbnRhaW5lciBwXCIpLmdldChpKVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBDbGVhciBvdXQgdGhlIFlzIHdoZW4gdGhleSBkb24ndCBlcXVhbCBlYWNoIG90aGVyIGFuZCBuZWVkIHRvIGJlIHVwZGF0ZWRcbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC51cGRhdGVQb2ludCkge1xuICAgICAgICAgICAgICAgICAgICAkKGB0ZCN5dmFsJHtpICsgMX1gKS5odG1sKFwiXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qVXBkYXRlIHRoZSB4bWVtb3J5Ki9cbiAgICAgICAgICAgICAgICB4TWVtb3J5W2ldID0gcm91bmRpdDtcbiAgICAgICAgICAgICAgICBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzLnB1c2gocG9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qXG5TZXQgYWxsIHRoZSBkYXRhIHRoYXQgd2lsbCBiZSBzZXQgdG8gYW5pU2V0dGluZ3MgaW4gdGhlIHNldFVwT2JqZWN0IGZ1bmN0aW9uXG5cbk5PVEVcbmdyYXBoT3B0LmNhbGxiYWNrIHN0aWxsIG5lZWRzIGEgdmlhYmxlIG1ldGhvZCFcbiovXG5mdW5jdGlvbiBzdGFydEZ1bmNNYWNoKCkge1xuXG4gICAgdmFyIHhpbnB1dHMgPSAkKFwiaW5wdXRbdHlwZT0nbnVtYmVyJ11cIiksXG4gICAgICAgIGhpZGVBbmltYXRpb25DaGVja2VkID0gJChcIiNhbmltYXRlOmNoZWNrZWRcIikubGVuZ3RoID4gMCxcbiAgICAgICAgaGlkZUdyYXBoQ2hlY2tlZCA9ICQoXCIjc2hvd0dyYXBoOmNoZWNrZWRcIikubGVuZ3RoID4gMCxcbiAgICAgICAgZ3JhcGhPcHQgPSB7XG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGFuaVNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXS51cGRhdGVQb2ludCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbmltYXRlSGlkZTogaGlkZUFuaW1hdGlvbkNoZWNrZWQsXG4gICAgICAgICAgICBncmFwaEhpZGU6IGhpZGVHcmFwaENoZWNrZWQsXG4gICAgICAgICAgICBlcXVhdGlvbjogcHJvZk9wdC5lcXVhdGlvbixcbiAgICAgICAgICAgIHZpZXc6IHByb2ZPcHQudmlld1xuICAgICAgICB9LFxuICAgICAgICBhbmlTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGRhdGFwb2ludHM6IFtdLFxuICAgICAgICAgICAgY3VycmVudFJvdW5kOiAwLFxuICAgICAgICAgICAgZ3JhcGhPcHQ6IGdyYXBoT3B0XG4gICAgICAgIH07XG5cbiAgICBzZXRVcE9iamVjdCh4aW5wdXRzLCBncmFwaE9wdCwgYW5pU2V0dGluZ3MpO1xuXG4gICAgLypTZXQgdXAgdGhlIGdyYXBoKi9cbiAgICAvLyAgICBwbG90R3JhcGguc2V0dXAoYW5pU2V0dGluZ3MsIFwiI2dyYXBoXCIpO1xuXG4gICAgYW5pbWF0b3JDb250cm9sKGFuaVNldHRpbmdzKTtcbn1cblxuLypcbkZ1bmN0aW9uIHRvIHNlbGVjdCB0aGUgY2hvc2VuIGVxdWF0aW9uIHdpdGggaXRzIG5hbWUgYW5kIGdyYXBoIHdpbmRvdyBib3VuZGFyaWVzLlxuKi9cbmZ1bmN0aW9uIGNoZWNrQ29uZmlnKHZhbCkge1xuICAgIHZhciBwcm9mT3B0O1xuICAgICQuZWFjaChwcm9mZXNzb3JDb25maWdGaWxlLCBmdW5jdGlvbiAoaSwgaXRlbSkge1xuICAgICAgICBpZiAoaXRlbS5lcXVhdGlvbiA9PT0gdmFsKSB7XG4gICAgICAgICAgICBwcm9mT3B0ID0gaXRlbTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHByb2ZPcHQ7XG59XG5cbi8qXG5VcG9uIGNob29zaW5nIGFub3RoZXIgZXF1YXRpb24gdG8gZ3JhcGgsIGNsZWFyIGFsbCB0aGUgdmFsdWVzXG4qL1xuZnVuY3Rpb24gY2xlYXJWYWx1ZXMoKSB7XG4gICAgdmFyIHhpbnB1dHMgPSAkKFwiaW5wdXRbdHlwZT0nbnVtYmVyJ11cIiksXG4gICAgICAgIHlpbnB1dHMgPSAkKGB0ciB0ZDpudGgtb2YtdHlwZSgyKWApO1xuXG4gICAgeGlucHV0cy5lYWNoKGZ1bmN0aW9uIChpLCBpdGVtKSB7XG4gICAgICAgIGl0ZW0udmFsdWUgPSBcIlwiO1xuICAgIH0pO1xuXG4gICAgeWlucHV0cy5lYWNoKGZ1bmN0aW9uIChpLCBpdGVtKSB7XG4gICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gXCJcIjtcbiAgICB9KTtcbn1cblxuLypcbk9uY2hhbmdlIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBzZWxlY3QgaHRtbCBlbGVtZW50LlxuKi9cbiQoXCJzZWxlY3RcIikuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHNlbGVjdGVkID0gJChgb3B0aW9uW3ZhbHVlPVwiJHtlLnRhcmdldC52YWx1ZX1cIl1gKSxcbiAgICAgICAgcHJvZk9wdCA9IEpTT04ucGFyc2Uoc2VsZWN0ZWQuYXR0cihcImRhdGEtcHJvZm9wdFwiKSk7XG4gICAgXG4gICAgcGxvdEdyYXBoLnNldHVwKHByb2ZPcHQsIFwiI2dyYXBoXCIpXG4gICAgY2hhbmdlUGxvdChlLnRhcmdldC52YWx1ZSk7XG59KTtcblxuLypcbkRPQ1VNRU5UIGtleWRvd24gZXZlbnQgaGFuZGxlclxuKi9cbiQoZG9jdW1lbnQpLmtleXByZXNzKGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUud2hpY2ggPT0gMTMgJiYgcnVuKSB7XG4gICAgICAgIHN0YXJ0RnVuY01hY2goKTtcbiAgICB9XG59KTtcblxuLypcbkdPISBDbGljayBldmVudCBoYW5kbGVyXG4qL1xuJChcImlucHV0W3R5cGU9J2J1dHRvbiddW3ZhbHVlPSdHbyEnXVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHJ1bikge1xuICAgICAgICBzdGFydEZ1bmNNYWNoKCk7XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
