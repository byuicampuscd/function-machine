"use strict";!function(){for(var t,a,d,p,r=$("tbody"),n=19,e=1;e<=n;e++)p=$("<input>"),t=$("<td></td>"),a=$("<td></td>"),d=$("<tr></tr>"),$(d).attr("id","row"+e),$(p).attr("name","input"+e).attr("type","number"),$(a).attr("id","yval"+e),$(t).append(p),$(d).append(t).append(a),$(r).append(d)}();
"use strict";var plotGraph=function(){function t(t){return function(e){var n=(0).toFixed(2);return function(e){var a=t.x*e;this.textContent="( "+a.toFixed(2)+", "+n+")"}}}function e(t){return function(){var e=t.x,n=t.y;return function(t){this.textContent="( "+e+", "+(n*t).toFixed(2)+")"}}}function n(t){return"graphPoint"+t}function a(t){var e=d3.selectAll(c).append("g").attr("class","point").attr("id",n(t.id));return e.append("circle").attr("r",4).attr("cx",0).attr("cy",0),e.append("text").text("(0, 0)").attr("x",5).attr("y",15),e.attr("transform","translate("+d(0)+" "+l(0)+")"),e}function r(r,i){var o,u,s=r.datapoints[r.currentRound];document.querySelectorAll(c+" .graph .line").length>0;r.datapoints.forEach(function(t){t.updatePoint&&d3.select("#"+n(t.id)).remove()}),r.graphOpt.graphHide?d3.select(c+" .graph .line").attr("display","none"):d3.select(c+" .graph .line").attr("display","inline"),s.updatePoint?(o=a(s),r.graphOpt.animateHide?(o.attr("transform","translate("+d(s.x)+" "+l(s.y)+")"),o.select("text").text("("+s.x+", "+s.y+")"),i(r)):(u=o.transition().duration(1500).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+l(0)+")"),u.select("text").tween("text",t(s)),u.transition().duration(1500).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+l(s.y)+")").each("end",function(){i(r)}).select("text").tween("text",e(s)))):i(r)}function i(t,e){var n=t.graphOpt,a={target:e,data:[{fn:n.equation,skipTip:!0}],xAxis:{domain:[n.view.x.min,n.view.x.max]},yAxis:{domain:[n.view.y.min,n.view.y.max]},disableZoom:!0,grid:!0};o=e,c=o+" .content",u=n.equation,s=functionPlot(a),d=s.meta.xScale,l=s.meta.yScale,d3.selectAll(c+" .point").remove()}var o,c,u,s,d,l;return{update:r,setup:i}}();
"use strict";$(document).ready(function(){function t(t,n){var a=JSON.stringify(n),o=$("<option></option>").append(t.name);$(o).val(t.equation).attr("data-profOpt",a),$("select").append(o)}var n=location.search.substring(1),a=n.split("=")[1]+".json";$.getJSON(a,function(n){window.professorConfigFile=n,$.each(n,function(n,a){var o={graphOpt:a};t(a,o),0===n&&(plotGraph.setup(o,"#graph"),changePlot(a.equation))})}).fail(function(){$("#status p").append("Add a query string")})});
"use strict";function runAnimation(n,t){return function(e){var a=e.datapoints[e.currentRound],i=a.element;return new Promise(function(a){$(i).html(t).css({animation:""+n+e.currentRound+" "+aniDuration+"s ease-in-out"}).one("animationend",function(n){a(e)})})}}function statusMessage(n){var t=$("#status p");return function(e){return new Promise(function(a){t.html(n),a(e)})}}function replaceXEqu(n){return new Promise(function(t){$(equPara).css("animation","textDisappear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",0),t(n)})})}function showEvaluateEqu(n){var t=n.datapoints[n.currentRound],e=t.changeEqu;return new Promise(function(t){katex.render(""+e,equPara),$(equPara).css("animation","textAppear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",1),t(n)})})}function showYAns(n){var t=n.datapoints[n.currentRound];return new Promise(function(e){$(equPara).css("animation","textDisappear "+aniDuration+"s ease-in-out").one("animationend",function(){$(equPara).css("opacity",0),katex.render(""+t.y,equPara),e(n)})})}function showEquationAgain(n){return new Promise(function(t){$(equPara).css("animation","textAppear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",1),t(n)})})}function placeYValue(n){var t=n.datapoints[n.currentRound];return new Promise(function(e){var a=$("td#yval"+(t.id+1))[0];$(a).html(""),$(a).append("<p>"+t.y+"</p>"),e(n)})}function resetRound(n){return new Promise(function(t){$(equPara).css("animation","textDisappear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",0),katex.render(""+profOpt.equation,equPara),t(n)})})}function showDefaultEqu(n){return new Promise(function(t){$(equPara).css("animation","textAppear "+aniDuration+"s ease-in-out").one("animationend",function(e){$(equPara).css("opacity",1),t(n)})})}function plotter(n){n.datapoints[n.currentRound];return new Promise(function(t){plotGraph.update(n,n.graphOpt.callback),t(n)})}function updateRound(n){var t=n.datapoints[n.currentRound];return new Promise(function(e){n.currentRound+=1,t.updatePoint=!1,e(n)})}function animateFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(../img/functionMachineAni.gif)"}),t(n)})}function stopAniFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(../img/functionMachineStill.gif)"}),t(n)})}function miniAni(n){return new Promise(function(t){var e=n.datapoints[n.currentRound],a=e.y,i=$("<p>"+a+"</p>");$("body").append(i),i.css({position:"absolute",opacity:0,left:550,top:50}).animate({opacity:1,top:100},function(e){i.css({display:"none"}),t(n)})})}function aniPromiseChain(n,t){plotGraph.setup(n,"#graph"),n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(runAnimation("xToMachine",n.x)).then(animateFuncMachine).then(statusMessage("Calculating")).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(showEquationAgain).then(stopAniFuncMachine).then(miniAni).then(runAnimation("machineToY",n.y)).then(placeYValue).then(runAnimation("yToStatusBar","("+n.x+","+n.y+")")).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter).then(statusMessage("Resetting")).then(resetRound).then(statusMessage("")).then(showDefaultEqu)),t=t.then(updateRound)})}function animateHide(n,t){plotGraph.setup(n,"#graph"),n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(placeYValue).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter).then(statusMessage("Resetting")).then(resetRound).then(showDefaultEqu)),t=t.then(updateRound)})}function noGraph(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(runAnimation("xToMachine",n.x)).then(animateFuncMachine).then(statusMessage("Calculating")).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(showEquationAgain).then(stopAniFuncMachine).then(miniAni).then(runAnimation("machineToY",n.y)).then(placeYValue).then(statusMessage("Resetting")).then(resetRound).then(statusMessage("")).then(showDefaultEqu)),t=t.then(updateRound)})}function solveForY(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(placeYValue)),t=t.then(updateRound)})}function animatorControl(n){var t=$("#numContainer"),e=Promise.resolve(n);t.innerHTML="",n.graphOpt.graphHide&&n.graphOpt.animateHide?solveForY(n,e):n.graphOpt.animateHide?animateHide(n,e):n.graphOpt.graphHide?noGraph(n,e):aniPromiseChain(n,e)}var equPara=$("#functionMachine #equ")[0],aniDuration=2;
"use strict";function changePlot(t){xMemory=[],clearValues(),window.profOpt=checkConfig(t);var e="y = ",n=""+t,o=$("#functionMachine #equ")[0],a=$("#functionMachine #y");$(o).empty(""),katex.render(e,a[0]),katex.render(n,o)}function stairStep(t){var e=246.5,n=document.styleSheets[document.styleSheets.length-1];n.insertRule("@keyframes "+t.name+" {\n                            0% {\n                                opacity: 1;\n                                top: "+t.startTopOff+"px;\n                                left: "+t.startLeftOff+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+t.startTopOff+"px;\n                                left: "+e+"px;\n                            }\n                            66% {\n                                top: "+t.endTopOff+"px;\n                                left: "+e+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+t.endTopOff+"px;\n                                left: "+t.endLeftOff+"px;\n                            }\n                        }",n.cssRules.length)}function makeXToMachine(t,e){stairStep({startTopOff:t.top+5,startLeftOff:t.left+30,endTopOff:55,endLeftOff:300,name:"xToMachine"+e})}function makeMachineToY(t,e){stairStep({startTopOff:100,startLeftOff:530,endTopOff:t.top+5,endLeftOff:t.right+5,name:"machineToY"+e})}function makeYToStatusBar(t,e){stairStep({startTopOff:t.top+5,startLeftOff:t.right+10,endTopOff:150,endLeftOff:300,name:"yToStatusBar"+e})}function setUpObject(t,e,n){t.each(function(t){var o,a,i=$(this).val();if(i&&(o=+i,a=o.toFixed(profOpt.rounding),$(this).val(a),profOpt.view.x.min<=a&&a<=profOpt.view.x.max)){var p=e.equation.replace("x","("+a+")"),r=math.eval(p),u=(this.getBoundingClientRect(),{x:a,y:r.toFixed(profOpt.rounding),id:t,changeEqu:profOpt.equation.replace("x","("+a+")"),updatePoint:xMemory[t]!==a,element:$("#numContainer p").get(t)});u.updatePoint&&$("td#yval"+(t+1)).html(""),xMemory[t]=a,n.datapoints.push(u)}})}function startFuncMach(){var t=$("input[type='number']"),e=$("#animate:checked").length>0,n=$("#showGraph:checked").length>0,o={callback:function(t){return new Promise(function(e){t.datapoints[t.currentRound].updatePoint=!1,e(t)})},animateHide:e,graphHide:n,equation:profOpt.equation,view:profOpt.view},a={datapoints:[],currentRound:0,graphOpt:o};setUpObject(t,o,a),animatorControl(a)}function checkConfig(t){var e;return $.each(professorConfigFile,function(n,o){o.equation===t&&(e=o)}),e}function clearValues(){var t=$("input[type='number']"),e=$("tr td:nth-of-type(2)");t.each(function(t,e){e.value=""}),e.each(function(t,e){e.innerHTML=""})}for(var xMemory=[],inputs=document.querySelectorAll("input[type='number']"),inputCount=inputs.length,run=!0,i=0;i<inputs.length;i++)inputs[i].oninput=function(t){var e=t.srcElement.value;profOpt.view.x.min<=e&&e<=profOpt.view.x.max?(run=!0,$("input[type='button'][value='Go!']").prop("disabled",!1).css({cursor:"pointer"}),$("#status p").html("")):(run=!1,$("input[type='button'][value='Go!']").prop("disabled",!0).css({cursor:"not-allowed"}),$("#status p").html(e+" x-value out of domains."))};for(var i=0;i<inputCount;i++){xMemory[i]=null;var inputCoor=inputs[i].getBoundingClientRect();makeXToMachine(inputCoor,i),makeMachineToY(inputCoor,i),makeYToStatusBar(inputCoor,i),$("#numContainer").append($("<p></p>"))}$("select").change(function(t){var e=$('option[value="'+t.target.value+'"]'),n=JSON.parse(e.attr("data-profopt"));plotGraph.setup(n,"#graph"),changePlot(t.target.value)}),"checked"===$("input#showGraph[type='checkbox']").attr("checked")&&$("#graph").hide(),$("input#showGraph[type='checkbox']").click(function(t){var e=t.target.checked;e?$("#graph").hide(1e3):$("#graph").show(1e3)}),$(document).keypress(function(t){13==t.which&&run&&startFuncMach()}),$("input[type='button'][value='Go!']").click(function(){run&&startFuncMach()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbG90R3JhcGguanMiLCJhamF4LmpzIiwiYW5pbWF0b3Jjb250cm9sLmpzIiwiZXZlbnRzLmpzIl0sIm5hbWVzIjpbInRkMSIsInRkMiIsInRyIiwiaW5wdXQiLCJ0Ym9keSIsIiQiLCJyb3dDb3VudCIsImoiLCJhdHRyIiwiYXBwZW5kIiwicGxvdEdyYXBoIiwidXBkYXRlVGV4dFgiLCJjdXJyZW50UG9pbnQiLCJkIiwiemVybyIsInRvRml4ZWQiLCJ0IiwibG9jYXRpb24iLCJ4IiwidGhpcyIsInRleHRDb250ZW50IiwidXBkYXRlVGV4dFkiLCJ4Um91bmRlZCIsInlWYWwiLCJ5IiwibWFrZVBvaW50SWQiLCJudW1JbiIsIm1ha2VQb2ludEdyb3VwIiwicG9pbnRHcm91cCIsImQzIiwic2VsZWN0QWxsIiwiZG90TG9jYXRpb24iLCJpZCIsInRleHQiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJ1cGRhdGUiLCJhbmlPcHRpb25zIiwiY2FsbGJhY2siLCJ0cmFuc2l0aW9uIiwiZGF0YXBvaW50cyIsImN1cnJlbnRSb3VuZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImZvckVhY2giLCJwb2ludCIsInVwZGF0ZVBvaW50Iiwic2VsZWN0IiwicmVtb3ZlIiwiZ3JhcGhPcHQiLCJncmFwaEhpZGUiLCJhbmltYXRlSGlkZSIsImR1cmF0aW9uIiwiZWFzZSIsInR3ZWVuIiwiZWFjaCIsInNldHVwIiwic2VsZWN0b3IiLCJvcHRzSW4iLCJncmFwaE9wdGlvbnMiLCJ0YXJnZXQiLCJkYXRhIiwiZm4iLCJlcXVhdGlvbiIsInNraXBUaXAiLCJ4QXhpcyIsImRvbWFpbiIsInZpZXciLCJtaW4iLCJtYXgiLCJ5QXhpcyIsImRpc2FibGVab29tIiwiZ3JpZCIsImdyYXBoTG9jYXRpb25TZWxlY3RvciIsImN1cnJlbnRFcXVhdGlvbiIsImZ1blBsb3QiLCJmdW5jdGlvblBsb3QiLCJtZXRhIiwicmVhZHkiLCJzaG93UHJvZk9wdGlvbnMiLCJwcm9mT3B0IiwiaW5pdCIsInN0cmluZ2lmaWVkRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvcHQiLCJuYW1lIiwidmFsIiwicXVlcnlTdHJpbmciLCJzZWFyY2giLCJzdWJzdHJpbmciLCJxdWVyeSIsInNwbGl0IiwiZ2V0SlNPTiIsInJlc3VsdCIsIndpbmRvdyIsInByb2Zlc3NvckNvbmZpZ0ZpbGUiLCJpIiwiY2hhbmdlUGxvdCIsImZhaWwiLCJydW5BbmltYXRpb24iLCJ2YWx1ZSIsImFuaVNldHRpbmdzIiwiZGF0YXBvaW50IiwibnVtUGFyYSIsImVsZW1lbnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImh0bWwiLCJjc3MiLCJhbmltYXRpb24iLCJhbmlEdXJhdGlvbiIsIm9uZSIsImUiLCJzdGF0dXNNZXNzYWdlIiwibWVzc2FnZSIsInN0YXR1c0JhciIsInJlcGxhY2VYRXF1IiwiZXF1UGFyYSIsInNob3dFdmFsdWF0ZUVxdSIsInBvaW50RGF0YSIsImNoYW5nZUVxdSIsImthdGV4IiwicmVuZGVyIiwic2hvd1lBbnMiLCJzaG93RXF1YXRpb25BZ2FpbiIsInBsYWNlWVZhbHVlIiwicmVzZXRSb3VuZCIsInNob3dEZWZhdWx0RXF1IiwicGxvdHRlciIsInVwZGF0ZVJvdW5kIiwicGxhY2Vob2xkZXIiLCJhbmltYXRlRnVuY01hY2hpbmUiLCJiYWNrZ3JvdW5kLWltYWdlIiwic3RvcEFuaUZ1bmNNYWNoaW5lIiwibWluaUFuaSIsInl2YWx1ZSIsInBhcmEiLCJwb3NpdGlvbiIsIm9wYWNpdHkiLCJsZWZ0IiwidG9wIiwiYW5pbWF0ZSIsImRpc3BsYXkiLCJhbmlQcm9taXNlQ2hhaW4iLCJkcHMiLCJjaGFpbiIsInRoZW4iLCJub0dyYXBoIiwic29sdmVGb3JZIiwiYW5pbWF0b3JDb250cm9sIiwibnVtQ29udGFpbmVyIiwiaW5uZXJIVE1MIiwieE1lbW9yeSIsImNsZWFyVmFsdWVzIiwiY2hlY2tDb25maWciLCJlcXVhdCIsInlQYXJhIiwiZW1wdHkiLCJzdGFpclN0ZXAiLCJvcHRpb25zIiwiaGlnaHdheVBhdGgiLCJsYXN0U2hlZXQiLCJzdHlsZVNoZWV0cyIsImluc2VydFJ1bGUiLCJzdGFydFRvcE9mZiIsInN0YXJ0TGVmdE9mZiIsImVuZFRvcE9mZiIsImVuZExlZnRPZmYiLCJjc3NSdWxlcyIsIm1ha2VYVG9NYWNoaW5lIiwiaW5wdXRDb3JkcyIsImluZGV4IiwibWFrZU1hY2hpbmVUb1kiLCJyaWdodCIsIm1ha2VZVG9TdGF0dXNCYXIiLCJzZXRVcE9iamVjdCIsInhpbnB1dHMiLCJ4dmFsIiwicm91bmRpdCIsInh2YWx1ZSIsInJvdW5kaW5nIiwicmVwbGFjZVgiLCJyZXBsYWNlIiwieXZhbCIsIm1hdGgiLCJldmFsIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0IiwicHVzaCIsInN0YXJ0RnVuY01hY2giLCJoaWRlQW5pbWF0aW9uQ2hlY2tlZCIsImhpZGVHcmFwaENoZWNrZWQiLCJpdGVtIiwieWlucHV0cyIsImlucHV0cyIsImlucHV0Q291bnQiLCJydW4iLCJvbmlucHV0IiwieElucHV0VmFsIiwic3JjRWxlbWVudCIsInByb3AiLCJjdXJzb3IiLCJpbnB1dENvb3IiLCJjaGFuZ2UiLCJzZWxlY3RlZCIsInBhcnNlIiwiaGlkZSIsImNsaWNrIiwiY2hlY2tlZCIsInNob3ciLCJrZXlwcmVzcyIsIndoaWNoIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUFDLFdBYUcsSUFBSyxHQU5EQSxHQUNBQyxFQUNBQyxFQUNBQyxFQUpBQyxFQUFRQyxFQUFFLFNBS1ZDLEVBQVcsR0FFTkMsRUFBSSxFQUFHQSxHQUFLRCxFQUFVQyxJQUMzQkosRUFBUUUsRUFBRSxXQUNWTCxFQUFNSyxFQUFFLGFBQ1JKLEVBQU1JLEVBQUUsYUFDUkgsRUFBS0csRUFBRSxhQUVQQSxFQUFFSCxHQUFJTSxLQUFLLEtBQVgsTUFBdUJELEdBRXZCRixFQUFFRixHQUFPSyxLQUFLLE9BQWQsUUFBOEJELEdBQUtDLEtBQUssT0FBUSxVQUVoREgsRUFBRUosR0FBS08sS0FBSyxLQUFaLE9BQXlCRCxHQUV6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QUFvQzRNLE1BQU0sU0FBQS9GLEdBQ3hDLEdBQUlnRyxHQUFVaEcsRUFBRXJELE9BQU9xSixPQUNuQkEsR0FDQTdNLEVBQUUsVUFBVTJNLEtBQUssS0FFakIzTSxFQUFFLFVBQVU4TSxLQUFLLE9BT3pCOU0sRUFBRXFDLFVBQVUwSyxTQUFTLFNBQVVsRyxHQUNaLElBQVhBLEVBQUVtRyxPQUFlZixLQUNqQlAsa0JBT1IxTCxFQUFFLHFDQUFxQzRNLE1BQU0sV0FDckNYLEtBQ0FQIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLypcbiAgICBNYWtlIHRoZSB3aG9sZSB0YWJsZSBhbmQgY2VsbHMgZm9yIHRoZSBpbnB1dCBib3hlcyBhbmQgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAqL1xuICAgIHZhciB0Ym9keSA9ICQoXCJ0Ym9keVwiKSxcbiAgICAgICAgdGQxLFxuICAgICAgICB0ZDIsXG4gICAgICAgIHRyLFxuICAgICAgICBpbnB1dCxcbiAgICAgICAgcm93Q291bnQgPSAxOTtcblxuICAgIGZvciAodmFyIGogPSAxOyBqIDw9IHJvd0NvdW50OyBqKyspIHtcbiAgICAgICAgaW5wdXQgPSAkKFwiPGlucHV0PlwiKTtcbiAgICAgICAgdGQxID0gJChcIjx0ZD48L3RkPlwiKTtcbiAgICAgICAgdGQyID0gJChcIjx0ZD48L3RkPlwiKTtcbiAgICAgICAgdHIgPSAkKFwiPHRyPjwvdHI+XCIpO1xuXG4gICAgICAgICQodHIpLmF0dHIoXCJpZFwiLCBgcm93JHtqfWApO1xuXG4gICAgICAgICQoaW5wdXQpLmF0dHIoXCJuYW1lXCIsIGBpbnB1dCR7an1gKS5hdHRyKFwidHlwZVwiLCBcIm51bWJlclwiKTtcblxuICAgICAgICAkKHRkMikuYXR0cihcImlkXCIsIGB5dmFsJHtqfWApO1xuXG4gICAgICAgICQodGQxKS5hcHBlbmQoaW5wdXQpO1xuICAgICAgICAkKHRyKS5hcHBlbmQodGQxKS5hcHBlbmQodGQyKTtcbiAgICAgICAgJCh0Ym9keSkuYXBwZW5kKHRyKTtcbiAgICB9XG59KCkpO1xuIiwiLypqc2xpbnQgcGx1c3BsdXM6IHRydWUsIGJyb3dzZXI6IHRydWUsIGRldmVsOiB0cnVlKi9cbi8qZ2xvYmFsIGQzLCBmdW5jdGlvblBsb3QqL1xudmFyIHBsb3RHcmFwaCA9IChmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIGdyYXBoTG9jYXRpb25TZWxlY3RvcixcbiAgICAgICAgZG90TG9jYXRpb24sXG4gICAgICAgIGN1cnJlbnRFcXVhdGlvbixcbiAgICAgICAgZnVuUGxvdCxcbiAgICAgICAgeFNjYWxlLFxuICAgICAgICB5U2NhbGUsXG4gICAgICAgIGZyZWVJZCA9IDA7XG5cbiAgICAvL3RoZXNlIHR3byBmdW5jdGlvbnMgbWFrZSB0aGUgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgaW4gdGhlIGFuaW1hdGlvbnMgZm9yIHRoZSBwb2ludCBsYWJlbHNcbiAgICBmdW5jdGlvbiB1cGRhdGVUZXh0WChjdXJyZW50UG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICB2YXIgemVybyA9ICgwKS50b0ZpeGVkKDIpO1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBjdXJyZW50UG9pbnQueCAqIHQ7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IFwiKCBcIiArIGxvY2F0aW9uLnRvRml4ZWQoMikgKyBcIiwgXCIgKyB6ZXJvICsgXCIpXCI7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRleHRZKGN1cnJlbnRQb2ludCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgeFJvdW5kZWQgPSBjdXJyZW50UG9pbnQueCxcbiAgICAgICAgICAgICAgICB5VmFsID0gY3VycmVudFBvaW50Lnk7XG5cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dENvbnRlbnQgPSBcIiggXCIgKyB4Um91bmRlZCArIFwiLCBcIiArICh5VmFsICogdCkudG9GaXhlZCgyKSArIFwiKVwiO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlUG9pbnRJZChudW1Jbikge1xuICAgICAgICByZXR1cm4gJ2dyYXBoUG9pbnQnICsgbnVtSW47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZVBvaW50R3JvdXAoY3VycmVudFBvaW50KSB7XG4gICAgICAgIHZhciBwb2ludEdyb3VwID0gZDMuc2VsZWN0QWxsKGRvdExvY2F0aW9uKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BvaW50JylcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIG1ha2VQb2ludElkKGN1cnJlbnRQb2ludC5pZCkpO1xuXG4gICAgICAgIC8vYWRkIHRoZSBjaXJjbGVcbiAgICAgICAgcG9pbnRHcm91cC5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAgICAgICAuYXR0cigncicsIDQpXG4gICAgICAgICAgICAuYXR0cignY3gnLCAwKVxuICAgICAgICAgICAgLmF0dHIoJ2N5JywgMCk7XG5cbiAgICAgICAgLy9hZGQgdGhlIGxhYmVsXG4gICAgICAgIHBvaW50R3JvdXAuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgIC50ZXh0KCcoMCwgMCknKVxuICAgICAgICAgICAgLmF0dHIoJ3gnLCA1KVxuICAgICAgICAgICAgLmF0dHIoJ3knLCAxNSk7XG4gICAgICAgIC8vbW92ZSBpdCB0byAoMCwwKVxuICAgICAgICBwb2ludEdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZSgwKSArICcgJyArIHlTY2FsZSgwKSArICcpJyk7XG4gICAgICAgIHJldHVybiBwb2ludEdyb3VwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZShhbmlPcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgY3VycmVudFBvaW50ID0gYW5pT3B0aW9ucy5kYXRhcG9pbnRzW2FuaU9wdGlvbnMuY3VycmVudFJvdW5kXSxcbiAgICAgICAgICAgIGxpbmVJc1Bsb3R0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGRvdExvY2F0aW9uICsgJyAuZ3JhcGggLmxpbmUnKS5sZW5ndGggPiAwLFxuICAgICAgICAgICAgcG9pbnRHcm91cCxcbiAgICAgICAgICAgIHRyYW5zaXRpb247XG5cbiAgICAgICAgLy9jbGVhciBhbnkgcG9pbnRzIHRoYXQgd2lsbCBnZXQgdXBkYXRlZFxuICAgICAgICBhbmlPcHRpb25zLmRhdGFwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgICAgIGlmIChwb2ludC51cGRhdGVQb2ludCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnIycgKyBtYWtlUG9pbnRJZChwb2ludC5pZCkpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvL2NoZWNrIGlmIHdlIG5lZWQgdG8gaGlkZSBvciBzaG93IHRoZSBwbG90bGluZVxuICAgICAgICBpZiAoYW5pT3B0aW9ucy5ncmFwaE9wdC5ncmFwaEhpZGUpIHtcbiAgICAgICAgICAgIGQzLnNlbGVjdChkb3RMb2NhdGlvbiArICcgLmdyYXBoIC5saW5lJykuYXR0cignZGlzcGxheScsICdub25lJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkMy5zZWxlY3QoZG90TG9jYXRpb24gKyAnIC5ncmFwaCAubGluZScpLmF0dHIoJ2Rpc3BsYXknLCAnaW5saW5lJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2RvZXMgdGhlIGN1cnJlbnRSb3VuZCBuZWVkIHRvIGJlIHVwZGF0ZWRlZD9cbiAgICAgICAgaWYgKCFjdXJyZW50UG9pbnQudXBkYXRlUG9pbnQpIHtcbiAgICAgICAgICAgIC8vbm90aGl0bmcgdG8gc2VlIGhlcmUganVzdCBrZWVwIG9uIG1vdmluZ1xuICAgICAgICAgICAgY2FsbGJhY2soYW5pT3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL2RyYXcgcG9pbnRcbiAgICAgICAgICAgIHBvaW50R3JvdXAgPSBtYWtlUG9pbnRHcm91cChjdXJyZW50UG9pbnQpO1xuXG4gICAgICAgICAgICAvL2lzIGFuaW1hdGlvbiBvbj9cbiAgICAgICAgICAgIGlmIChhbmlPcHRpb25zLmdyYXBoT3B0LmFuaW1hdGVIaWRlKSB7XG4gICAgICAgICAgICAgICAgLy9tb3ZlIGl0IGludG8gcGxhY2Ugd2l0aG91dCBhbmltYXRpb25cbiAgICAgICAgICAgICAgICBwb2ludEdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZShjdXJyZW50UG9pbnQueCkgKyAnICcgKyB5U2NhbGUoY3VycmVudFBvaW50LnkpICsgJyknKTtcbiAgICAgICAgICAgICAgICAvL3VwZGF0ZSB0aGUgbGFibGVcbiAgICAgICAgICAgICAgICBwb2ludEdyb3VwLnNlbGVjdCgndGV4dCcpLnRleHQoJygnICsgY3VycmVudFBvaW50LnggKyAnLCAnICsgY3VycmVudFBvaW50LnkgKyAnKScpO1xuICAgICAgICAgICAgICAgIC8vY2FsbCBjYWxsYmFja1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFuaU9wdGlvbnMpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vZHJhdyBwb2ludCB3aXRoIGFuaW1haW9uXG4gICAgICAgICAgICAgICAgLy9GaXJzdCB0cmFuc2l0aW9uIC0gbW92ZSB0aGUgZ3JvdXAgaW4gdGhlIFhcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uID0gcG9pbnRHcm91cFxuICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbigxNTAwKVxuICAgICAgICAgICAgICAgICAgICAuZWFzZSgnY3ViaWMtb3V0JylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZShjdXJyZW50UG9pbnQueCkgKyAnICcgKyB5U2NhbGUoMCkgKyAnKScpO1xuICAgICAgICAgICAgICAgIC8vc3ViIHRyYW5zaXRpb24gLSB1cGRhdGUgdGhlIGxhYmVsXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5zZWxlY3QoJ3RleHQnKS50d2VlbigndGV4dCcsIHVwZGF0ZVRleHRYKGN1cnJlbnRQb2ludCkpO1xuXG4gICAgICAgICAgICAgICAgLy9TZWNvbmQgdHJhbnNpdGlvbiAtIG1vdmUgdGhlIGdyb3VwIGluIHRoZSBZXG4gICAgICAgICAgICAgICAgLy9zdWIgdHJhbnNpdGlvbiAtIHVwZGF0ZSB0aGUgbGFiZWxcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTUwMClcbiAgICAgICAgICAgICAgICAgICAgLmVhc2UoJ2N1YmljLW91dCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB4U2NhbGUoY3VycmVudFBvaW50LngpICsgJyAnICsgeVNjYWxlKGN1cnJlbnRQb2ludC55KSArICcpJylcbiAgICAgICAgICAgICAgICAgICAgLmVhY2goJ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFuaU9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCd0ZXh0JykudHdlZW4oJ3RleHQnLCB1cGRhdGVUZXh0WShjdXJyZW50UG9pbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldHVwKGFuaU9wdGlvbnMsIHNlbGVjdG9yKSB7XG4gICAgICAgIC8vc3VnYXJcbiAgICAgICAgdmFyIG9wdHNJbiA9IGFuaU9wdGlvbnMuZ3JhcGhPcHQsXG4gICAgICAgICAgICBncmFwaE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBzZWxlY3RvcixcbiAgICAgICAgICAgICAgICBkYXRhOiBbe1xuICAgICAgICAgICAgICAgICAgICBmbjogb3B0c0luLmVxdWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBza2lwVGlwOiB0cnVlXG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgeEF4aXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBbb3B0c0luLnZpZXcueC5taW4sIG9wdHNJbi52aWV3LngubWF4XVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeUF4aXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBbb3B0c0luLnZpZXcueS5taW4sIG9wdHNJbi52aWV3LnkubWF4XVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGlzYWJsZVpvb206IHRydWUsXG4gICAgICAgICAgICAgICAgZ3JpZDogdHJ1ZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3NhdmUgc29tZSB0aGluZ3MgZm9yIGxhdGVyXG4gICAgICAgIGdyYXBoTG9jYXRpb25TZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgICBkb3RMb2NhdGlvbiA9IGdyYXBoTG9jYXRpb25TZWxlY3RvciArICcgLmNvbnRlbnQnO1xuICAgICAgICBjdXJyZW50RXF1YXRpb24gPSBvcHRzSW4uZXF1YXRpb247XG5cbiAgICAgICAgLy9tYWtlIHRoZSBwbG90IGFuZCBzY2FsZXNcbiAgICAgICAgZnVuUGxvdCA9IGZ1bmN0aW9uUGxvdChncmFwaE9wdGlvbnMpO1xuICAgICAgICB4U2NhbGUgPSBmdW5QbG90Lm1ldGEueFNjYWxlO1xuICAgICAgICB5U2NhbGUgPSBmdW5QbG90Lm1ldGEueVNjYWxlO1xuXG4gICAgICAgIC8vY2xlYW4gb3V0IGFueSBvbGQgcG9pbnRzIGZpcnN0XG4gICAgICAgIGQzLnNlbGVjdEFsbChkb3RMb2NhdGlvbiArICcgLnBvaW50JykucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXBkYXRlOiB1cGRhdGUsXG4gICAgICAgIHNldHVwOiBzZXR1cFxuICAgIH07XG59KCkpO1xuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgLypcbiAgICBMb2FkIFF1ZXJ5IHN1YnN0cmluZ1xuICAgICovXG4gICAgdmFyIHF1ZXJ5U3RyaW5nID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSxcbiAgICAgICAgcXVlcnkgPSBxdWVyeVN0cmluZy5zcGxpdChcIj1cIilbMV0gKyBcIi5qc29uXCI7XG5cbiAgICBmdW5jdGlvbiBzaG93UHJvZk9wdGlvbnMocHJvZk9wdCwgaW5pdCkge1xuICAgICAgICAvKlxuICAgICAgICBBcHBlbmQgdGhlIHByb2Zlc3NvcidzIGNob3NlbiBlcXVhdGlvbnMgdG8gdGhlIGFwcGxpY2F0aW9uXG4gICAgICAgICovXG5cbiAgICAgICAgdmFyIHN0cmluZ2lmaWVkRGF0YSA9IEpTT04uc3RyaW5naWZ5KGluaXQpLFxuICAgICAgICAgICAgb3B0ID0gJChcIjxvcHRpb24+PC9vcHRpb24+XCIpLmFwcGVuZChwcm9mT3B0Lm5hbWUpO1xuXG4gICAgICAgICQob3B0KVxuICAgICAgICAgICAgLnZhbChwcm9mT3B0LmVxdWF0aW9uKVxuICAgICAgICAgICAgLmF0dHIoXCJkYXRhLXByb2ZPcHRcIiwgc3RyaW5naWZpZWREYXRhKTtcblxuICAgICAgICAkKFwic2VsZWN0XCIpXG4gICAgICAgICAgICAuYXBwZW5kKG9wdCk7XG4gICAgfVxuXG4gICAgLypcbiAgICBMb2FkIHRoZSBwcm9mZXNzb3IgY29uZmlndXJhdGlvbiBmaWxlXG4gICAgKi9cblxuICAgICQuZ2V0SlNPTihxdWVyeSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuXG4gICAgICAgIHdpbmRvdy5wcm9mZXNzb3JDb25maWdGaWxlID0gcmVzdWx0O1xuXG4gICAgICAgICQuZWFjaChyZXN1bHQsIGZ1bmN0aW9uIChpLCBwcm9mT3B0KSB7XG5cbiAgICAgICAgICAgIHZhciBpbml0ID0ge1xuICAgICAgICAgICAgICAgIGdyYXBoT3B0OiBwcm9mT3B0XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBzaG93UHJvZk9wdGlvbnMocHJvZk9wdCwgaW5pdCk7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBEaXNwbGF5IHRoZSBkZWZhdWx0IGVxdWF0aW9uIHRvIHRoZSBmdW5jdGlvbiBtYWNoaW5lXG4gICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vaW4gZXZlbnRzLmpzXG4gICAgICAgICAgICAgICAgcGxvdEdyYXBoLnNldHVwKGluaXQsIFwiI2dyYXBoXCIpXG4gICAgICAgICAgICAgICAgY2hhbmdlUGxvdChwcm9mT3B0LmVxdWF0aW9uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIjc3RhdHVzIHBcIikuYXBwZW5kKFwiQWRkIGEgcXVlcnkgc3RyaW5nXCIpXG4gICAgfSk7O1xuXG59KTtcbiIsInZhciBlcXVQYXJhID0gJChcIiNmdW5jdGlvbk1hY2hpbmUgI2VxdVwiKVswXSxcbiAgICBhbmlEdXJhdGlvbiA9IDI7XG5cbmZ1bmN0aW9uIHJ1bkFuaW1hdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIC8qXG4gICAgVGhpcyBpcyBhIGZ1bmN0aW9uIGZhY3Rvcnkgd2hpY2ggd2lsbCBncmFiIHRoZVxuICAgIG5lY2Vzc2FyeSBkYXRhIGFuZCB0aGVuIHJldHVybiB0aGUgZnVuY3Rpb24gcHJvbWlzZVxuICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGFuaW1hdGlvbihhbmlTZXR0aW5ncykge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIGRhdGFwb2ludCA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcbiAgICAgICAgICAgIG51bVBhcmEgPSBkYXRhcG9pbnQuZWxlbWVudDtcblxuICAgICAgICAvKlxuICAgICAgICBNYWtlIHRoZSBwcm9taXNlIHRoYXQgd2hlbiB0aGUgZHluYW1pY1xuICAgICAgICBhbmltYXRpb24gcGF0aCBpcyBkb25lIHRoZW4gdGhpcyBwcm9taXNlIGlzIGZpbmlzaGVkXG4gICAgICAgICovXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgJChudW1QYXJhKVxuICAgICAgICAgICAgICAgIC5odG1sKHZhbHVlKVxuICAgICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBcImFuaW1hdGlvblwiOiBgJHtuYW1lfSR7YW5pU2V0dGluZ3MuY3VycmVudFJvdW5kfSAke2FuaUR1cmF0aW9ufXMgZWFzZS1pbi1vdXRgLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uZSgnYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gc3RhdHVzTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgLypcbiAgICBUaGlzIGlzIGEgZnVuY3Rpb24gZmFjdG9yeSB3aGljaCB3aWxsIGdyYWIgdGhlXG4gICAgbmVjZXNzYXJ5IGRhdGEgYW5kIHRoZW4gcmV0dXJuIHRoZSBmdW5jdGlvbiBwcm9taXNlXG4gICAgKi9cbiAgICB2YXIgc3RhdHVzQmFyID0gJChcIiNzdGF0dXMgcFwiKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoYW5pU2V0dGluZ3MpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICBzdGF0dXNCYXIuaHRtbChtZXNzYWdlKTtcbiAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xuICAgICAgICB9KTtcblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VYRXF1KGFuaVNldHRpbmdzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKlxuICAgIFJlcGxhY2UgdGhlIHggaW4gdGhlIGRpc2FwcGVhcmVkIGVxdWF0aW9uIHdpdGhvdXQgaGF2aW5nIHRoZSB5IGRpc2FwcGVhci5cbiAgICAqL1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAkKGVxdVBhcmEpXG4gICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0RGlzYXBwZWFyICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGApXG4gICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDApO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHNob3dFdmFsdWF0ZUVxdShhbmlTZXR0aW5ncykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLypcbiAgICBHZXQgdGhlIHkgYW5zd2VyIGFuZCB0aGUgeC1jaGFuZ2VkIGVxdWF0aW9uXG4gICAgKi9cbiAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdLFxuICAgICAgICBjaGFuZ2VFcXUgPSBwb2ludERhdGEuY2hhbmdlRXF1O1xuXG4gICAgLypcbiAgICBTaG93IHRoZSBuZXcgZXF1YXRpb24gd2l0aCB0aGUgcmVwbGFjZWQgeC12YWx1ZSBlcXVhdGlvblxuICAgICovXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIGthdGV4LnJlbmRlcihgJHtjaGFuZ2VFcXV9YCwgZXF1UGFyYSk7XG5cbiAgICAgICAgJChlcXVQYXJhKVxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cmF0aW9ufXMgZWFzZS1pbi1vdXRgKVxuICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAxKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcbiAgICAgICAgICAgIH0pXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHNob3dZQW5zKGFuaVNldHRpbmdzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKlxuICAgIEdldCB0aGUgY3VycmVudCByb3VuZCBhbmQgY3VycmVudCBkYXRhIHBvaW50c1xuICAgICovXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcblxuICAgIC8qXG4gICAgQW5pbWF0ZSB0aGUgbmV3IHkgdmFsdWUgdG8gdGhlIGNvb3JkaW5hdGVkIHkgY29sdW1uIGFuZCBvbmNlXG4gICAgYW5pbWF0aW9uIGlzIGRvbmUgdGhlbiByZXR1cm4gdGhlIHByb21pc2VcbiAgICAqL1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAkKGVxdVBhcmEpXG4gICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0RGlzYXBwZWFyICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGApXG4gICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XG4gICAgICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke3BvaW50RGF0YS55fWAsIGVxdVBhcmEpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbi8qXG5TaG93IHRoZSBjaG9zZW4gZXF1YXRpb24gdG8gZ3JhcGhcbiovXG5mdW5jdGlvbiBzaG93RXF1YXRpb25BZ2FpbihhbmlTZXR0aW5ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAkKGVxdVBhcmEpXG4gICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0QXBwZWFyICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGApXG4gICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbi8qXG5PbmNlIHRoZSB5LXZhbHVlIGFwcGVhcnMgaW4gdGhlIGNvcnJlY3QgeS1jb2x1bW4gdGhlbiBmdWxmaWxsIHRoZSBwcm9taXNlLlxuKi9cbmZ1bmN0aW9uIHBsYWNlWVZhbHVlKGFuaVNldHRpbmdzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gJChgdGQjeXZhbCR7cG9pbnREYXRhLmlkICsgMX1gKVswXTtcbiAgICAgICAgJChpbnB1dCkuaHRtbChcIlwiKTtcbiAgICAgICAgJChpbnB1dCkuYXBwZW5kKGA8cD4ke3BvaW50RGF0YS55fTwvcD5gKTtcbiAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XG4gICAgfSk7XG59XG5cbi8qXG5PbmNlIHRoZSBlcXVhdGlvbiBpcyBjbGVhcmVkIGFuZCByZXNldCB0byB0aGUgZGVmYXVsdCBlcXVhdGlvblxudGhlbiBmdWxmaWxsIHRoZSBwcm9taXNlXG4qL1xuZnVuY3Rpb24gcmVzZXRSb3VuZChhbmlTZXR0aW5ncykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4vLyAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICQoZXF1UGFyYSlcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJhdGlvbn1zIGVhc2UtaW4tb3V0YClcbiAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XG4gICAgICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke3Byb2ZPcHQuZXF1YXRpb259YCwgZXF1UGFyYSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuLypcblJldHVybiB0byBkZWZhdWx0IGJlZ2lubmluZyBlcXVhdGlvbiBmb3IgdGhlIG5leHQgYW5pbWF0aW9uIG9yIGZvciB0aGUgZW5kXG4qL1xuZnVuY3Rpb24gc2hvd0RlZmF1bHRFcXUoYW5pU2V0dGluZ3MpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgJChlcXVQYXJhKVxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cmF0aW9ufXMgZWFzZS1pbi1vdXRgKVxuICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAxKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vKlxuQWNjZXB0IHRoZSBkYXRhcG9pbnQgYW5kIGl0cyBpdGVyYXRvciBhbmQgcGxvdCB0aGF0IHBvaW50IGJlaW5nIHBhc3NlZCB0aHJvdWdoXG4qL1xuZnVuY3Rpb24gcGxvdHRlcihhbmlTZXR0aW5ncykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgcGxvdEdyYXBoLnVwZGF0ZShhbmlTZXR0aW5ncywgYW5pU2V0dGluZ3MuZ3JhcGhPcHQuY2FsbGJhY2spO1xuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcbiAgICB9KTtcbn1cblxuLypcblRoaXMgZnVuY3Rpb24gYWN0cyBhcyBhbiBpdGVyYXRvciBzbyB0aGF0IHRoZSBwcm9taXNlIGNoYWluIGtub3dzIHdoaWNoXG5kYXRhcG9pbnQgdG8gaGFuZGxlIGFuZCB0byBhbmltYXRlXG4qL1xuZnVuY3Rpb24gdXBkYXRlUm91bmQoYW5pU2V0dGluZ3MpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBwbGFjZWhvbGRlciA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICBhbmlTZXR0aW5ncy5jdXJyZW50Um91bmQgKz0gMTtcbiAgICAgICAgcGxhY2Vob2xkZXIudXBkYXRlUG9pbnQgPSBmYWxzZTtcblxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcbiAgICB9KTtcbn07XG5cbi8qXG5Ud28gZnVuY3Rpb25zIGluIG9yZGVyIHRvIHJlcGxhY2UgdGhlIGZ1bmN0aW9uIG1hY2hpbmUgZ2lmIHdpdGggdGhlIGFuaW1hdGVkXG5naWYgYW5kIGJhY2t3YXJkcy5cbiovXG5mdW5jdGlvbiBhbmltYXRlRnVuY01hY2hpbmUoYW5pU2V0dGluZ3MpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgJChcIiNmdW5jdGlvbk1hY2hpbmVcIikuY3NzKHtcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiOiBcInVybCguLi9pbWcvZnVuY3Rpb25NYWNoaW5lQW5pLmdpZilcIlxuICAgICAgICB9KVxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzdG9wQW5pRnVuY01hY2hpbmUoYW5pU2V0dGluZ3MpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgJChcIiNmdW5jdGlvbk1hY2hpbmVcIikuY3NzKHtcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiOiBcInVybCguLi9pbWcvZnVuY3Rpb25NYWNoaW5lU3RpbGwuZ2lmKVwiXG4gICAgICAgIH0pXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpXG4gICAgfSk7XG59XG5cbi8qXG5BIGZ1bmN0aW9uIHRvIHNob3cgdGhlIHkgYW5zd2VyIGxlYXZpbmcgdGhlIGZ1bmN0aW9uIG1hY2hpbmUgdG9cbnN0YXJ0IHRoZSBuZXh0IGFuaW1hdGlvbiBvZiBnb2luZyBiYWNrIHRvIHRoZSB5IGNvbHVtbi5cbiovXG5mdW5jdGlvbiBtaW5pQW5pKGFuaVNldHRpbmdzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdLFxuICAgICAgICAgICAgeXZhbHVlID0gcGxhY2Vob2xkZXIueSxcbiAgICAgICAgICAgIHBhcmEgPSAkKGA8cD4ke3l2YWx1ZX08L3A+YCk7XG5cbiAgICAgICAgJChcImJvZHlcIikuYXBwZW5kKHBhcmEpO1xuXG4gICAgICAgIHBhcmFcbiAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiA1NTAsXG4gICAgICAgICAgICAgICAgdG9wOiA1MFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHRvcDogMTAwXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHBhcmEuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vKlxuQSBwcm9taXNlIGNoYWluIHRvIHJ1biB0aHJvdWdoIHRoZSB3aG9sZSBhbmltYXRpb24gcHJvY2Vzc1xuXG5OT1RFXG5BIHByb21pc2UgY2hhaW4gaGFzIGJlZW4gdXRpemlsZWQgaW4gb3JkZXIgdG8gZWFzaWx5IHBsdWdpblxuZXh0cmEgZnVuY3Rpb25zIHRoYXQgd291bGQgYmUgZ3JlYXQgdG8gaGF2ZSBpbiB0aGUgYW5pbWF0aW9uXG5wcm9jZXNzLiAgQSBwcm9taXNlIGNoYWluIGhhcyBhbHNvIGJlZW4gdXNlZCBpbiBvcmRlciB0byB3YWl0XG5mb3IgYSBhbmltYXRpb24gdG8gZW5kIHRvIHN0YXJ0IHRoZSBuZXh0IGFuaW1hdGlvbi5cbiovXG5cbmZ1bmN0aW9uIGFuaVByb21pc2VDaGFpbihkcHMsIGNoYWluKSB7XG5cbiAgICBwbG90R3JhcGguc2V0dXAoZHBzLCBcIiNncmFwaFwiKTtcblxuICAgIGRwcy5kYXRhcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGRhdGFwb2ludCkge1xuICAgICAgICBpZiAoZGF0YXBvaW50LnVwZGF0ZVBvaW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjaGFpbiA9IGNoYWluXG4gICAgICAgICAgICAgICAgLnRoZW4ocnVuQW5pbWF0aW9uKFwieFRvTWFjaGluZVwiLCBkYXRhcG9pbnQueCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oYW5pbWF0ZUZ1bmNNYWNoaW5lKVxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoXCJDYWxjdWxhdGluZ1wiKSlcbiAgICAgICAgICAgICAgICAudGhlbihyZXBsYWNlWEVxdSlcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RXZhbHVhdGVFcXUpXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd1lBbnMpXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd0VxdWF0aW9uQWdhaW4pXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RvcEFuaUZ1bmNNYWNoaW5lKVxuICAgICAgICAgICAgICAgIC50aGVuKG1pbmlBbmkpXG4gICAgICAgICAgICAgICAgLnRoZW4ocnVuQW5pbWF0aW9uKFwibWFjaGluZVRvWVwiLCBkYXRhcG9pbnQueSkpXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxhY2VZVmFsdWUpXG4gICAgICAgICAgICAgICAgLnRoZW4ocnVuQW5pbWF0aW9uKFwieVRvU3RhdHVzQmFyXCIsIGAoJHtkYXRhcG9pbnQueH0sJHtkYXRhcG9pbnQueX0pYCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgUGxvdHRpbmcgKCR7ZGF0YXBvaW50Lnh9LCR7ZGF0YXBvaW50Lnl9KWApKVxuICAgICAgICAgICAgICAgIC50aGVuKHBsb3R0ZXIpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgUmVzZXR0aW5nYCkpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzZXRSb3VuZClcbiAgICAgICAgICAgICAgICAudGhlbihzdGF0dXNNZXNzYWdlKGBgKSlcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RGVmYXVsdEVxdSk7XG4gICAgICAgIH1cbiAgICAgICAgY2hhaW4gPSBjaGFpbi50aGVuKHVwZGF0ZVJvdW5kKTtcbiAgICB9KTtcbn1cblxuLypcbklmIHRoZSBcIkhpZGUgQW5pbWF0aW9uXCIgY2hlY2tib3ggaXMgY2hlY2tlZCB0aGVuIHNraXAgdGhlIHdob2xlIGFuaW1hdGlvblxucHJvbWlzZSBjaGFpbiBhbmQganVzdCBhcHBlbmQgdGhlIHkgdmFsdWVzXG4qL1xuZnVuY3Rpb24gYW5pbWF0ZUhpZGUoZHBzLCBjaGFpbikge1xuXG4gICAgcGxvdEdyYXBoLnNldHVwKGRwcywgXCIjZ3JhcGhcIik7XG5cbiAgICBkcHMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhcG9pbnQpIHtcbiAgICAgICAgaWYgKGRhdGFwb2ludC51cGRhdGVQb2ludCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2hhaW4gPSBjaGFpblxuICAgICAgICAgICAgICAgIC50aGVuKHBsYWNlWVZhbHVlKVxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoYFBsb3R0aW5nICgke2RhdGFwb2ludC54fSwke2RhdGFwb2ludC55fSlgKSlcbiAgICAgICAgICAgICAgICAudGhlbihwbG90dGVyKVxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoYFJlc2V0dGluZ2ApKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlc2V0Um91bmQpXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd0RlZmF1bHRFcXUpO1xuICAgICAgICB9XG4gICAgICAgIGNoYWluID0gY2hhaW4udGhlbih1cGRhdGVSb3VuZCk7XG4gICAgfSk7XG59XG5cbi8qXG5JZiBubyBncmFwaCBpcyBjaGVja2VkLCB0aGVuIGRvIG5vdCBpbmNsdWRlIHRoZSBncmFwaCBwbG90dGluZyBpbiB0aGVcbmFuaW1hdGlvblxuKi9cblxuZnVuY3Rpb24gbm9HcmFwaChkcHMsIGNoYWluKSB7XG5cbiAgICBkcHMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhcG9pbnQpIHtcbiAgICAgICAgaWYgKGRhdGFwb2ludC51cGRhdGVQb2ludCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2hhaW4gPSBjaGFpblxuICAgICAgICAgICAgICAgIC50aGVuKHJ1bkFuaW1hdGlvbihcInhUb01hY2hpbmVcIiwgZGF0YXBvaW50LngpKVxuICAgICAgICAgICAgICAgIC50aGVuKGFuaW1hdGVGdW5jTWFjaGluZSlcbiAgICAgICAgICAgICAgICAudGhlbihzdGF0dXNNZXNzYWdlKFwiQ2FsY3VsYXRpbmdcIikpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVwbGFjZVhFcXUpXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd0V2YWx1YXRlRXF1KVxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dZQW5zKVxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dFcXVhdGlvbkFnYWluKVxuICAgICAgICAgICAgICAgIC50aGVuKHN0b3BBbmlGdW5jTWFjaGluZSlcbiAgICAgICAgICAgICAgICAudGhlbihtaW5pQW5pKVxuICAgICAgICAgICAgICAgIC50aGVuKHJ1bkFuaW1hdGlvbihcIm1hY2hpbmVUb1lcIiwgZGF0YXBvaW50LnkpKVxuICAgICAgICAgICAgICAgIC50aGVuKHBsYWNlWVZhbHVlKVxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoYFJlc2V0dGluZ2ApKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlc2V0Um91bmQpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgYCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd0RlZmF1bHRFcXUpO1xuICAgICAgICB9XG4gICAgICAgIGNoYWluID0gY2hhaW4udGhlbih1cGRhdGVSb3VuZCk7XG4gICAgfSk7XG59XG5cbi8qXG5JZiBubyBncmFwaCBhbmQgbm8gYW5pbWF0aW9uIGNoZWNrYm94ZXMgYXJlIGNoZWNrZWQsIHRoZW4ganVzdCBwbGFjZSB0aGUgWSB2YWx1ZXNcbmZvciB0aGUgZ3JhcGguXG4qL1xuXG5cbmZ1bmN0aW9uIHNvbHZlRm9yWShkcHMsIGNoYWluKSB7XG5cbiAgICBkcHMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhcG9pbnQpIHtcbiAgICAgICAgaWYgKGRhdGFwb2ludC51cGRhdGVQb2ludCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2hhaW4gPSBjaGFpblxuICAgICAgICAgICAgICAgIC50aGVuKHBsYWNlWVZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjaGFpbiA9IGNoYWluLnRoZW4odXBkYXRlUm91bmQpO1xuICAgIH0pO1xufVxuXG4vKlxuSGFuZGxlIGFsbCBDU1MgYW5pbWF0aW9ucyBieSBjcmVhdGluZyBhIFByb21pc2UgY2hhaW4gdGhyb3VnaCBhIGZvciBsb29wLlxuKi9cbmZ1bmN0aW9uIGFuaW1hdG9yQ29udHJvbChkcHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBudW1Db250YWluZXIgPSAkKFwiI251bUNvbnRhaW5lclwiKSxcbiAgICAgICAgY2hhaW4gPSBQcm9taXNlLnJlc29sdmUoZHBzKTtcblxuICAgIG51bUNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgaWYgKGRwcy5ncmFwaE9wdC5ncmFwaEhpZGUgJiYgZHBzLmdyYXBoT3B0LmFuaW1hdGVIaWRlKSB7XG4gICAgICAgIHNvbHZlRm9yWShkcHMsIGNoYWluKTtcbiAgICB9IGVsc2UgaWYgKGRwcy5ncmFwaE9wdC5hbmltYXRlSGlkZSkge1xuICAgICAgICBhbmltYXRlSGlkZShkcHMsIGNoYWluKTtcbiAgICB9IGVsc2UgaWYgKGRwcy5ncmFwaE9wdC5ncmFwaEhpZGUpIHtcbiAgICAgICAgbm9HcmFwaChkcHMsIGNoYWluKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhbmlQcm9taXNlQ2hhaW4oZHBzLCBjaGFpbik7XG4gICAgfVxuXG59XG4iLCIvKlxuU2V0IHVwIHRoZSBiYXNpYyB2YXJpYWJsZXMuXG4qL1xudmFyIHhNZW1vcnkgPSBbXSxcbiAgICBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbdHlwZT0nbnVtYmVyJ11cIiksXG4gICAgaW5wdXRDb3VudCA9IGlucHV0cy5sZW5ndGgsXG4gICAgcnVuID0gdHJ1ZTtcblxuLypcbkF0dGFjaCBhbiBvbmlucHV0IGV2ZW50IHRvIGFsbCB0aGUgaW5wdXQgYm94ZXMgaW4gb3JkZXIgdG8gdmFsaWRhdGUgdGhlbSB3aXRoaW4gdGhlIGJvdW5kc1xudGhhdCB0aGUgcHJvZmVzc29yIGhhcyBjaG9zZW4uICBJZiB0aGUgYm91bmRzIGFyZSBleGNlZWRlZCwgdGhlbiBkaXNhYmxlIHRoZSBcIkdvIVwiIGJ1dHRvblxuYW5kIG91dHB1dCBhIG1lc3NhZ2UgdG8gdGhlIHN0YXR1cyBiYXIuXG4qL1xuZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcblxuICAgIGlucHV0c1tpXS5vbmlucHV0ID0gZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICB2YXIgeElucHV0VmFsID0gZS5zcmNFbGVtZW50LnZhbHVlO1xuICAgICAgICBpZiAocHJvZk9wdC52aWV3LngubWluIDw9IHhJbnB1dFZhbCAmJiB4SW5wdXRWYWwgPD0gcHJvZk9wdC52aWV3LngubWF4KSB7XG4gICAgICAgICAgICBydW4gPSB0cnVlO1xuICAgICAgICAgICAgJChcImlucHV0W3R5cGU9J2J1dHRvbiddW3ZhbHVlPSdHbyEnXVwiKVxuICAgICAgICAgICAgICAgIC5wcm9wKFwiZGlzYWJsZWRcIiwgZmFsc2UpXG4gICAgICAgICAgICAgICAgLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIFwiY3Vyc29yXCI6IFwicG9pbnRlclwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKFwiI3N0YXR1cyBwXCIpLmh0bWwoYGApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcnVuID0gZmFsc2U7XG4gICAgICAgICAgICAkKFwiaW5wdXRbdHlwZT0nYnV0dG9uJ11bdmFsdWU9J0dvISddXCIpXG4gICAgICAgICAgICAgICAgLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBcImN1cnNvclwiOiBcIm5vdC1hbGxvd2VkXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoXCIjc3RhdHVzIHBcIikuaHRtbChgJHt4SW5wdXRWYWx9IHgtdmFsdWUgb3V0IG9mIGRvbWFpbnMuYCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKlxuRGlwc2xheSBLYXRleCBlcXVhdGlvbi4gQUxTTyB1c2VkIGluIGFqYXguanNcbiovXG5mdW5jdGlvbiBjaGFuZ2VQbG90KHZhbCkge1xuXG4gICAgeE1lbW9yeSA9IFtdO1xuXG4gICAgY2xlYXJWYWx1ZXMoKTtcblxuICAgIHdpbmRvdy5wcm9mT3B0ID0gY2hlY2tDb25maWcodmFsKTtcbiAgICB2YXIgeSA9IGB5ID0gYCxcbiAgICAgICAgZXF1YXQgPSBgJHt2YWx9YCxcbiAgICAgICAgZXF1UGFyYSA9ICQoXCIjZnVuY3Rpb25NYWNoaW5lICNlcXVcIilbMF0sXG4gICAgICAgIHlQYXJhID0gJChcIiNmdW5jdGlvbk1hY2hpbmUgI3lcIik7XG5cbiAgICAkKGVxdVBhcmEpLmVtcHR5KFwiXCIpO1xuXG4gICAga2F0ZXgucmVuZGVyKHksIHlQYXJhWzBdKTtcbiAgICBrYXRleC5yZW5kZXIoZXF1YXQsIGVxdVBhcmEpO1xufVxuXG4vKlxuQW5pbWF0aW9uIHBhdGggZm9yIHRoZSBzdGFpcnN0ZXBcbiovXG5mdW5jdGlvbiBzdGFpclN0ZXAob3B0aW9ucykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBoaWdod2F5UGF0aCA9IDI0Ni41LFxuICAgICAgICBsYXN0U2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGggLSAxXTtcbiAgICBsYXN0U2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyAke29wdGlvbnMubmFtZX0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke29wdGlvbnMuc3RhcnRUb3BPZmZ9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7b3B0aW9ucy5zdGFydExlZnRPZmZ9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwJSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMzJSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtvcHRpb25zLnN0YXJ0VG9wT2ZmfXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke2hpZ2h3YXlQYXRofXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA2NiUge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7b3B0aW9ucy5lbmRUb3BPZmZ9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7aGlnaHdheVBhdGh9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDkwJSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwMCUge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7b3B0aW9ucy5lbmRUb3BPZmZ9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7b3B0aW9ucy5lbmRMZWZ0T2ZmfXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1gLCBsYXN0U2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbn1cblxuLypcbkEgc2V0IG9mIGZ1bmN0aW9ucyB1c2luZyB0aGUgc3RhaXJzdGVwIGFuaW1hdGlvbiB0ZW1wbGF0ZVxudG8gY3JlYXRlIHBhdGh3YXlzIHdpdGggY29vcmRpbmF0ZSBkYXRhXG4qL1xuZnVuY3Rpb24gbWFrZVhUb01hY2hpbmUoaW5wdXRDb3JkcywgaW5kZXgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBzdGFpclN0ZXAoe1xuICAgICAgICBzdGFydFRvcE9mZjogaW5wdXRDb3Jkcy50b3AgKyA1LFxuICAgICAgICBzdGFydExlZnRPZmY6IGlucHV0Q29yZHMubGVmdCArIDMwLFxuICAgICAgICBlbmRUb3BPZmY6IDU1LFxuICAgICAgICBlbmRMZWZ0T2ZmOiAzMDAsXG4gICAgICAgIG5hbWU6IGB4VG9NYWNoaW5lJHtpbmRleH1gXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VNYWNoaW5lVG9ZKGlucHV0Q29yZHMsIGluZGV4KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgc3RhaXJTdGVwKHtcbiAgICAgICAgc3RhcnRUb3BPZmY6IDEwMCxcbiAgICAgICAgc3RhcnRMZWZ0T2ZmOiA1MzAsXG4gICAgICAgIGVuZFRvcE9mZjogaW5wdXRDb3Jkcy50b3AgKyA1LFxuICAgICAgICBlbmRMZWZ0T2ZmOiBpbnB1dENvcmRzLnJpZ2h0ICsgNSxcbiAgICAgICAgbmFtZTogYG1hY2hpbmVUb1kke2luZGV4fWBcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbWFrZVlUb1N0YXR1c0JhcihpbnB1dENvcmRzLCBpbmRleCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHN0YWlyU3RlcCh7XG4gICAgICAgIHN0YXJ0VG9wT2ZmOiBpbnB1dENvcmRzLnRvcCArIDUsXG4gICAgICAgIHN0YXJ0TGVmdE9mZjogaW5wdXRDb3Jkcy5yaWdodCArIDEwLFxuICAgICAgICBlbmRUb3BPZmY6IDE1MCxcbiAgICAgICAgZW5kTGVmdE9mZjogMzAwLFxuICAgICAgICBuYW1lOiBgeVRvU3RhdHVzQmFyJHtpbmRleH1gXG4gICAgfSk7XG59XG5cbi8qXG5TZXQgdXAgdGhlIHhNZW1vcnkgYXJyYXkgYW5kIHRoZSBhbmltYXRpb24gcGF0aHMgZm9yIGVhY2ggaW5wdXQgYm94LlxuXG5OT1RFOiBTZXR0aW5nIHVwIHRoZSB4TWVtb3J5IGFycmF5IGFsc28gbWFrZXMgaXQgc28gdGhhdCBubyBhbmltYXRpb25zXG4gICAgICBhcmUgcmVwZWF0ZWQgYnkgbXVsdGlwbGUgY2xpY2tzIG9uIHRoZSBcIkdvIVwiIGJ1dHRvbi5cbiovXG5mb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Q291bnQ7IGkrKykge1xuICAgIHhNZW1vcnlbaV0gPSBudWxsO1xuXG4gICAgdmFyIGlucHV0Q29vciA9IGlucHV0c1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIG1ha2VYVG9NYWNoaW5lKGlucHV0Q29vciwgaSk7XG4gICAgbWFrZU1hY2hpbmVUb1koaW5wdXRDb29yLCBpKTtcbiAgICBtYWtlWVRvU3RhdHVzQmFyKGlucHV0Q29vciwgaSk7XG4gICAgJChcIiNudW1Db250YWluZXJcIikuYXBwZW5kKCQoYDxwPjwvcD5gKSk7XG59XG5cbi8qXG5TZXQgdXAgdGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdGhlIHByb21pc2UgY2hhaW5cbmluIGFuaW1hdG9yY29udHJvbC5cbiovXG5mdW5jdGlvbiBzZXRVcE9iamVjdCh4aW5wdXRzLCBncmFwaE9wdCwgYW5pU2V0dGluZ3MpIHtcbiAgICB4aW5wdXRzLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgdmFyIHh2YWx1ZSA9ICQodGhpcykudmFsKCksXG4gICAgICAgICAgICB4dmFsLFxuICAgICAgICAgICAgcm91bmRpdDtcblxuICAgICAgICBpZiAoeHZhbHVlKSB7XG4gICAgICAgICAgICB4dmFsID0gK3h2YWx1ZTtcbiAgICAgICAgICAgIHJvdW5kaXQgPSB4dmFsLnRvRml4ZWQocHJvZk9wdC5yb3VuZGluZyk7XG5cbiAgICAgICAgICAgICQodGhpcykudmFsKHJvdW5kaXQpO1xuXG4gICAgICAgICAgICBpZiAocHJvZk9wdC52aWV3LngubWluIDw9IHJvdW5kaXQgJiYgcm91bmRpdCA8PSBwcm9mT3B0LnZpZXcueC5tYXgpIHtcblxuICAgICAgICAgICAgICAgIHZhciByZXBsYWNlWCA9IGdyYXBoT3B0LmVxdWF0aW9uLnJlcGxhY2UoXCJ4XCIsIGAoJHtyb3VuZGl0fSlgKSxcbiAgICAgICAgICAgICAgICAgICAgeXZhbCA9IG1hdGguZXZhbChyZXBsYWNlWCksXG4gICAgICAgICAgICAgICAgICAgIGlucHV0Q29vciA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogcm91bmRpdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHl2YWwudG9GaXhlZChwcm9mT3B0LnJvdW5kaW5nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlRXF1OiBwcm9mT3B0LmVxdWF0aW9uLnJlcGxhY2UoXCJ4XCIsIGAoJHtyb3VuZGl0fSlgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBvaW50OiB4TWVtb3J5W2ldICE9PSByb3VuZGl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJChcIiNudW1Db250YWluZXIgcFwiKS5nZXQoaSlcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgQ2xlYXIgb3V0IHRoZSBZcyB3aGVuIHRoZXkgZG9uJ3QgZXF1YWwgZWFjaCBvdGhlciBhbmQgbmVlZCB0byBiZSB1cGRhdGVkXG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAocG9pbnQudXBkYXRlUG9pbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgJChgdGQjeXZhbCR7aSArIDF9YCkuaHRtbChcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKlVwZGF0ZSB0aGUgeG1lbW9yeSovXG4gICAgICAgICAgICAgICAgeE1lbW9yeVtpXSA9IHJvdW5kaXQ7XG4gICAgICAgICAgICAgICAgYW5pU2V0dGluZ3MuZGF0YXBvaW50cy5wdXNoKHBvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKlxuU2V0IGFsbCB0aGUgZGF0YSB0aGF0IHdpbGwgYmUgc2V0IHRvIGFuaVNldHRpbmdzIGluIHRoZSBzZXRVcE9iamVjdCBmdW5jdGlvblxuXG5OT1RFXG5ncmFwaE9wdC5jYWxsYmFjayBzdGlsbCBuZWVkcyBhIHZpYWJsZSBtZXRob2QhXG4qL1xuZnVuY3Rpb24gc3RhcnRGdW5jTWFjaCgpIHtcblxuICAgIHZhciB4aW5wdXRzID0gJChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxuICAgICAgICBoaWRlQW5pbWF0aW9uQ2hlY2tlZCA9ICQoXCIjYW5pbWF0ZTpjaGVja2VkXCIpLmxlbmd0aCA+IDAsXG4gICAgICAgIGhpZGVHcmFwaENoZWNrZWQgPSAkKFwiI3Nob3dHcmFwaDpjaGVja2VkXCIpLmxlbmd0aCA+IDAsXG4gICAgICAgIGdyYXBoT3B0ID0ge1xuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChhbmlTZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0udXBkYXRlUG9pbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYW5pbWF0ZUhpZGU6IGhpZGVBbmltYXRpb25DaGVja2VkLFxuICAgICAgICAgICAgZ3JhcGhIaWRlOiBoaWRlR3JhcGhDaGVja2VkLFxuICAgICAgICAgICAgZXF1YXRpb246IHByb2ZPcHQuZXF1YXRpb24sXG4gICAgICAgICAgICB2aWV3OiBwcm9mT3B0LnZpZXdcbiAgICAgICAgfSxcbiAgICAgICAgYW5pU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBkYXRhcG9pbnRzOiBbXSxcbiAgICAgICAgICAgIGN1cnJlbnRSb3VuZDogMCxcbiAgICAgICAgICAgIGdyYXBoT3B0OiBncmFwaE9wdFxuICAgICAgICB9O1xuXG4gICAgc2V0VXBPYmplY3QoeGlucHV0cywgZ3JhcGhPcHQsIGFuaVNldHRpbmdzKTtcblxuICAgIC8qU2V0IHVwIHRoZSBncmFwaCovXG4gICAgLy8gICAgcGxvdEdyYXBoLnNldHVwKGFuaVNldHRpbmdzLCBcIiNncmFwaFwiKTtcblxuICAgIGFuaW1hdG9yQ29udHJvbChhbmlTZXR0aW5ncyk7XG59XG5cbi8qXG5GdW5jdGlvbiB0byBzZWxlY3QgdGhlIGNob3NlbiBlcXVhdGlvbiB3aXRoIGl0cyBuYW1lIGFuZCBncmFwaCB3aW5kb3cgYm91bmRhcmllcy5cbiovXG5mdW5jdGlvbiBjaGVja0NvbmZpZyh2YWwpIHtcbiAgICB2YXIgcHJvZk9wdDtcbiAgICAkLmVhY2gocHJvZmVzc29yQ29uZmlnRmlsZSwgZnVuY3Rpb24gKGksIGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0uZXF1YXRpb24gPT09IHZhbCkge1xuICAgICAgICAgICAgcHJvZk9wdCA9IGl0ZW07XG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBwcm9mT3B0O1xufVxuXG4vKlxuVXBvbiBjaG9vc2luZyBhbm90aGVyIGVxdWF0aW9uIHRvIGdyYXBoLCBjbGVhciBhbGwgdGhlIHZhbHVlc1xuKi9cbmZ1bmN0aW9uIGNsZWFyVmFsdWVzKCkge1xuICAgIHZhciB4aW5wdXRzID0gJChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxuICAgICAgICB5aW5wdXRzID0gJChgdHIgdGQ6bnRoLW9mLXR5cGUoMilgKTtcblxuICAgIHhpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSwgaXRlbSkge1xuICAgICAgICBpdGVtLnZhbHVlID0gXCJcIjtcbiAgICB9KTtcblxuICAgIHlpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSwgaXRlbSkge1xuICAgICAgICBpdGVtLmlubmVySFRNTCA9IFwiXCI7XG4gICAgfSk7XG59XG5cbi8qXG5PbmNoYW5nZSBldmVudCBoYW5kbGVyIGZvciB0aGUgc2VsZWN0IGh0bWwgZWxlbWVudC5cbiovXG4kKFwic2VsZWN0XCIpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xuICAgIHZhciBzZWxlY3RlZCA9ICQoYG9wdGlvblt2YWx1ZT1cIiR7ZS50YXJnZXQudmFsdWV9XCJdYCksXG4gICAgICAgIHByb2ZPcHQgPSBKU09OLnBhcnNlKHNlbGVjdGVkLmF0dHIoXCJkYXRhLXByb2ZvcHRcIikpO1xuXG4gICAgcGxvdEdyYXBoLnNldHVwKHByb2ZPcHQsIFwiI2dyYXBoXCIpXG4gICAgY2hhbmdlUGxvdChlLnRhcmdldC52YWx1ZSk7XG59KTtcblxuLypDaGVja2JveCBvbmNsaWNrIGV2ZW50Ki9cbmlmICgkKFwiaW5wdXQjc2hvd0dyYXBoW3R5cGU9J2NoZWNrYm94J11cIikuYXR0cihcImNoZWNrZWRcIikgPT09IFwiY2hlY2tlZFwiKSB7XG4gICAgJChcIiNncmFwaFwiKS5oaWRlKCk7XG59XG5cbiQoXCJpbnB1dCNzaG93R3JhcGhbdHlwZT0nY2hlY2tib3gnXVwiKS5jbGljayhlID0+IHtcbiAgICB2YXIgY2hlY2tlZCA9IGUudGFyZ2V0LmNoZWNrZWRcbiAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAkKFwiI2dyYXBoXCIpLmhpZGUoMTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNncmFwaFwiKS5zaG93KDEwMDApO1xuICAgIH1cbn0pXG5cbi8qXG5ET0NVTUVOVCBrZXlkb3duIGV2ZW50IGhhbmRsZXJcbiovXG4kKGRvY3VtZW50KS5rZXlwcmVzcyhmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLndoaWNoID09IDEzICYmIHJ1bikge1xuICAgICAgICBzdGFydEZ1bmNNYWNoKCk7XG4gICAgfVxufSk7XG5cbi8qXG5HTyEgQ2xpY2sgZXZlbnQgaGFuZGxlclxuKi9cbiQoXCJpbnB1dFt0eXBlPSdidXR0b24nXVt2YWx1ZT0nR28hJ11cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIGlmIChydW4pIHtcbiAgICAgICAgc3RhcnRGdW5jTWFjaCgpO1xuICAgIH1cbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
