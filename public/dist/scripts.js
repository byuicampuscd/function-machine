"use strict";!function(){for(var t,a,d,p,r=$("tbody"),n=10,e=1;e<=n;e++)p=$("<input>"),t=$("<td></td>"),a=$("<td></td>"),d=$("<tr></tr>"),$(d).attr("id","row"+e),$(p).attr("name","input"+e).attr("type","number"),$(a).attr("id","yval"+e),$(t).append(p),$(d).append(t).append(a),$(r).append(d)}();
"use strict";var plotGraph=function(){function t(t){return function(e){var n=(0).toFixed(2);return function(e){var a=t.x*e;this.textContent="( "+a.toFixed(2)+", "+n+")"}}}function e(t){return function(){var e=t.x,n=t.y;return function(t){this.textContent="( "+e+", "+(n*t).toFixed(2)+")"}}}function n(t){return"graphPoint"+t}function a(t){var e=d3.selectAll(u).append("g").attr("class","point").attr("id",n(t.id));return e.append("circle").attr("r",4).attr("cx",0).attr("cy",0),e.append("text").text("(0, 0)").attr("x",5).attr("y",15),e.attr("transform","translate("+d(0)+" "+p(0)+")"),e}function r(r,i){var o,c,s=r.datapoints[r.currentRound];document.querySelectorAll(u+" .graph .line").length>0;r.datapoints.forEach(function(t){t.updatePoint&&d3.select("#"+n(t.id)).remove()}),r.graphOpt.graphHide?d3.select(u+" .graph .line").attr("display","none"):d3.select(u+" .graph .line").attr("display","inline"),s.updatePoint?(o=a(s),r.graphOpt.duration<=.5?(o.attr("transform","translate("+d(s.x)+" "+p(s.y)+")"),o.select("text").text("("+s.x+", "+s.y+")"),i(r)):(c=o.transition().duration(1e3*r.graphOpt.duration).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+p(0)+")"),c.select("text").tween("text",t(s)),c.transition().duration(1e3*r.graphOpt.duration).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+p(s.y)+")").each("end",function(){i(r)}).select("text").tween("text",e(s)))):i(r)}function i(t,e){var n=t.graphOpt,a={target:e,data:[{fn:n.equation,skipTip:!0}],xAxis:{domain:[n.view.x.min,n.view.x.max]},yAxis:{domain:[n.view.y.min,n.view.y.max]},disableZoom:!0,grid:!0,annotations:[{x:0,text:"y axis"},{y:0,text:"x axis"}]};o=e,u=o+" .content",c=n.equation,s=functionPlot(a),d=s.meta.xScale,p=s.meta.yScale,d3.selectAll(u+" .point").remove()}var o,u,c,s,d,p;return{update:r,setup:i}}();
"use strict";$(document).ready(function(){function t(t,e){var n=JSON.stringify(e),i=$("<option></option>").append(t.name);$(i).val(t.equation).attr("data-profOpt",n),$("select").append(i)}if(""==location.search){var e=[];e.push("file=funcMachineSettings")}else{var e=[],n=location.search.substring(1);e=n.split("&")}var i={};e.forEach(function(t){var e=t.split("=");i[e[0]]=e[1]}),$.getJSON(i.file+".json",function(e){var n;n=i.load?e[i.load]:e.general,$("#title").html(n.title),$("#instructionText").html(n.instructions),window.professorConfigFile=n.equations,$.each(n.equations,function(e,n){var i={graphOpt:n};t(n,i),0===e&&(plotGraph.setup(i,"#graph"),document.querySelector(".graph").firstChild.style.display="none",$("input#showGraph[type='checkbox']").click(function(t){var e=t.target.checked;e?document.querySelector(".graph").firstChild.style.display="block":document.querySelector(".graph").firstChild.style.display="none"}),changePlot(n.equation))})}).fail(function(){$("#status p").append("Add a query string")})});
"use strict";function runAnimation(n,t){return function(a){var e=a.datapoints[a.currentRound],i=e.element;return new Promise(function(e){$(i).html(t).css({animation:""+n+a.currentRound+" "+aniDuration+"s ease-in-out"}).one("animationend",function(n){e(a)})})}}function statusMessage(n){var t=$("#status p");return t.html("").css({fontWeight:"normal",color:"black"}),function(a){return new Promise(function(e){t.html(n),e(a)})}}function replaceXEqu(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textDisappear "+.5*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",0),t(n)})})}function showEvaluateEqu(n){var t=n.datapoints[n.currentRound],a=t.changeEqu;return new Promise(function(t){n.graphOpt.hideEquation?t(n):(katex.render(""+a,equPara),$(equPara).css("animation","textAppear "+.5*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)}))})}function showYAns(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){n.graphOpt.hideEquation?a(n):$(equPara).css("animation","textDisappear "+.5*aniDuration+"s ease-in-out").one("animationend",function(){$(equPara).css("opacity",0),katex.render(""+t.y,equPara),a(n)})})}function showEquationAgain(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textAppear "+.5*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)})})}function placeYValue(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){var e=$("td#yval"+(t.id+1))[0];$(e).html(""),$(e).append("<p>"+t.y+"</p>"),a(n)})}function resetRound(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textDisappear "+.15*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",0),katex.render(""+profOpt.latex,equPara),t(n)})})}function showDefaultEqu(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textAppear "+.15*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)})})}function plotter(n){return new Promise(function(t){plotGraph.update(n,function(){t(n)})})}function updateRound(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){n.currentRound+=1,t.updatePoint=!1,a(n)})}function animateFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(./img/functionMachineAni.gif)"}),t(n)})}function stopAniFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(./img/functionMachineStill.gif)"}),t(n)})}function miniAni(n){return new Promise(function(t){var a=n.datapoints[n.currentRound],e=a.y,i=$("<p>"+e+"</p>");$(i).css({fontSize:"20px"}),$("body").append(i),i.css({position:"absolute",opacity:0,left:630,top:160}).animate({opacity:1,top:200},function(a){i.css({display:"none"}),t(n)})})}function aniPromiseChain(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(runAnimation("xToMachine",n.x)).then(animateFuncMachine).then(statusMessage("Calculating")).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(showEquationAgain).then(stopAniFuncMachine).then(statusMessage("")).then(miniAni).then(runAnimation("machineToY",n.y)).then(placeYValue).then(runAnimation("yToStatusBar","("+n.x+","+n.y+")")).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter).then(statusMessage("")).then(resetRound).then(showDefaultEqu)),t=t.then(updateRound)})}function animateHide(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(placeYValue).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter)),t=t.then(updateRound)})}function animatorControl(n){var t=$("#numContainer"),a=Promise.resolve(n);t.innerHTML="",.5===aniDuration?animateHide(n,a):aniPromiseChain(n,a)}var equPara=$("#functionMachine #equ")[0],rangeSpeed=$("#animate").val(),aniDuration=5/rangeSpeed;$("#animate").change(function(n){aniDuration=5/n.target.value});
"use strict";function checkConfig(t){var n;return $.each(professorConfigFile,function(e,o){o.equation===t&&(n=o)}),n}function clearValues(){var t=$("input[type='number']"),n=$("tr td:nth-of-type(2)");t.each(function(t,n){n.value=""}),n.each(function(t,n){n.innerHTML=""})}function changePlot(t){xMemory=[],clearValues(),window.profOpt=checkConfig(t);var n=$("#functionMachine #equ")[0];$(n).empty(),window.profOpt.hideEquation===!1?katex.render(window.profOpt.latex,n):window.profOpt.hideEquation===!0&&$(n).append("<h2>Mystery Equation</h2>").css({paddingTop:"5px"})}function stairStep(t){var n=280,e=document.styleSheets[document.styleSheets.length-1];e.insertRule("@keyframes "+t.name+" {\n                            0% {\n                                opacity: 1;\n                                top: "+t.startTopOff+"px;\n                                left: "+t.startLeftOff+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+t.startTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            66% {\n                                top: "+t.endTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+t.endTopOff+"px;\n                                left: "+t.endLeftOff+"px;\n                            }\n                        }",e.cssRules.length)}function makeXToMachine(t,n){stairStep({startTopOff:t.top+10,startLeftOff:t.left+30,endTopOff:150,endLeftOff:450,name:"xToMachine"+n})}function makeMachineToY(t,n){stairStep({startTopOff:200,startLeftOff:630,endTopOff:t.top+10,endLeftOff:t.right+5,name:"machineToY"+n})}function makeYToStatusBar(t,n){stairStep({startTopOff:t.top+5,startLeftOff:t.right+10,endTopOff:50,endLeftOff:400,name:"yToStatusBar"+n})}function UserException(t,n){this.message=t,this.errorNum=n,this.name="UserException"}function setUpObject(t,n,e){t.each(function(t){var o,a,i=$(this).val();if(i){if(o=+i,a=o.toFixed(profOpt.rounding),$(this).val(a),!(profOpt.view.x.min<=a&&a<=profOpt.view.x.max))throw new UserException("out of window",i);var r=n.equation.replace(/x/g,"("+a+")"),p=math.eval(r);if("number"!=typeof p)throw new UserException("out of domain",i);var u=(this.getBoundingClientRect(),{x:a,y:p.toFixed(profOpt.rounding),id:t,changeEqu:profOpt.latex.replace("x","("+a+")"),updatePoint:xMemory[t]!==a,element:$("#numContainer p").get(t)});if(1/0===p)throw new UserException("undefined value",i);u.updatePoint&&$("td#yval"+(t+1)).html(""),xMemory[t]=a,e.datapoints.push(u)}})}function startFuncMach(){var t=$("input[type='number']"),n={equation:profOpt.equation,hideEquation:profOpt.hideEquation,view:profOpt.view,duration:aniDuration},e={datapoints:[],currentRound:0,graphOpt:n};try{setUpObject(t,n,e),animatorControl(e)}catch(o){xMemory=[],$("#status p").html(o.errorNum+" x-value "+o.message+".").css({fontWeight:"bold",color:"#b62727"})}}function cleanInputs(){var t=$("input[type='number']"),n=[];t.each(function(t){var e=$(this).val();""!==e&&(n.push(e),$(this).val(""))}),t.each(function(t){t<n.length?$(this).val(n[t]):$(this).val("")})}for(var xMemory=[],inputs=document.querySelectorAll("input[type='number']"),inputCount=inputs.length,runMaster=!0,run=!0,i=0;i<inputs.length;i++)inputs[i].onkeyup=function(t){t.srcElement.value;69===t.which&&(t.target.value="",$("#status p").html("Can't do that bro!"))};for(var i=0;i<inputCount;i++){xMemory[i]=null;var inputCoor=inputs[i].getBoundingClientRect();makeXToMachine(inputCoor,i),makeMachineToY(inputCoor,i),makeYToStatusBar(inputCoor,i),$("#numContainer").append($("<p></p>"))}$("#closeHelp").click(function(t){$(t.target.parentElement).fadeOut(100),$("#shade").fadeOut(200),localStorage.firstTimeFunctionMachine=!1}),$("#openHelp").click(function(t){$("#instructions").fadeIn(100),$("#shade").fadeIn(1e3)}),$(document).ready(function(t){try{var n=localStorage.firstTimeFunctionMachine}catch(t){console.error(t)}"false"===n&&($("#instructions").hide(),$("#shade").hide())}),$("select").change(function(t){var n=$('option[value="'+t.target.value+'"]'),e=JSON.parse(n.attr("data-profopt"));plotGraph.setup(e,"#graph"),changePlot(t.target.value)}),$(document).keypress(function(t){13==t.which&&runMaster&&(cleanInputs(),startFuncMach())}),$("input[type='button'][value='Go!']").click(function(){runMaster&&(cleanInputs(),startFuncMach())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbG90R3JhcGguanMiLCJhamF4LmpzIiwiYW5pbWF0b3Jjb250cm9sLmpzIiwiZXZlbnRzLmpzIl0sIm5hbWVzIjpbInRkMSIsInRkMiIsInRyIiwiaW5wdXQiLCJ0Ym9keSIsIiQiLCJyb3dDb3VudCIsImoiLCJhdHRyIiwiYXBwZW5kIiwicGxvdEdyYXBoIiwidXBkYXRlVGV4dFgiLCJjdXJyZW50UG9pbnQiLCJkIiwiemVybyIsInRvRml4ZWQiLCJ0IiwibG9jYXRpb24iLCJ4IiwidGhpcyIsInRleHRDb250ZW50IiwidXBkYXRlVGV4dFkiLCJ4Um91bmRlZCIsInlWYWwiLCJ5IiwibWFrZVBvaW50SWQiLCJudW1JbiIsIm1ha2VQb2ludEdyb3VwIiwicG9pbnRHcm91cCIsImQzIiwic2VsZWN0QWxsIiwiZG90TG9jYXRpb24iLCJpZCIsInRleHQiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJ1cGRhdGUiLCJhbmlPcHRpb25zIiwiY2FsbGJhY2siLCJ0cmFuc2l0aW9uIiwiZGF0YXBvaW50cyIsImN1cnJlbnRSb3VuZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImZvckVhY2giLCJwb2ludCIsInVwZGF0ZVBvaW50Iiwic2VsZWN0IiwicmVtb3ZlIiwiZ3JhcGhPcHQiLCJncmFwaEhpZGUiLCJkdXJhdGlvbiIsImVhc2UiLCJ0d2VlbiIsImVhY2giLCJzZXR1cCIsInNlbGVjdG9yIiwib3B0c0luIiwiZ3JhcGhPcHRpb25zIiwidGFyZ2V0IiwiZGF0YSIsImZuIiwiZXF1YXRpb24iLCJza2lwVGlwIiwieEF4aXMiLCJkb21haW4iLCJ2aWV3IiwibWluIiwibWF4IiwieUF4aXMiLCJkaXNhYmxlWm9vbSIsImdyaWQiLCJhbm5vdGF0aW9ucyIsImdyYXBoTG9jYXRpb25TZWxlY3RvciIsImN1cnJlbnRFcXVhdGlvbiIsImZ1blBsb3QiLCJmdW5jdGlvblBsb3QiLCJtZXRhIiwicmVhZHkiLCJzaG93UHJvZk9wdGlvbnMiLCJwcm9mT3B0IiwiaW5pdCIsInN0cmluZ2lmaWVkRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvcHQiLCJuYW1lIiwidmFsIiwic2VhcmNoIiwicXVlcnlWYXJzIiwicHVzaCIsInF1ZXJ5U3RyaW5nIiwic3Vic3RyaW5nIiwic3BsaXQiLCJhbGxRdWVyaWVzIiwicXVlcnkiLCJwYWlyIiwiZ2V0SlNPTiIsImZpbGUiLCJyZXN1bHQiLCJsb2FkIiwiZ2VuZXJhbCIsImh0bWwiLCJ0aXRsZSIsImluc3RydWN0aW9ucyIsIndpbmRvdyIsInByb2Zlc3NvckNvbmZpZ0ZpbGUiLCJlcXVhdGlvbnMiLCJpIiwicXVlcnlTZWxlY3RvciIsImZpcnN0Q2hpbGQiLCJzdHlsZSIsImRpc3BsYXkiLCJjbGljayIsImUiLCJjaGVja2VkIiwiY2hhbmdlUGxvdCIsImZhaWwiLCJydW5BbmltYXRpb24iLCJ2YWx1ZSIsImFuaVNldHRpbmdzIiwiZGF0YXBvaW50IiwibnVtUGFyYSIsImVsZW1lbnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNzcyIsImFuaW1hdGlvbiIsImFuaUR1cmF0aW9uIiwib25lIiwic3RhdHVzTWVzc2FnZSIsIm1lc3NhZ2UiLCJzdGF0dXNCYXIiLCJmb250V2VpZ2h0IiwiY29sb3IiLCJyZXBsYWNlWEVxdSIsImhpZGVFcXVhdGlvbiIsImVxdVBhcmEiLCJzaG93RXZhbHVhdGVFcXUiLCJwb2ludERhdGEiLCJjaGFuZ2VFcXUiLCJrYXRleCIsInJlbmRlciIsInNob3dZQW5zIiwic2hvd0VxdWF0aW9uQWdhaW4iLCJwbGFjZVlWYWx1ZSIsInJlc2V0Um91bmQiLCJsYXRleCIsInNob3dEZWZhdWx0RXF1IiwicGxvdHRlciIsInVwZGF0ZVJvdW5kIiwicGxhY2Vob2xkZXIiLCJhbmltYXRlRnVuY01hY2hpbmUiLCJiYWNrZ3JvdW5kLWltYWdlIiwic3RvcEFuaUZ1bmNNYWNoaW5lIiwibWluaUFuaSIsInl2YWx1ZSIsInBhcmEiLCJmb250U2l6ZSIsInBvc2l0aW9uIiwib3BhY2l0eSIsImxlZnQiLCJ0b3AiLCJhbmltYXRlIiwiYW5pUHJvbWlzZUNoYWluIiwiZHBzIiwiY2hhaW4iLCJ0aGVuIiwiYW5pbWF0ZUhpZGUiLCJhbmltYXRvckNvbnRyb2wiLCJudW1Db250YWluZXIiLCJpbm5lckhUTUwiLCJyYW5nZVNwZWVkIiwiY2hhbmdlIiwiY2hlY2tDb25maWciLCJpdGVtIiwiY2xlYXJWYWx1ZXMiLCJ4aW5wdXRzIiwieWlucHV0cyIsInhNZW1vcnkiLCJlbXB0eSIsInBhZGRpbmdUb3AiLCJzdGFpclN0ZXAiLCJvcHRpb25zIiwiaGlnaHdheVBhdGgiLCJsYXN0U2hlZXQiLCJzdHlsZVNoZWV0cyIsImluc2VydFJ1bGUiLCJzdGFydFRvcE9mZiIsInN0YXJ0TGVmdE9mZiIsImVuZFRvcE9mZiIsImVuZExlZnRPZmYiLCJjc3NSdWxlcyIsIm1ha2VYVG9NYWNoaW5lIiwiaW5wdXRDb3JkcyIsImluZGV4IiwibWFrZU1hY2hpbmVUb1kiLCJyaWdodCIsIm1ha2VZVG9TdGF0dXNCYXIiLCJVc2VyRXhjZXB0aW9uIiwiZXJyb3JOdW0iLCJzZXRVcE9iamVjdCIsInh2YWwiLCJyb3VuZGl0IiwieHZhbHVlIiwicm91bmRpbmciLCJyZXBsYWNlWCIsInJlcGxhY2UiLCJ5dmFsIiwibWF0aCIsImV2YWwiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXQiLCJJbmZpbml0eSIsInN0YXJ0RnVuY01hY2giLCJjbGVhbklucHV0cyIsImlucHV0QXJyYXkiLCJpbnB1dFZhbHVlIiwiaW5wdXRzIiwiaW5wdXRDb3VudCIsInJ1bk1hc3RlciIsInJ1biIsIm9ua2V5dXAiLCJzcmNFbGVtZW50Iiwid2hpY2giLCJpbnB1dENvb3IiLCJwYXJlbnRFbGVtZW50IiwiZmFkZU91dCIsImxvY2FsU3RvcmFnZSIsImZhZGVJbiIsImZpcnN0dGltZSIsImNvbnNvbGUiLCJlcnJvciIsImhpZGUiLCJzZWxlY3RlZCIsInBhcnNlIiwia2V5cHJlc3MiXSwibWFwcGluZ3MiOiJBQUFBLGNBQUMsV0FhRyxJQUFL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LGlCQUFpQnFPLE9BQ25Cck8sRUFBRSxVQUFVcU8sVUFPcEJyTyxFQUFFLFVBQVV5SyxPQUFPLFNBQVUzRCxHQUN6QixHQUFJd0gsR0FBV3RPLEVBQUFBLGlCQUFtQjhHLEVBQUV2RCxPQUFPNEQsTUFBNUIsTUFDWHZDLEVBQVVHLEtBQUt3SixNQUFNRCxFQUFTbk8sS0FBSyxnQkFFdkNFLFdBQVU4QyxNQUFNeUIsRUFBUyxVQUN6Qm9DLFdBQVdGLEVBQUV2RCxPQUFPNEQsU0FNeEJuSCxFQUFFcUMsVUFBVW1NLFNBQVMsU0FBVTFILEdBQ1osSUFBWEEsRUFBRThHLE9BQWVKLFlBQ2pCTCxjQUNBRCxtQkFPUmxOLEVBQUUscUNBQXFDNkcsTUFBTSxXQUNyQzJHLFlBQ0FMLGNBQ0FEIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgLypcclxuICAgIE1ha2UgdGhlIHdob2xlIHRhYmxlIGFuZCBjZWxscyBmb3IgdGhlIGlucHV0IGJveGVzIGFuZCB1c2VyIGludGVyYWN0aW9uLlxyXG4gICAgKi9cclxuICAgIHZhciB0Ym9keSA9ICQoXCJ0Ym9keVwiKSxcclxuICAgICAgICB0ZDEsXHJcbiAgICAgICAgdGQyLFxyXG4gICAgICAgIHRyLFxyXG4gICAgICAgIGlucHV0LFxyXG4gICAgICAgIHJvd0NvdW50ID0gMTA7XHJcblxyXG4gICAgZm9yICh2YXIgaiA9IDE7IGogPD0gcm93Q291bnQ7IGorKykge1xyXG4gICAgICAgIGlucHV0ID0gJChcIjxpbnB1dD5cIik7XHJcbiAgICAgICAgdGQxID0gJChcIjx0ZD48L3RkPlwiKTtcclxuICAgICAgICB0ZDIgPSAkKFwiPHRkPjwvdGQ+XCIpO1xyXG4gICAgICAgIHRyID0gJChcIjx0cj48L3RyPlwiKTtcclxuXHJcbiAgICAgICAgJCh0cikuYXR0cihcImlkXCIsIGByb3cke2p9YCk7XHJcblxyXG4gICAgICAgICQoaW5wdXQpLmF0dHIoXCJuYW1lXCIsIGBpbnB1dCR7an1gKS5hdHRyKFwidHlwZVwiLCBcIm51bWJlclwiKTtcclxuXHJcbiAgICAgICAgJCh0ZDIpLmF0dHIoXCJpZFwiLCBgeXZhbCR7an1gKTtcclxuXHJcbiAgICAgICAgJCh0ZDEpLmFwcGVuZChpbnB1dCk7XHJcbiAgICAgICAgJCh0cikuYXBwZW5kKHRkMSkuYXBwZW5kKHRkMik7XHJcbiAgICAgICAgJCh0Ym9keSkuYXBwZW5kKHRyKTtcclxuICAgIH1cclxufSgpKTtcclxuIiwiLypqc2xpbnQgcGx1c3BsdXM6IHRydWUsIGJyb3dzZXI6IHRydWUsIGRldmVsOiB0cnVlKi9cclxuLypnbG9iYWwgZDMsIGZ1bmN0aW9uUGxvdCovXHJcbnZhciBwbG90R3JhcGggPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgZ3JhcGhMb2NhdGlvblNlbGVjdG9yLFxyXG4gICAgICAgIGRvdExvY2F0aW9uLFxyXG4gICAgICAgIGN1cnJlbnRFcXVhdGlvbixcclxuICAgICAgICBmdW5QbG90LFxyXG4gICAgICAgIHhTY2FsZSxcclxuICAgICAgICB5U2NhbGUsXHJcbiAgICAgICAgZnJlZUlkID0gMDtcclxuXHJcbiAgICAvL3RoZXNlIHR3byBmdW5jdGlvbnMgbWFrZSB0aGUgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgaW4gdGhlIGFuaW1hdGlvbnMgZm9yIHRoZSBwb2ludCBsYWJlbHNcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRleHRYKGN1cnJlbnRQb2ludCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICB2YXIgemVybyA9ICgwKS50b0ZpeGVkKDIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBjdXJyZW50UG9pbnQueCAqIHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRDb250ZW50ID0gXCIoIFwiICsgbG9jYXRpb24udG9GaXhlZCgyKSArIFwiLCBcIiArIHplcm8gKyBcIilcIjtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRleHRZKGN1cnJlbnRQb2ludCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgeFJvdW5kZWQgPSBjdXJyZW50UG9pbnQueCxcclxuICAgICAgICAgICAgICAgIHlWYWwgPSBjdXJyZW50UG9pbnQueTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IFwiKCBcIiArIHhSb3VuZGVkICsgXCIsIFwiICsgKHlWYWwgKiB0KS50b0ZpeGVkKDIpICsgXCIpXCI7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtYWtlUG9pbnRJZChudW1Jbikge1xyXG4gICAgICAgIHJldHVybiAnZ3JhcGhQb2ludCcgKyBudW1JbjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtYWtlUG9pbnRHcm91cChjdXJyZW50UG9pbnQpIHtcclxuICAgICAgICB2YXIgcG9pbnRHcm91cCA9IGQzLnNlbGVjdEFsbChkb3RMb2NhdGlvbikuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BvaW50JylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgbWFrZVBvaW50SWQoY3VycmVudFBvaW50LmlkKSk7XHJcblxyXG4gICAgICAgIC8vYWRkIHRoZSBjaXJjbGVcclxuICAgICAgICBwb2ludEdyb3VwLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgICAgICAgLmF0dHIoJ3InLCA0KVxyXG4gICAgICAgICAgICAuYXR0cignY3gnLCAwKVxyXG4gICAgICAgICAgICAuYXR0cignY3knLCAwKTtcclxuXHJcbiAgICAgICAgLy9hZGQgdGhlIGxhYmVsXHJcbiAgICAgICAgcG9pbnRHcm91cC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAudGV4dCgnKDAsIDApJylcclxuICAgICAgICAgICAgLmF0dHIoJ3gnLCA1KVxyXG4gICAgICAgICAgICAuYXR0cigneScsIDE1KTtcclxuICAgICAgICAvL21vdmUgaXQgdG8gKDAsMClcclxuICAgICAgICBwb2ludEdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZSgwKSArICcgJyArIHlTY2FsZSgwKSArICcpJyk7XHJcbiAgICAgICAgcmV0dXJuIHBvaW50R3JvdXA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlKGFuaU9wdGlvbnMsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRQb2ludCA9IGFuaU9wdGlvbnMuZGF0YXBvaW50c1thbmlPcHRpb25zLmN1cnJlbnRSb3VuZF0sXHJcbiAgICAgICAgICAgIGxpbmVJc1Bsb3R0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGRvdExvY2F0aW9uICsgJyAuZ3JhcGggLmxpbmUnKS5sZW5ndGggPiAwLFxyXG4gICAgICAgICAgICBwb2ludEdyb3VwLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uO1xyXG5cclxuICAgICAgICAvL2NsZWFyIGFueSBwb2ludHMgdGhhdCB3aWxsIGdldCB1cGRhdGVkXHJcbiAgICAgICAgYW5pT3B0aW9ucy5kYXRhcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKHBvaW50KSB7XHJcbiAgICAgICAgICAgIGlmIChwb2ludC51cGRhdGVQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjJyArIG1ha2VQb2ludElkKHBvaW50LmlkKSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9jaGVjayBpZiB3ZSBuZWVkIHRvIGhpZGUgb3Igc2hvdyB0aGUgcGxvdGxpbmVcclxuICAgICAgICBpZiAoYW5pT3B0aW9ucy5ncmFwaE9wdC5ncmFwaEhpZGUpIHtcclxuICAgICAgICAgICAgZDMuc2VsZWN0KGRvdExvY2F0aW9uICsgJyAuZ3JhcGggLmxpbmUnKS5hdHRyKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QoZG90TG9jYXRpb24gKyAnIC5ncmFwaCAubGluZScpLmF0dHIoJ2Rpc3BsYXknLCAnaW5saW5lJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2RvZXMgdGhlIGN1cnJlbnRSb3VuZCBuZWVkIHRvIGJlIHVwZGF0ZWRlZD9cclxuICAgICAgICBpZiAoIWN1cnJlbnRQb2ludC51cGRhdGVQb2ludCkge1xyXG4gICAgICAgICAgICAvL25vdGhpdG5nIHRvIHNlZSBoZXJlIGp1c3Qga2VlcCBvbiBtb3ZpbmdcclxuICAgICAgICAgICAgY2FsbGJhY2soYW5pT3B0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9kcmF3IHBvaW50XHJcbiAgICAgICAgICAgIHBvaW50R3JvdXAgPSBtYWtlUG9pbnRHcm91cChjdXJyZW50UG9pbnQpO1xyXG5cclxuICAgICAgICAgICAgLy9pcyBhbmltYXRpb24gb24/XHJcbiAgICAgICAgICAgIGlmIChhbmlPcHRpb25zLmdyYXBoT3B0LmR1cmF0aW9uIDw9IDAuNSkge1xyXG4gICAgICAgICAgICAgICAgLy9tb3ZlIGl0IGludG8gcGxhY2Ugd2l0aG91dCBhbmltYXRpb25cclxuICAgICAgICAgICAgICAgIHBvaW50R3JvdXAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeFNjYWxlKGN1cnJlbnRQb2ludC54KSArICcgJyArIHlTY2FsZShjdXJyZW50UG9pbnQueSkgKyAnKScpO1xyXG4gICAgICAgICAgICAgICAgLy91cGRhdGUgdGhlIGxhYmxlXHJcbiAgICAgICAgICAgICAgICBwb2ludEdyb3VwLnNlbGVjdCgndGV4dCcpLnRleHQoJygnICsgY3VycmVudFBvaW50LnggKyAnLCAnICsgY3VycmVudFBvaW50LnkgKyAnKScpO1xyXG4gICAgICAgICAgICAgICAgLy9jYWxsIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhhbmlPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL2RyYXcgcG9pbnQgd2l0aCBhbmltYWlvblxyXG4gICAgICAgICAgICAgICAgLy9GaXJzdCB0cmFuc2l0aW9uIC0gbW92ZSB0aGUgZ3JvdXAgaW4gdGhlIFhcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24gPSBwb2ludEdyb3VwXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihhbmlPcHRpb25zLmdyYXBoT3B0LmR1cmF0aW9uICogMTAwMClcclxuICAgICAgICAgICAgICAgICAgICAuZWFzZSgnY3ViaWMtb3V0JylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeFNjYWxlKGN1cnJlbnRQb2ludC54KSArICcgJyArIHlTY2FsZSgwKSArICcpJyk7XHJcbiAgICAgICAgICAgICAgICAvL3N1YiB0cmFuc2l0aW9uIC0gdXBkYXRlIHRoZSBsYWJlbFxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5zZWxlY3QoJ3RleHQnKS50d2VlbigndGV4dCcsIHVwZGF0ZVRleHRYKGN1cnJlbnRQb2ludCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vU2Vjb25kIHRyYW5zaXRpb24gLSBtb3ZlIHRoZSBncm91cCBpbiB0aGUgWVxyXG4gICAgICAgICAgICAgICAgLy9zdWIgdHJhbnNpdGlvbiAtIHVwZGF0ZSB0aGUgbGFiZWxcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24udHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKGFuaU9wdGlvbnMuZ3JhcGhPcHQuZHVyYXRpb24gKiAxMDAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5lYXNlKCdjdWJpYy1vdXQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB4U2NhbGUoY3VycmVudFBvaW50LngpICsgJyAnICsgeVNjYWxlKGN1cnJlbnRQb2ludC55KSArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAuZWFjaCgnZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhhbmlPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJ3RleHQnKS50d2VlbigndGV4dCcsIHVwZGF0ZVRleHRZKGN1cnJlbnRQb2ludCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldHVwKGFuaU9wdGlvbnMsIHNlbGVjdG9yKSB7XHJcbiAgICAgICAgLy9zdWdhclxyXG4gICAgICAgIHZhciBvcHRzSW4gPSBhbmlPcHRpb25zLmdyYXBoT3B0LFxyXG4gICAgICAgICAgICBncmFwaE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHNlbGVjdG9yLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogW3tcclxuICAgICAgICAgICAgICAgICAgICBmbjogb3B0c0luLmVxdWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraXBUaXA6IHRydWVcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgeEF4aXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBkb21haW46IFtvcHRzSW4udmlldy54Lm1pbiwgb3B0c0luLnZpZXcueC5tYXhdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgeUF4aXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBkb21haW46IFtvcHRzSW4udmlldy55Lm1pbiwgb3B0c0luLnZpZXcueS5tYXhdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZVpvb206IHRydWUsXHJcbiAgICAgICAgICAgICAgICBncmlkOiB0cnVlLFxyXG5cdFx0XHRcdGFubm90YXRpb25zOiBbe1xyXG5cdFx0XHRcdFx0eDogMCxcclxuXHRcdFx0XHRcdHRleHQ6ICd5IGF4aXMnXHJcblx0XHRcdFx0fSwge1xyXG5cdFx0XHRcdFx0eTogMCxcclxuXHRcdFx0XHRcdHRleHQ6ICd4IGF4aXMnXHJcblx0XHRcdFx0fV1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9zYXZlIHNvbWUgdGhpbmdzIGZvciBsYXRlclxyXG4gICAgICAgIGdyYXBoTG9jYXRpb25TZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgICAgIGRvdExvY2F0aW9uID0gZ3JhcGhMb2NhdGlvblNlbGVjdG9yICsgJyAuY29udGVudCc7XHJcbiAgICAgICAgY3VycmVudEVxdWF0aW9uID0gb3B0c0luLmVxdWF0aW9uO1xyXG5cclxuICAgICAgICAvL21ha2UgdGhlIHBsb3QgYW5kIHNjYWxlc1xyXG4gICAgICAgIGZ1blBsb3QgPSBmdW5jdGlvblBsb3QoZ3JhcGhPcHRpb25zKTtcclxuICAgICAgICB4U2NhbGUgPSBmdW5QbG90Lm1ldGEueFNjYWxlO1xyXG4gICAgICAgIHlTY2FsZSA9IGZ1blBsb3QubWV0YS55U2NhbGU7XHJcblxyXG4gICAgICAgIC8vY2xlYW4gb3V0IGFueSBvbGQgcG9pbnRzIGZpcnN0XHJcbiAgICAgICAgZDMuc2VsZWN0QWxsKGRvdExvY2F0aW9uICsgJyAucG9pbnQnKS5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHVwZGF0ZTogdXBkYXRlLFxyXG4gICAgICAgIHNldHVwOiBzZXR1cFxyXG4gICAgfTtcclxufSgpKTtcclxuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIC8qXHJcbiAgICBMb2FkIFF1ZXJ5IHN1YnN0cmluZ1xyXG4gICAgKi9cclxuXHJcbiAgICBpZiAobG9jYXRpb24uc2VhcmNoID09IFwiXCIpIHtcclxuICAgICAgICAgICAgLy9EZWZhdWx0IHF1ZXJ5IHN0cmluZyBpZiBub3RoaW5nIHByb3ZpZGVkXHJcbiAgICAgICAgdmFyIHF1ZXJ5VmFycyA9IFtdO1xyXG4gICAgICAgIHF1ZXJ5VmFycy5wdXNoKFwiZmlsZT1mdW5jTWFjaGluZVNldHRpbmdzXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgICAvLyBHcmFiIHRoZSBxdWVyeSBzdHJpbmcgYW5kIG9wdGlvbnNcclxuICAgICAgICB2YXIgcXVlcnlWYXJzID0gW107XHJcbiAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZyA9IGxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgLy8gU2V0IHF1ZXJ5VmFycyB0byBiZSBhcnJheSBvZiBwYXJhbWV0ZXJzXHJcbiAgICAgICAgcXVlcnlWYXJzID0gcXVlcnlTdHJpbmcuc3BsaXQoXCImXCIpO1xyXG5cclxuICAgIH1cclxuICAgIHZhciBhbGxRdWVyaWVzID0ge307XHJcblxyXG4gICAgcXVlcnlWYXJzLmZvckVhY2goZnVuY3Rpb24gKHF1ZXJ5KXtcclxuICAgICAgICB2YXIgcGFpciA9IHF1ZXJ5LnNwbGl0KFwiPVwiKTtcclxuICAgICAgICBhbGxRdWVyaWVzW3BhaXJbMF1dID0gcGFpclsxXTtcclxuICAgIH0pXHJcblxyXG4vLyAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXJ5VmFycy5sZW5ndGg7IGkrKykge1xyXG4vLyAgICAgICAgdmFyIHBhaXIgPSBxdWVyeVZhcnNbaV0uc3BsaXQoXCI9XCIpO1xyXG4vLyAgICAgICAgYWxsUXVlcmllc1twYWlyWzBdXSA9IHBhaXJbMV07XHJcbi8vICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93UHJvZk9wdGlvbnMocHJvZk9wdCwgaW5pdCkge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgQXBwZW5kIHRoZSBwcm9mZXNzb3IncyBjaG9zZW4gZXF1YXRpb25zIHRvIHRoZSBhcHBsaWNhdGlvblxyXG4gICAgICAgICovXHJcblxyXG4gICAgICAgIHZhciBzdHJpbmdpZmllZERhdGEgPSBKU09OLnN0cmluZ2lmeShpbml0KSxcclxuICAgICAgICAgICAgb3B0ID0gJChcIjxvcHRpb24+PC9vcHRpb24+XCIpLmFwcGVuZChwcm9mT3B0Lm5hbWUpO1xyXG5cclxuICAgICAgICAkKG9wdClcclxuICAgICAgICAgICAgLnZhbChwcm9mT3B0LmVxdWF0aW9uKVxyXG4gICAgICAgICAgICAuYXR0cihcImRhdGEtcHJvZk9wdFwiLCBzdHJpbmdpZmllZERhdGEpO1xyXG5cclxuICAgICAgICAkKFwic2VsZWN0XCIpXHJcbiAgICAgICAgICAgIC5hcHBlbmQob3B0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgTG9hZCB0aGUgcHJvZmVzc29yIGNvbmZpZ3VyYXRpb24gZmlsZVxyXG5cclxuICAgIGdlbmVyYWwgcXVlcnk6ID9maWxlPWZ1bmNNYWNoaW5lU2V0dGluZ3MmbG9hZD1nZW5lcmFsXHJcbiAgICAqL1xyXG5cclxuICAgICQuZ2V0SlNPTihhbGxRdWVyaWVzLmZpbGUgKyBcIi5qc29uXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBcImxvYWRcIiBxdWVyeSwgbG9hZCBpdCwgb3RoZXJ3aXNlIGxvYWQgdGhlIGdlbmVyYWwgb3B0aW9uLlxyXG4gICAgICAgIGlmIChhbGxRdWVyaWVzLmxvYWQpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gZGF0YVthbGxRdWVyaWVzLmxvYWRdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGRhdGEuZ2VuZXJhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoXCIjdGl0bGVcIikuaHRtbChyZXN1bHQudGl0bGUpO1xyXG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25UZXh0XCIpLmh0bWwocmVzdWx0Lmluc3RydWN0aW9ucyk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5wcm9mZXNzb3JDb25maWdGaWxlID0gcmVzdWx0LmVxdWF0aW9ucztcclxuXHJcbiAgICAgICAgJC5lYWNoKHJlc3VsdC5lcXVhdGlvbnMsIGZ1bmN0aW9uIChpLCBwcm9mT3B0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5pdCA9IHtcclxuICAgICAgICAgICAgICAgIGdyYXBoT3B0OiBwcm9mT3B0XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzaG93UHJvZk9wdGlvbnMocHJvZk9wdCwgaW5pdCk7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBEaXNwbGF5IHRoZSBkZWZhdWx0IGVxdWF0aW9uIHRvIHRoZSBmdW5jdGlvbiBtYWNoaW5lXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvL2luIGV2ZW50cy5qc1xyXG4gICAgICAgICAgICAgICAgcGxvdEdyYXBoLnNldHVwKGluaXQsIFwiI2dyYXBoXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JhcGhcIikuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgLypDaGVja2JveCBvbmNsaWNrIGV2ZW50Ki9cclxuICAgICAgICAgICAgICAgICQoXCJpbnB1dCNzaG93R3JhcGhbdHlwZT0nY2hlY2tib3gnXVwiKS5jbGljayhlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZCA9IGUudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmFwaFwiKS5maXJzdENoaWxkLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmFwaFwiKS5maXJzdENoaWxkLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIGNoYW5nZVBsb3QocHJvZk9wdC5lcXVhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KS5mYWlsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiI3N0YXR1cyBwXCIpLmFwcGVuZChcIkFkZCBhIHF1ZXJ5IHN0cmluZ1wiKVxyXG4gICAgfSk7XHJcblxyXG59KTtcclxuIiwidmFyIGVxdVBhcmEgPSAkKFwiI2Z1bmN0aW9uTWFjaGluZSAjZXF1XCIpWzBdLFxyXG4gICAgcmFuZ2VTcGVlZCA9ICQoXCIjYW5pbWF0ZVwiKS52YWwoKSxcclxuICAgIGFuaUR1cmF0aW9uID0gKDEgKiA1KSAvIHJhbmdlU3BlZWQ7XHJcblxyXG4kKCcjYW5pbWF0ZScpLmNoYW5nZShlID0+IHtcclxuICAgIGFuaUR1cmF0aW9uID0gKDEgKiA1KSAvIGUudGFyZ2V0LnZhbHVlO1xyXG59KVxyXG5cclxuZnVuY3Rpb24gcnVuQW5pbWF0aW9uKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAvKlxyXG4gICAgVGhpcyBpcyBhIGZ1bmN0aW9uIGZhY3Rvcnkgd2hpY2ggd2lsbCBncmFiIHRoZVxyXG4gICAgbmVjZXNzYXJ5IGRhdGEgYW5kIHRoZW4gcmV0dXJuIHRoZSBmdW5jdGlvbiBwcm9taXNlXHJcbiAgICAqL1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGFuaW1hdGlvbihhbmlTZXR0aW5ncykge1xyXG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgICAgIHZhciBkYXRhcG9pbnQgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXHJcbiAgICAgICAgICAgIG51bVBhcmEgPSBkYXRhcG9pbnQuZWxlbWVudDtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICBNYWtlIHRoZSBwcm9taXNlIHRoYXQgd2hlbiB0aGUgZHluYW1pY1xyXG4gICAgICAgIGFuaW1hdGlvbiBwYXRoIGlzIGRvbmUgdGhlbiB0aGlzIHByb21pc2UgaXMgZmluaXNoZWRcclxuICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAkKG51bVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuaHRtbCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYW5pbWF0aW9uXCI6IGAke25hbWV9JHthbmlTZXR0aW5ncy5jdXJyZW50Um91bmR9ICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGAsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uZSgnYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhdHVzTWVzc2FnZShtZXNzYWdlKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIC8qXHJcbiAgICBUaGlzIGlzIGEgZnVuY3Rpb24gZmFjdG9yeSB3aGljaCB3aWxsIGdyYWIgdGhlXHJcbiAgICBuZWNlc3NhcnkgZGF0YSBhbmQgdGhlbiByZXR1cm4gdGhlIGZ1bmN0aW9uIHByb21pc2VcclxuICAgICovXHJcbiAgICB2YXIgc3RhdHVzQmFyID0gJChcIiNzdGF0dXMgcFwiKTtcclxuXHJcbiAgICBzdGF0dXNCYXJcclxuICAgICAgICAuaHRtbCgnJylcclxuICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgXCJmb250V2VpZ2h0XCI6IFwibm9ybWFsXCIsXHJcbiAgICAgICAgICAgIFwiY29sb3JcIjogXCJibGFja1wiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhbmlTZXR0aW5ncykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICBzdGF0dXNCYXIuaHRtbChtZXNzYWdlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVwbGFjZVhFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBSZXBsYWNlIHRoZSB4IGluIHRoZSBkaXNhcHBlYXJlZCBlcXVhdGlvbiB3aXRob3V0IGhhdmluZyB0aGUgeSBkaXNhcHBlYXIuXHJcbiAgICAqL1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgaWYgKGFuaVNldHRpbmdzLmdyYXBoT3B0LmhpZGVFcXVhdGlvbikge1xyXG4gICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0RGlzYXBwZWFyICR7YW5pRHVyYXRpb24qMC41fXMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RXZhbHVhdGVFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBHZXQgdGhlIHkgYW5zd2VyIGFuZCB0aGUgeC1jaGFuZ2VkIGVxdWF0aW9uXHJcbiAgICAqL1xyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcclxuICAgICAgICBjaGFuZ2VFcXUgPSBwb2ludERhdGEuY2hhbmdlRXF1O1xyXG5cclxuICAgIC8qXHJcbiAgICBTaG93IHRoZSBuZXcgZXF1YXRpb24gd2l0aCB0aGUgcmVwbGFjZWQgeC12YWx1ZSBlcXVhdGlvblxyXG4gICAgKi9cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGlmIChhbmlTZXR0aW5ncy5ncmFwaE9wdC5oaWRlRXF1YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke2NoYW5nZUVxdX1gLCBlcXVQYXJhKTtcclxuICAgICAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cmF0aW9uKjAuNX1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93WUFucyhhbmlTZXR0aW5ncykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgLypcclxuICAgIEdldCB0aGUgY3VycmVudCByb3VuZCBhbmQgY3VycmVudCBkYXRhIHBvaW50c1xyXG4gICAgKi9cclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XHJcblxyXG4gICAgLypcclxuICAgIEFuaW1hdGUgdGhlIG5ldyB5IHZhbHVlIHRvIHRoZSBjb29yZGluYXRlZCB5IGNvbHVtbiBhbmQgb25jZVxyXG4gICAgYW5pbWF0aW9uIGlzIGRvbmUgdGhlbiByZXR1cm4gdGhlIHByb21pc2VcclxuICAgICovXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBpZiAoYW5pU2V0dGluZ3MuZ3JhcGhPcHQuaGlkZUVxdWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJhdGlvbiowLjV9cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke3BvaW50RGF0YS55fWAsIGVxdVBhcmEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcblNob3cgdGhlIGNob3NlbiBlcXVhdGlvbiB0byBncmFwaFxyXG4qL1xyXG5mdW5jdGlvbiBzaG93RXF1YXRpb25BZ2FpbihhbmlTZXR0aW5ncykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgaWYgKGFuaVNldHRpbmdzLmdyYXBoT3B0LmhpZGVFcXVhdGlvbikge1xyXG4gICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0QXBwZWFyICR7YW5pRHVyYXRpb24qMC41fXMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5PbmNlIHRoZSB5LXZhbHVlIGFwcGVhcnMgaW4gdGhlIGNvcnJlY3QgeS1jb2x1bW4gdGhlbiBmdWxmaWxsIHRoZSBwcm9taXNlLlxyXG4qL1xyXG5mdW5jdGlvbiBwbGFjZVlWYWx1ZShhbmlTZXR0aW5ncykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gJChgdGQjeXZhbCR7cG9pbnREYXRhLmlkICsgMX1gKVswXTtcclxuICAgICAgICAkKGlucHV0KS5odG1sKFwiXCIpO1xyXG4gICAgICAgICQoaW5wdXQpLmFwcGVuZChgPHA+JHtwb2ludERhdGEueX08L3A+YCk7XHJcbiAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuT25jZSB0aGUgZXF1YXRpb24gaXMgY2xlYXJlZCBhbmQgcmVzZXQgdG8gdGhlIGRlZmF1bHQgZXF1YXRpb25cclxudGhlbiBmdWxmaWxsIHRoZSBwcm9taXNlXHJcbiovXHJcbmZ1bmN0aW9uIHJlc2V0Um91bmQoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8vICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgaWYgKGFuaVNldHRpbmdzLmdyYXBoT3B0LmhpZGVFcXVhdGlvbikge1xyXG4gICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0RGlzYXBwZWFyICR7YW5pRHVyYXRpb24qMC4xNX1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke3Byb2ZPcHQubGF0ZXh9YCwgZXF1UGFyYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuUmV0dXJuIHRvIGRlZmF1bHQgYmVnaW5uaW5nIGVxdWF0aW9uIGZvciB0aGUgbmV4dCBhbmltYXRpb24gb3IgZm9yIHRoZSBlbmRcclxuKi9cclxuZnVuY3Rpb24gc2hvd0RlZmF1bHRFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGlmIChhbmlTZXR0aW5ncy5ncmFwaE9wdC5oaWRlRXF1YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cmF0aW9uKjAuMTV9cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbkFjY2VwdCB0aGUgZGF0YXBvaW50IGFuZCBpdHMgaXRlcmF0b3IgYW5kIHBsb3QgdGhhdCBwb2ludCBiZWluZyBwYXNzZWQgdGhyb3VnaFxyXG4qL1xyXG5mdW5jdGlvbiBwbG90dGVyKGFuaVNldHRpbmdzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIHBsb3RHcmFwaC51cGRhdGUoYW5pU2V0dGluZ3MsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuVGhpcyBmdW5jdGlvbiBhY3RzIGFzIGFuIGl0ZXJhdG9yIHNvIHRoYXQgdGhlIHByb21pc2UgY2hhaW4ga25vd3Mgd2hpY2hcclxuZGF0YXBvaW50IHRvIGhhbmRsZSBhbmQgdG8gYW5pbWF0ZVxyXG4qL1xyXG5mdW5jdGlvbiB1cGRhdGVSb3VuZChhbmlTZXR0aW5ncykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIHBsYWNlaG9sZGVyID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGFuaVNldHRpbmdzLmN1cnJlbnRSb3VuZCArPSAxO1xyXG4gICAgICAgIHBsYWNlaG9sZGVyLnVwZGF0ZVBvaW50ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vKlxyXG5Ud28gZnVuY3Rpb25zIGluIG9yZGVyIHRvIHJlcGxhY2UgdGhlIGZ1bmN0aW9uIG1hY2hpbmUgZ2lmIHdpdGggdGhlIGFuaW1hdGVkXHJcbmdpZiBhbmQgYmFja3dhcmRzLlxyXG4qL1xyXG5mdW5jdGlvbiBhbmltYXRlRnVuY01hY2hpbmUoYW5pU2V0dGluZ3MpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICQoXCIjZnVuY3Rpb25NYWNoaW5lXCIpLmNzcyh7XHJcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiOiBcInVybCguL2ltZy9mdW5jdGlvbk1hY2hpbmVBbmkuZ2lmKVwiXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0b3BBbmlGdW5jTWFjaGluZShhbmlTZXR0aW5ncykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgJChcIiNmdW5jdGlvbk1hY2hpbmVcIikuY3NzKHtcclxuICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCI6IFwidXJsKC4vaW1nL2Z1bmN0aW9uTWFjaGluZVN0aWxsLmdpZilcIlxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncylcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5BIGZ1bmN0aW9uIHRvIHNob3cgdGhlIHkgYW5zd2VyIGxlYXZpbmcgdGhlIGZ1bmN0aW9uIG1hY2hpbmUgdG9cclxuc3RhcnQgdGhlIG5leHQgYW5pbWF0aW9uIG9mIGdvaW5nIGJhY2sgdG8gdGhlIHkgY29sdW1uLlxyXG4qL1xyXG5mdW5jdGlvbiBtaW5pQW5pKGFuaVNldHRpbmdzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuXHJcbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdLFxyXG4gICAgICAgICAgICB5dmFsdWUgPSBwbGFjZWhvbGRlci55LFxyXG4gICAgICAgICAgICBwYXJhID0gJChgPHA+JHt5dmFsdWV9PC9wPmApO1xyXG5cclxuICAgICAgICAkKHBhcmEpLmNzcyh7XHJcbiAgICAgICAgICAgIFwiZm9udFNpemVcIjogXCIyMHB4XCJcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQocGFyYSk7XHJcblxyXG4gICAgICAgIHBhcmFcclxuICAgICAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IDYzMCxcclxuICAgICAgICAgICAgICAgIHRvcDogMTYwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICB0b3A6IDIwMFxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgcGFyYS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5BIHByb21pc2UgY2hhaW4gdG8gcnVuIHRocm91Z2ggdGhlIHdob2xlIGFuaW1hdGlvbiBwcm9jZXNzXHJcblxyXG5OT1RFXHJcbkEgcHJvbWlzZSBjaGFpbiBoYXMgYmVlbiB1dGl6aWxlZCBpbiBvcmRlciB0byBlYXNpbHkgcGx1Z2luXHJcbmV4dHJhIGZ1bmN0aW9ucyB0aGF0IHdvdWxkIGJlIGdyZWF0IHRvIGhhdmUgaW4gdGhlIGFuaW1hdGlvblxyXG5wcm9jZXNzLiAgQSBwcm9taXNlIGNoYWluIGhhcyBhbHNvIGJlZW4gdXNlZCBpbiBvcmRlciB0byB3YWl0XHJcbmZvciBhIGFuaW1hdGlvbiB0byBlbmQgdG8gc3RhcnQgdGhlIG5leHQgYW5pbWF0aW9uLlxyXG4qL1xyXG5cclxuLypcclxuRGVmYXVsdCBQcm9taXNlIENoYWluXHJcbiovXHJcbmZ1bmN0aW9uIGFuaVByb21pc2VDaGFpbihkcHMsIGNoYWluKSB7XHJcblxyXG4gICAgZHBzLmRhdGFwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoZGF0YXBvaW50KSB7XHJcbiAgICAgICAgaWYgKGRhdGFwb2ludC51cGRhdGVQb2ludCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjaGFpbiA9IGNoYWluXHJcbiAgICAgICAgICAgICAgICAudGhlbihydW5BbmltYXRpb24oXCJ4VG9NYWNoaW5lXCIsIGRhdGFwb2ludC54KSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGFuaW1hdGVGdW5jTWFjaGluZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoXCJDYWxjdWxhdGluZ1wiKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlcGxhY2VYRXF1KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd0V2YWx1YXRlRXF1KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd1lBbnMpXHJcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RXF1YXRpb25BZ2FpbilcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0b3BBbmlGdW5jTWFjaGluZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoXCJcIikpXHJcbiAgICAgICAgICAgICAgICAudGhlbihtaW5pQW5pKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocnVuQW5pbWF0aW9uKFwibWFjaGluZVRvWVwiLCBkYXRhcG9pbnQueSkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihwbGFjZVlWYWx1ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJ1bkFuaW1hdGlvbihcInlUb1N0YXR1c0JhclwiLCBgKCR7ZGF0YXBvaW50Lnh9LCR7ZGF0YXBvaW50Lnl9KWApKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgUGxvdHRpbmcgKCR7ZGF0YXBvaW50Lnh9LCR7ZGF0YXBvaW50Lnl9KWApKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxvdHRlcilcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoYGApKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzZXRSb3VuZClcclxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dEZWZhdWx0RXF1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hhaW4gPSBjaGFpbi50aGVuKHVwZGF0ZVJvdW5kKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5JZiB0aGUgXCJIaWRlIEFuaW1hdGlvblwiIGNoZWNrYm94IGlzIGNoZWNrZWQgdGhlbiBza2lwIHRoZSB3aG9sZSBhbmltYXRpb25cclxucHJvbWlzZSBjaGFpbiBhbmQganVzdCBhcHBlbmQgdGhlIHkgdmFsdWVzXHJcbiovXHJcbmZ1bmN0aW9uIGFuaW1hdGVIaWRlKGRwcywgY2hhaW4pIHtcclxuXHJcbiAgICBkcHMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhcG9pbnQpIHtcclxuICAgICAgICBpZiAoZGF0YXBvaW50LnVwZGF0ZVBvaW50ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNoYWluID0gY2hhaW5cclxuICAgICAgICAgICAgICAgIC50aGVuKHBsYWNlWVZhbHVlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgUGxvdHRpbmcgKCR7ZGF0YXBvaW50Lnh9LCR7ZGF0YXBvaW50Lnl9KWApKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxvdHRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoYWluID0gY2hhaW4udGhlbih1cGRhdGVSb3VuZCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuSGFuZGxlIGFsbCBDU1MgYW5pbWF0aW9ucyBieSBjcmVhdGluZyBhIFByb21pc2UgY2hhaW4gdGhyb3VnaCBhIGZvciBsb29wLlxyXG4qL1xyXG5mdW5jdGlvbiBhbmltYXRvckNvbnRyb2woZHBzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgbnVtQ29udGFpbmVyID0gJChcIiNudW1Db250YWluZXJcIiksXHJcbiAgICAgICAgY2hhaW4gPSBQcm9taXNlLnJlc29sdmUoZHBzKTtcclxuXHJcbiAgICBudW1Db250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICBpZiAoYW5pRHVyYXRpb24gPT09IDAuNSkge1xyXG4gICAgICAgIGFuaW1hdGVIaWRlKGRwcywgY2hhaW4pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbmlQcm9taXNlQ2hhaW4oZHBzLCBjaGFpbik7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qXHJcblNldCB1cCB0aGUgYmFzaWMgdmFyaWFibGVzLlxyXG4qL1xyXG52YXIgeE1lbW9yeSA9IFtdLFxyXG4gICAgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxyXG4gICAgaW5wdXRDb3VudCA9IGlucHV0cy5sZW5ndGgsXHJcbiAgICBydW5NYXN0ZXIgPSB0cnVlLFxyXG4gICAgcnVuID0gdHJ1ZTtcclxuXHJcbi8qXHJcbkF0dGFjaCBhbiBvbmlucHV0IGV2ZW50IHRvIGFsbCB0aGUgaW5wdXQgYm94ZXMgaW4gb3JkZXIgdG8gdmFsaWRhdGUgdGhlbSB3aXRoaW4gdGhlIGJvdW5kc1xyXG50aGF0IHRoZSBwcm9mZXNzb3IgaGFzIGNob3Nlbi4gIElmIHRoZSBib3VuZHMgYXJlIGV4Y2VlZGVkLCB0aGVuIGRpc2FibGUgdGhlIFwiR28hXCIgYnV0dG9uXHJcbmFuZCBvdXRwdXQgYSBtZXNzYWdlIHRvIHRoZSBzdGF0dXMgYmFyLlxyXG4qL1xyXG5mb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgIGlucHV0c1tpXS5vbmtleXVwID0gZSA9PiB7XHJcblxyXG4gICAgICAgIHZhciB4SW5wdXRWYWwgPSBlLnNyY0VsZW1lbnQudmFsdWU7XHJcblxyXG4gICAgICAgIGlmIChlLndoaWNoID09PSA2OSkge1xyXG4gICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICQoXCIjc3RhdHVzIHBcIikuaHRtbChgQ2FuJ3QgZG8gdGhhdCBicm8hYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuLypcclxuRnVuY3Rpb24gdG8gc2VsZWN0IHRoZSBjaG9zZW4gZXF1YXRpb24gd2l0aCBpdHMgbmFtZSBhbmQgZ3JhcGggd2luZG93IGJvdW5kYXJpZXMuXHJcbiovXHJcbmZ1bmN0aW9uIGNoZWNrQ29uZmlnKHZhbCkge1xyXG4gICAgdmFyIHByb2ZPcHQ7XHJcbiAgICAkLmVhY2gocHJvZmVzc29yQ29uZmlnRmlsZSwgZnVuY3Rpb24gKGksIGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbS5lcXVhdGlvbiA9PT0gdmFsKSB7XHJcbiAgICAgICAgICAgIHByb2ZPcHQgPSBpdGVtO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gcHJvZk9wdDtcclxufVxyXG5cclxuLypcclxuVXBvbiBjaG9vc2luZyBhbm90aGVyIGVxdWF0aW9uIHRvIGdyYXBoLCBjbGVhciBhbGwgdGhlIHZhbHVlc1xyXG4qL1xyXG5mdW5jdGlvbiBjbGVhclZhbHVlcygpIHtcclxuICAgIHZhciB4aW5wdXRzID0gJChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxyXG4gICAgICAgIHlpbnB1dHMgPSAkKGB0ciB0ZDpudGgtb2YtdHlwZSgyKWApO1xyXG5cclxuICAgIHhpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSwgaXRlbSkge1xyXG4gICAgICAgIGl0ZW0udmFsdWUgPSBcIlwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgeWlucHV0cy5lYWNoKGZ1bmN0aW9uIChpLCBpdGVtKSB7XHJcbiAgICAgICAgaXRlbS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbkRpcHNsYXkgS2F0ZXggZXF1YXRpb24uIEFMU08gdXNlZCBpbiBhamF4LmpzXHJcbiovXHJcbmZ1bmN0aW9uIGNoYW5nZVBsb3QodmFsKSB7XHJcblxyXG4gICAgeE1lbW9yeSA9IFtdO1xyXG5cclxuICAgIGNsZWFyVmFsdWVzKCk7XHJcblxyXG4gICAgd2luZG93LnByb2ZPcHQgPSBjaGVja0NvbmZpZyh2YWwpO1xyXG5cclxuICAgIHZhciBlcXVhdCA9IHZhbCxcclxuICAgICAgICBlcXVQYXJhID0gJChcIiNmdW5jdGlvbk1hY2hpbmUgI2VxdVwiKVswXTtcclxuXHJcbiAgICAkKGVxdVBhcmEpLmVtcHR5KCk7XHJcblxyXG4gICAgaWYgKHdpbmRvdy5wcm9mT3B0LmhpZGVFcXVhdGlvbiA9PT0gZmFsc2UpIHtcclxuICAgICAgICBrYXRleC5yZW5kZXIod2luZG93LnByb2ZPcHQubGF0ZXgsIGVxdVBhcmEpO1xyXG4gICAgfSBlbHNlIGlmICh3aW5kb3cucHJvZk9wdC5oaWRlRXF1YXRpb24gPT09IHRydWUpIHtcclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoXCI8aDI+TXlzdGVyeSBFcXVhdGlvbjwvaDI+XCIpXHJcbiAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgXCJwYWRkaW5nVG9wXCI6IFwiNXB4XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKlxyXG5BbmltYXRpb24gcGF0aCBmb3IgdGhlIHN0YWlyc3RlcFxyXG4qL1xyXG5mdW5jdGlvbiBzdGFpclN0ZXAob3B0aW9ucykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgaGlnaHdheVBhdGggPSAyODAsXHJcbiAgICAgICAgbGFzdFNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoIC0gMV07XHJcbiAgICBsYXN0U2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyAke29wdGlvbnMubmFtZX0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke29wdGlvbnMuc3RhcnRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtvcHRpb25zLnN0YXJ0TGVmdE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMzJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke29wdGlvbnMuc3RhcnRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtoaWdod2F5UGF0aH1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDY2JSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke29wdGlvbnMuZW5kVG9wT2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7aGlnaHdheVBhdGh9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA5MCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtvcHRpb25zLmVuZFRvcE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke29wdGlvbnMuZW5kTGVmdE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsIGxhc3RTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG59XHJcblxyXG4vKlxyXG5BIHNldCBvZiBmdW5jdGlvbnMgdXNpbmcgdGhlIHN0YWlyc3RlcCBhbmltYXRpb24gdGVtcGxhdGVcclxudG8gY3JlYXRlIHBhdGh3YXlzIHdpdGggY29vcmRpbmF0ZSBkYXRhXHJcbiovXHJcbmZ1bmN0aW9uIG1ha2VYVG9NYWNoaW5lKGlucHV0Q29yZHMsIGluZGV4KSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHN0YWlyU3RlcCh7XHJcbiAgICAgICAgc3RhcnRUb3BPZmY6IGlucHV0Q29yZHMudG9wICsgMTAsXHJcbiAgICAgICAgc3RhcnRMZWZ0T2ZmOiBpbnB1dENvcmRzLmxlZnQgKyAzMCxcclxuICAgICAgICBlbmRUb3BPZmY6IDE1MCxcclxuICAgICAgICBlbmRMZWZ0T2ZmOiA0NTAsXHJcbiAgICAgICAgbmFtZTogYHhUb01hY2hpbmUke2luZGV4fWBcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTWFjaGluZVRvWShpbnB1dENvcmRzLCBpbmRleCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBzdGFpclN0ZXAoe1xyXG4gICAgICAgIHN0YXJ0VG9wT2ZmOiAyMDAsXHJcbiAgICAgICAgc3RhcnRMZWZ0T2ZmOiA2MzAsXHJcbiAgICAgICAgZW5kVG9wT2ZmOiBpbnB1dENvcmRzLnRvcCArIDEwLFxyXG4gICAgICAgIGVuZExlZnRPZmY6IGlucHV0Q29yZHMucmlnaHQgKyA1LFxyXG4gICAgICAgIG5hbWU6IGBtYWNoaW5lVG9ZJHtpbmRleH1gXHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVlUb1N0YXR1c0JhcihpbnB1dENvcmRzLCBpbmRleCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBzdGFpclN0ZXAoe1xyXG4gICAgICAgIHN0YXJ0VG9wT2ZmOiBpbnB1dENvcmRzLnRvcCArIDUsXHJcbiAgICAgICAgc3RhcnRMZWZ0T2ZmOiBpbnB1dENvcmRzLnJpZ2h0ICsgMTAsXHJcbiAgICAgICAgZW5kVG9wT2ZmOiA1MCxcclxuICAgICAgICBlbmRMZWZ0T2ZmOiA0MDAsXHJcbiAgICAgICAgbmFtZTogYHlUb1N0YXR1c0JhciR7aW5kZXh9YFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcblNldCB1cCB0aGUgeE1lbW9yeSBhcnJheSBhbmQgdGhlIGFuaW1hdGlvbiBwYXRocyBmb3IgZWFjaCBpbnB1dCBib3guXHJcblxyXG5OT1RFOiBTZXR0aW5nIHVwIHRoZSB4TWVtb3J5IGFycmF5IGFsc28gbWFrZXMgaXQgc28gdGhhdCBubyBhbmltYXRpb25zXHJcbiAgICAgIGFyZSByZXBlYXRlZCBieSBtdWx0aXBsZSBjbGlja3Mgb24gdGhlIFwiR28hXCIgYnV0dG9uLlxyXG4qL1xyXG5mb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Q291bnQ7IGkrKykge1xyXG4gICAgeE1lbW9yeVtpXSA9IG51bGw7XHJcblxyXG4gICAgdmFyIGlucHV0Q29vciA9IGlucHV0c1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICBtYWtlWFRvTWFjaGluZShpbnB1dENvb3IsIGkpO1xyXG4gICAgbWFrZU1hY2hpbmVUb1koaW5wdXRDb29yLCBpKTtcclxuICAgIG1ha2VZVG9TdGF0dXNCYXIoaW5wdXRDb29yLCBpKTtcclxuICAgICQoXCIjbnVtQ29udGFpbmVyXCIpLmFwcGVuZCgkKGA8cD48L3A+YCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBVc2VyRXhjZXB0aW9uKG1lc3NhZ2UsIGVycm9yTnVtKSB7XHJcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgdGhpcy5lcnJvck51bSA9IGVycm9yTnVtO1xyXG4gICAgdGhpcy5uYW1lID0gXCJVc2VyRXhjZXB0aW9uXCI7XHJcbn1cclxuXHJcbi8qXHJcblNldCB1cCB0aGUgb2JqZWN0IHRoYXQgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgcHJvbWlzZSBjaGFpblxyXG5pbiBhbmltYXRvciBjb250cm9sLlxyXG4qL1xyXG5mdW5jdGlvbiBzZXRVcE9iamVjdCh4aW5wdXRzLCBncmFwaE9wdCwgYW5pU2V0dGluZ3MpIHtcclxuICAgIHhpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSkge1xyXG5cclxuICAgICAgICB2YXIgeHZhbHVlID0gJCh0aGlzKS52YWwoKSxcclxuICAgICAgICAgICAgeHZhbCxcclxuICAgICAgICAgICAgcm91bmRpdDtcclxuXHJcbiAgICAgICAgaWYgKHh2YWx1ZSkge1xyXG4gICAgICAgICAgICB4dmFsID0gK3h2YWx1ZTtcclxuICAgICAgICAgICAgcm91bmRpdCA9IHh2YWwudG9GaXhlZChwcm9mT3B0LnJvdW5kaW5nKTtcclxuXHJcbiAgICAgICAgICAgICQodGhpcykudmFsKHJvdW5kaXQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb2ZPcHQudmlldy54Lm1pbiA8PSByb3VuZGl0ICYmIHJvdW5kaXQgPD0gcHJvZk9wdC52aWV3LngubWF4KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VYID0gZ3JhcGhPcHQuZXF1YXRpb24ucmVwbGFjZSgveC9nLCBgKCR7cm91bmRpdH0pYCksXHJcbiAgICAgICAgICAgICAgICAgICAgeXZhbCA9IG1hdGguZXZhbChyZXBsYWNlWCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB5dmFsID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0Q29vciA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogcm91bmRpdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHl2YWwudG9GaXhlZChwcm9mT3B0LnJvdW5kaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlRXF1OiBwcm9mT3B0LmxhdGV4LnJlcGxhY2UoXCJ4XCIsIGAoJHtyb3VuZGl0fSlgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBvaW50OiB4TWVtb3J5W2ldICE9PSByb3VuZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJChcIiNudW1Db250YWluZXIgcFwiKS5nZXQoaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oXCJvdXQgb2YgZG9tYWluXCIsIHh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEluZmluaXR5ID09PSB5dmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oXCJ1bmRlZmluZWQgdmFsdWVcIiwgeHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgQ2xlYXIgb3V0IHRoZSBZcyB3aGVuIHRoZXkgZG9uJ3QgZXF1YWwgZWFjaCBvdGhlciBhbmQgbmVlZCB0byBiZSB1cGRhdGVkXHJcbiAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnVwZGF0ZVBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChgdGQjeXZhbCR7aSArIDF9YCkuaHRtbChcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKlVwZGF0ZSB0aGUgeG1lbW9yeSovXHJcbiAgICAgICAgICAgICAgICB4TWVtb3J5W2ldID0gcm91bmRpdDtcclxuICAgICAgICAgICAgICAgIGFuaVNldHRpbmdzLmRhdGFwb2ludHMucHVzaChwb2ludCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihcIm91dCBvZiB3aW5kb3dcIiwgeHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5TZXQgYWxsIHRoZSBkYXRhIHRoYXQgd2lsbCBiZSBzZXQgdG8gYW5pU2V0dGluZ3MgaW4gdGhlIHNldFVwT2JqZWN0IGZ1bmN0aW9uXHJcblxyXG5OT1RFXHJcbmdyYXBoT3B0LmNhbGxiYWNrIHN0aWxsIG5lZWRzIGEgdmlhYmxlIG1ldGhvZCFcclxuKi9cclxuZnVuY3Rpb24gc3RhcnRGdW5jTWFjaCgpIHtcclxuXHJcbiAgICB2YXIgeGlucHV0cyA9ICQoXCJpbnB1dFt0eXBlPSdudW1iZXInXVwiKSxcclxuICAgICAgICBncmFwaE9wdCA9IHtcclxuICAgICAgICAgICAgZXF1YXRpb246IHByb2ZPcHQuZXF1YXRpb24sXHJcbiAgICAgICAgICAgIGhpZGVFcXVhdGlvbjogcHJvZk9wdC5oaWRlRXF1YXRpb24sXHJcbiAgICAgICAgICAgIHZpZXc6IHByb2ZPcHQudmlldyxcclxuICAgICAgICAgICAgZHVyYXRpb246IGFuaUR1cmF0aW9uXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbmlTZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgZGF0YXBvaW50czogW10sXHJcbiAgICAgICAgICAgIGN1cnJlbnRSb3VuZDogMCxcclxuICAgICAgICAgICAgZ3JhcGhPcHQ6IGdyYXBoT3B0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIHNldFVwT2JqZWN0KHhpbnB1dHMsIGdyYXBoT3B0LCBhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgYW5pbWF0b3JDb250cm9sKGFuaVNldHRpbmdzKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICB4TWVtb3J5ID0gW107XHJcbiAgICAgICAgJChcIiNzdGF0dXMgcFwiKVxyXG4gICAgICAgICAgICAuaHRtbChgJHtlLmVycm9yTnVtfSB4LXZhbHVlICR7ZS5tZXNzYWdlfS5gKVxyXG4gICAgICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgICAgIFwiZm9udFdlaWdodFwiOiBcImJvbGRcIixcclxuICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjYjYyNzI3XCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qQmVmb3JlIHJ1bm5pbmcgdGhlIGZ1bmN0aW9uIG1hY2hpbmUsIHB1dCBhbGwgaW5wdXRzIG5leHQgdG8gZWFjaCBvdGhlci4qL1xyXG5mdW5jdGlvbiBjbGVhbklucHV0cygpIHtcclxuICAgIHZhciB4aW5wdXRzID0gJChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxyXG4gICAgICAgIGlucHV0QXJyYXkgPSBbXTtcclxuXHJcbiAgICB4aW5wdXRzLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICB2YXIgaW5wdXRWYWx1ZSA9ICQodGhpcykudmFsKCk7XHJcblxyXG4gICAgICAgIGlmIChpbnB1dFZhbHVlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGlucHV0QXJyYXkucHVzaChpbnB1dFZhbHVlKTtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwoXCJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB4aW5wdXRzLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICBpZiAoaSA8IGlucHV0QXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKGlucHV0QXJyYXlbaV0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbiQoXCIjY2xvc2VIZWxwXCIpLmNsaWNrKGUgPT4ge1xyXG4gICAgJChlLnRhcmdldC5wYXJlbnRFbGVtZW50KS5mYWRlT3V0KDEwMCk7XHJcbiAgICAkKFwiI3NoYWRlXCIpLmZhZGVPdXQoMjAwKTtcclxuICAgIGxvY2FsU3RvcmFnZVsnZmlyc3RUaW1lRnVuY3Rpb25NYWNoaW5lJ10gPSBmYWxzZTtcclxufSk7XHJcblxyXG4kKFwiI29wZW5IZWxwXCIpLmNsaWNrKGUgPT4ge1xyXG4gICAgJChcIiNpbnN0cnVjdGlvbnNcIikuZmFkZUluKDEwMCk7XHJcbiAgICAkKFwiI3NoYWRlXCIpLmZhZGVJbigxMDAwKTtcclxufSk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShlID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIGZpcnN0dGltZSA9IGxvY2FsU3RvcmFnZVsnZmlyc3RUaW1lRnVuY3Rpb25NYWNoaW5lJ107XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICAgIGlmIChmaXJzdHRpbWUgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zXCIpLmhpZGUoKTtcclxuICAgICAgICAkKFwiI3NoYWRlXCIpLmhpZGUoKTtcclxuICAgIH1cclxufSlcclxuXHJcbi8qXHJcbk9uY2hhbmdlIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBzZWxlY3QgaHRtbCBlbGVtZW50LlxyXG4qL1xyXG4kKFwic2VsZWN0XCIpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyIHNlbGVjdGVkID0gJChgb3B0aW9uW3ZhbHVlPVwiJHtlLnRhcmdldC52YWx1ZX1cIl1gKSxcclxuICAgICAgICBwcm9mT3B0ID0gSlNPTi5wYXJzZShzZWxlY3RlZC5hdHRyKFwiZGF0YS1wcm9mb3B0XCIpKTtcclxuXHJcbiAgICBwbG90R3JhcGguc2V0dXAocHJvZk9wdCwgXCIjZ3JhcGhcIilcclxuICAgIGNoYW5nZVBsb3QoZS50YXJnZXQudmFsdWUpO1xyXG59KTtcclxuXHJcbi8qXHJcbkRPQ1VNRU5UIGtleWRvd24gZXZlbnQgaGFuZGxlclxyXG4qL1xyXG4kKGRvY3VtZW50KS5rZXlwcmVzcyhmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKGUud2hpY2ggPT0gMTMgJiYgcnVuTWFzdGVyKSB7XHJcbiAgICAgICAgY2xlYW5JbnB1dHMoKTtcclxuICAgICAgICBzdGFydEZ1bmNNYWNoKCk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLypcclxuR08hIENsaWNrIGV2ZW50IGhhbmRsZXJcclxuKi9cclxuJChcImlucHV0W3R5cGU9J2J1dHRvbiddW3ZhbHVlPSdHbyEnXVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAocnVuTWFzdGVyKSB7XHJcbiAgICAgICAgY2xlYW5JbnB1dHMoKTtcclxuICAgICAgICBzdGFydEZ1bmNNYWNoKCk7XHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=
