"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,e){t.wand=e()}("undefined"!=typeof window?window:void 0,function(){var t={apndr:function(t,e){if("object"!==("undefined"==typeof t?"undefined":_typeof(t))||"object"!==("undefined"==typeof e?"undefined":_typeof(e))||Array.isArray(e))if("object"!==("undefined"==typeof t?"undefined":_typeof(t)))console.error("First parameter passed is not an object element.");else if("object"!==("undefined"==typeof e?"undefined":_typeof(e)))"string"!=typeof e&&"number"!=typeof e||t.appendChild(this.txt(e));else if(Array.isArray(e))for(var r=e,n=0;n<r.length;n++)this.apndr(t,r[n]);else console.error("Parameters are not compatible in the lib.apndr function.  Hit the arrow on the left for call stack.");else t.appendChild(e)},querApndr:function(t,e,r){var n=document.querySelector(t);if(null!=n){if(Array.isArray(e))for(var o=e,i=0;i<o.length;i++)this.apndr(n,this.crtElm(o[i]));else r?this.apndr(n,this.crtElm(e,r)):this.apndr(n,e);return n}console.error("No tag exists in the DOM. Hit the arrow on the left for call stack.")},querAttr:function(t,e,r){var n=document.querySelector(t);null==n?console.error("No tag exists in the DOM. Hit the arrow on the left for call stack."):e&&n.setAttribute(e,r)},txt:function(t){return"string"==typeof t?document.createTextNode(t):"number"==typeof t?document.createTextNode(t.toString()):void console.error("Parameter passed to lib.txt is not a string nor a number.  Hit the arrow on the left for call stack.")},crtElm:function(t,e){var r,n=document.createElement(t);return e&&("string"==typeof e?(r=this.txt(e),this.apndr(n,r)):console.error("Must pass a string as the second param in lib.crtElm function.  Hit the arrow on the left for call stack.")),n}};return t});
"use strict";function changePlot(n){equPara.innerText="";var a="y = "+n;katex.render(a,equPara),globalEqu=n,graphConfig.equation=a}function dispConfig(n){var a=JSON.parse(n),e=wand.crtElm("select");e.name="equDrop";for(var o=0;o<a.length;o++){var r=wand.crtElm("option",a[o].name);r.value=a[o].equation,wand.apndr(e,r),wand.querApndr("#dropdown",e),0===o&&changePlot(a[o].equation)}}function loadConfig(n,a){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(config=e.responseText,n(config),graphConfig.appConfig=JSON.parse(config))},e.open("GET",a,!0),e.send()}var config,globalEqu,equPara=wand.querApndr("#functionMachine p"),graphConfig={};loadConfig(dispConfig,"../funcMachineSettings.json");
"use strict";function aniConfig(t,n,e,a,o){var i={};return i.begCoorData=t,i.endCoorData=n,i.num=e,i.alphaid=a,i.delay=o,i}function animationTemplate(t){var n=t.begCoorData.top+5,e=t.begCoorData.right-30,a=t.endCoorData.top,o=t.endCoorData.right,i=246,r=wand.querApndr("#numContainer");return t.num.style.position="absolute",t.num.style.top=n+"px",t.num.style.left=e+"px",wand.apndr(r,t.num),lastSheet.insertRule("@keyframes toFuncMachine"+t.alphaid+" {\n                            0% {\n                                opacity: 0;\n                                top: "+n+"px;\n                                left: "+e+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+n+"px;\n                                left: "+i+"px;\n                            }\n                            66% {\n                                top: "+a+"px;\n                                left: "+i+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+a+"px;\n                                left: "+o+"px;\n                            }\n                        }",lastSheet.cssRules.length),t.num.style.animation="toFuncMachine"+t.alphaid+" 3s ease-in-out "+10*t.delay+"s",t.num.style.opacity="0",t.num.style.zIndex="100",new Promise(function(n){window.setTimeout(function(){n(t.num)},3e3*t.delay)})}function animateToStatusBar(){console.log("Animate to status bar and pass the information to the graph function")}function equAppear(t){return new Promise(function(n){setTimeout(function(){equPara.innerHTML="",equPara.style.opacity=0,katex.render("y = "+t,equPara),equPara.style.animation="textAppear 1s ease-in-out",equPara.style.opacity=1,n(t)},1500)})}function equAnimeDisappear(t){return new Promise(function(n){var e;"object"===("undefined"==typeof t?"undefined":_typeof(t))?(e=globalEqu.replace("x","*"+t.innerText),statusBar.innerText="",statusBar.innerText=">> Calculating",setTimeout(function(){equPara.style.animation="textDisappear 1.5s ease-in-out",n(e)},1500)):"string"==typeof t&&(e=math.eval(t),setTimeout(function(){equPara.style.animation="textDisappear 1.5s ease-in-out",n(e)},1500))})}function createAns(t){var n=wand.querApndr("#numContainer"),e=wand.crtElm("p",t.toString());return n.innerHTML="",new Promise(function(t){setTimeout(function(){var n={top:55,right:300},a={};a.top=startingData[0].top+5,a.right=startingData[0].right;var o=aniConfig(n,a,e,"zz",0);startingData.pop(),t(o)},1500)})}function animate(t,n){var e=wand.crtElm("p",n[t].num),a={top:55,right:300},o=aniConfig(n[t].coorData,a,e,alphaid[t],t);startingData.push(n[t].coorData),animationTemplate(o).then(equAnimeDisappear).then(equAppear).then(equAnimeDisappear).then(equAppear).then(createAns).then(animationTemplate)}function animatorControl(t,n){var e=wand.querApndr("#numContainer");e.innerHTML="";for(var a=0;a<t.length;a++)animate(a,t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},lastSheet=document.styleSheets[document.styleSheets.length-1],alphaid=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r"],statusBar=wand.querApndr("#status p"),startingData=[];
"use strict";!function(){var n=["input1","input2","input3","input4","input5","input6","input7","input8","input9","input10","input11","input12","input13","input14","input15","input16","input17","input18","input19"],t=[];document.onchange=function(n){"select"===n.target.localName&&changePlot(n.target.value)},document.onclick=function(u){if("Go!"===u.target.value){t=[];for(var i=0;i<n.length;i++){var a=wand.querApndr("[name='"+n[i]+"']");if(a.value){var p={};p.coorData=a.getBoundingClientRect(),p.num=a.value,t.push(p),graphConfig.aniData=p}}animatorControl(t)}}}();
"use strict";!function(){for(var n,d,r,t,a=wand.querApndr("tbody"),w=19,p=1;w>=p;p++)t=wand.crtElm("input"),n=wand.crtElm("td"),d=wand.crtElm("td"),r=wand.crtElm("tr"),t.name="input"+p,t.type="number",wand.apndr(n,t),wand.apndr(r,[n,d]),wand.apndr(a,r)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndhbmQuanMiLCJhamF4LmpzIiwiYW5pbWF0b3Jjb250cm9sLmpzIiwiZXZlbnRzLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsImdsbyIsImxpYiIsIndhbmQiLCJ3aW5kb3ciLCJ1bmRlZmluZWQiLCJhcG5kciIsImEiLCJiIiwiQXJyYXkiLCJpc0FycmF5IiwiY29uc29sZSIsImVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0aGlzIiwidHh0IiwiYXJyIiwiaSIsImxlbmd0aCIsInF1ZXJBcG5kciIsImMiLCJlbGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjcnRFbG0iLCJxdWVyQXR0ciIsInNldEF0dHJpYnV0ZSIsImNyZWF0ZVRleHROb2RlIiwidG9TdHJpbmciLCJjcmVhdGVFbGVtZW50IiwiY2hhbmdlUGxvdCIsInZhbCIsImVxdVBhcmEiLCJpbm5lclRleHQiLCJlcXVhdCIsImthdGV4IiwicmVuZGVyIiwiZ2xvYmFsRXF1IiwiZ3JhcGhDb25maWciLCJlcXVhdGlvbiIsImRpc3BDb25maWciLCJwYXJzZWRPYmoiLCJKU09OIiwicGFyc2UiLCJzZWxlY3QiLCJuYW1lIiwib3B0IiwidmFsdWUiLCJsb2FkQ29uZmlnIiwiZnVuYyIsInNlYXJjaCIsInhodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiY29uZmlnIiwicmVzcG9uc2VUZXh0IiwiYXBwQ29uZmlnIiwib3BlbiIsInNlbmQiLCJhbmlDb25maWciLCJiZWdDb29yRGF0YSIsImVuZENvb3JEYXRhIiwibnVtIiwiYWxwaGFpZCIsImFuaW1hdGVDb25maWciLCJkZWxheSIsImFuaW1hdGlvblRlbXBsYXRlIiwic3RhcnRUb3BPZmYiLCJ0b3AiLCJzdGFydFJpZ2h0T2ZmIiwicmlnaHQiLCJlbmRUb3BPZmYiLCJlbmRSaWdodE9mZiIsImhpZ2h3YXlQYXRoIiwibnVtQ29udGFpbmVyIiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJsYXN0U2hlZXQiLCJpbnNlcnRSdWxlIiwiY3NzUnVsZXMiLCJhbmltYXRpb24iLCJvcGFjaXR5IiwiekluZGV4IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiYW5pbWF0ZVRvU3RhdHVzQmFyIiwibG9nIiwiZXF1QXBwZWFyIiwiY2hhbmdlRXF1IiwiaW5uZXJIVE1MIiwiZXF1QW5pbWVEaXNhcHBlYXIiLCJyZXBsYWNlIiwic3RhdHVzQmFyIiwibWF0aCIsImV2YWwiLCJjcmVhdGVBbnMiLCJhbnMiLCJmdW5jTWFjaENvb3IiLCJzdGFydGluZ0RhdGEiLCJwb3AiLCJhbmltYXRlIiwiYXciLCJjb29yRGF0YSIsInB1c2giLCJ0aGVuIiwiYW5pbWF0b3JDb250cm9sIiwiYW5pIiwic3R5bGVTaGVldHMiLCJpbnB1dE9wdCIsImFuaW1hdGVXYWl0Iiwib25jaGFuZ2UiLCJlIiwidGFyZ2V0IiwibG9jYWxOYW1lIiwib25jbGljayIsImlucHV0IiwiYW5pRGF0YSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRkMSIsInRkMiIsInRyIiwidGJvZHkiLCJyb3dDb3VudCIsImoiLCJ0eXBlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUVBLElBQUlBLFNBQTRCLGtCQUFYQyxTQUFvRCxnQkFBcEJBLFFBQU9DLFNBQXdCLFNBQVVDLEdBQU8sYUFBY0EsSUFBUyxTQUFVQSxHQUFPLE1BQU9BLElBQXlCLGtCQUFYRixTQUF5QkUsRUFBSUMsY0FBZ0JILE9BQVMsZUFBa0JFLEtBSXpPLFNBQVVFLEVBQUtDLEdBQ1pELEVBQUlFLEtBQU9ELEtBQ0ssbUJBQVhFLFFBQXlCQSxPQUFoQ0MsT0FBK0MsV0FDN0MsR0FBSUgsSUFDQUksTUFBTyxTQUFVQyxFQUFHQyxHQUNoQixHQUFpQixZQUFiLG1CQUFPRCxHQUFQLFlBQUFYLFFBQU9XLEtBQStCLFlBQWIsbUJBQU9DLEdBQVAsWUFBQVosUUFBT1ks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LEdBQ0MsV0FBdkJBLEVBQUVDLE9BQU9DLFdBRVR2RixXQUFXcUYsRUFBRUMsT0FBT3JFLFFBSzVCekIsU0FBU2dHLFFBQVUsU0FBVUgsR0FDekIsR0FBdUIsUUFBbkJBLEVBQUVDLE9BQU9yRSxNQUFpQixDQUMxQmtFLElBQ0EsS0FBSyxHQUFJaEcsR0FBSSxFQUFHQSxFQUFJK0YsRUFBUzlGLE9BQVFELElBQUssQ0FDdEMsR0FBSXNHLEdBQVFwSCxLQUFLZ0IsVUFBTCxVQUF5QjZGLEVBQVMvRixHQUFsQyxLQUNaLElBQUlzRyxFQUFNeEUsTUFBTyxDQUNiLEdBQUl5RSxLQUNKQSxHQUFRZCxTQUFXYSxFQUFNRSx3QkFDekJELEVBQVF4RCxJQUFNdUQsRUFBTXhFLE1BQ3BCa0UsRUFBWU4sS0FBS2EsR0FHakJsRixZQUFZa0YsUUFBVUEsR0FHOUJYLGdCQUFnQkk7QUMvQjVCLGNBQUMsV0FXRyxJQUFLLEdBTkRTLEdBQ0FDLEVBQ0FDLEVBQ0FMLEVBSkFNLEVBQVExSCxLQUFLZ0IsVUFBVSxTQUt2QjJHLEVBQVcsR0FFTkMsRUFBSSxFQUFRRCxHQUFMQyxFQUFlQSxJQUMzQlIsRUFBUXBILEtBQUtxQixPQUFPLFNBQ3BCa0csRUFBTXZILEtBQUtxQixPQUFPLE1BQ2xCbUcsRUFBTXhILEtBQUtxQixPQUFPLE1BQ2xCb0csRUFBS3pILEtBQUtxQixPQUFPLE1BRWpCK0YsRUFBTTFFLEtBQU4sUUFBcUJrRixFQUNyQlIsRUFBTVMsS0FBTyxTQUViN0gsS0FBS0csTUFBTW9ILEVBQUtILEdBQ2hCcEgsS0FBS0csTUFBTXNILEdBQUtGLEVBQUtDLElBQ3JCeEgsS0FBS0csTUFBTXVILEVBQU9EIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cblRoaXMgaXMgYSBjdXN0b20gbGlicmFyeSB0aGF0IEkgbWFkZSB0byBtYWtlIERPTSBtYW5pcHVsYXRpb24gYSBsaXR0bGUgYml0IGZhc3RlclxuXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuKGZ1bmN0aW9uIChnbG8sIGxpYikge1xuICAgIGdsby53YW5kID0gbGliKCk7XG59KHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxpYiA9IHtcbiAgICAgICAgYXBuZHI6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGEgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGIgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgICAgICAgICAgICBhLmFwcGVuZENoaWxkKGIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgcGFzc2VkIGlzIG5vdCBhbiBvYmplY3QgZWxlbWVudC5cIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBiICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBiID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBiID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGEuYXBwZW5kQ2hpbGQodGhpcy50eHQoYikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBiO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBuZHIoYSwgYXJyW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJQYXJhbWV0ZXJzIGFyZSBub3QgY29tcGF0aWJsZSBpbiB0aGUgbGliLmFwbmRyIGZ1bmN0aW9uLiAgSGl0IHRoZSBhcnJvdyBvbiB0aGUgbGVmdCBmb3IgY2FsbCBzdGFjay5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHF1ZXJBcG5kcjogZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGEpO1xuICAgICAgICAgICAgaWYgKGVsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHRhZyBleGlzdHMgaW4gdGhlIERPTS4gSGl0IHRoZSBhcnJvdyBvbiB0aGUgbGVmdCBmb3IgY2FsbCBzdGFjay5cIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBiO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcG5kcihlbGUsIHRoaXMuY3J0RWxtKGFycltpXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBuZHIoZWxlLCB0aGlzLmNydEVsbShiLCBjKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcG5kcihlbGUsIGIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHF1ZXJBdHRyOiBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSk7XG4gICAgICAgICAgICBpZiAoZWxlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gdGFnIGV4aXN0cyBpbiB0aGUgRE9NLiBIaXQgdGhlIGFycm93IG9uIHRoZSBsZWZ0IGZvciBjYWxsIHN0YWNrLlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZShiLCBjKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHR4dDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGEgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlBhcmFtZXRlciBwYXNzZWQgdG8gbGliLnR4dCBpcyBub3QgYSBzdHJpbmcgbm9yIGEgbnVtYmVyLiAgSGl0IHRoZSBhcnJvdyBvbiB0aGUgbGVmdCBmb3IgY2FsbCBzdGFjay5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNydEVsbTogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLFxuICAgICAgICAgICAgICAgIHR4dDtcbiAgICAgICAgICAgIGlmIChiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBiID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHR4dCA9IHRoaXMudHh0KGIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwbmRyKGVsZSwgdHh0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTXVzdCBwYXNzIGEgc3RyaW5nIGFzIHRoZSBzZWNvbmQgcGFyYW0gaW4gbGliLmNydEVsbSBmdW5jdGlvbi4gIEhpdCB0aGUgYXJyb3cgb24gdGhlIGxlZnQgZm9yIGNhbGwgc3RhY2suXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpYjtcbn0pKTtcbiIsIiAgICB2YXIgY29uZmlnLFxuICAgICAgICBnbG9iYWxFcXUsXG4gICAgICAgIGVxdVBhcmEgPSB3YW5kLnF1ZXJBcG5kcihcIiNmdW5jdGlvbk1hY2hpbmUgcFwiKSxcbiAgICAgICAgZ3JhcGhDb25maWcgPSB7fTtcblxuICAgIC8vRGlwc2xheSBLYXRleCBlcXVhdGlvblxuICAgIGZ1bmN0aW9uIGNoYW5nZVBsb3QodmFsKSB7XG4gICAgICAgIGVxdVBhcmEuaW5uZXJUZXh0ID0gXCJcIjtcbiAgICAgICAgdmFyIGVxdWF0ID0gYHkgPSAke3ZhbH1gXG4gICAgICAgIGthdGV4LnJlbmRlcihlcXVhdCwgZXF1UGFyYSk7XG4gICAgICAgIGdsb2JhbEVxdSA9IHZhbDtcblxuICAgICAgICAvL2dyYXBoQ29uZmlnIGxvY2F0ZWQgaW4gYW5pbWF0b3IuanMgbGluZSA5XG4gICAgICAgIGdyYXBoQ29uZmlnLmVxdWF0aW9uID0gZXF1YXQ7XG4gICAgfVxuXG4gICAgLypBSkFYIFJFUVVFU1QgVE8gRlVOQ01BQ0hJTkVTRVRUSU5HUy5KUyBBTkQgTE9BRCovXG4gICAgZnVuY3Rpb24gZGlzcENvbmZpZyhjKSB7XG4gICAgICAgIHZhciBwYXJzZWRPYmogPSBKU09OLnBhcnNlKGMpLFxuICAgICAgICAgICAgc2VsZWN0ID0gd2FuZC5jcnRFbG0oXCJzZWxlY3RcIik7XG4gICAgICAgIHNlbGVjdC5uYW1lID0gXCJlcXVEcm9wXCI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyc2VkT2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0gd2FuZC5jcnRFbG0oXCJvcHRpb25cIiwgcGFyc2VkT2JqW2ldLm5hbWUpO1xuICAgICAgICAgICAgb3B0LnZhbHVlID0gcGFyc2VkT2JqW2ldLmVxdWF0aW9uO1xuICAgICAgICAgICAgLy8gICAgICAgICAgb3B0LmNsYXNzID0gSlNPTi5zdHJpbmdpZnkocGFyc2VkT2JqW2ldLndpbmRvdyk7XG4gICAgICAgICAgICB3YW5kLmFwbmRyKHNlbGVjdCwgb3B0KTtcbiAgICAgICAgICAgIHdhbmQucXVlckFwbmRyKFwiI2Ryb3Bkb3duXCIsIHNlbGVjdCk7XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNoYW5nZVBsb3QocGFyc2VkT2JqW2ldLmVxdWF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vTG9hZCBpbiB0aGUgY29uZmlndXJhdGlvbiBmaWxlXG4gICAgZnVuY3Rpb24gbG9hZENvbmZpZyhmdW5jLCBzZWFyY2gpIHtcbiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh4aHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeGh0dHAuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZyA9IHhodHRwLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgICAgICBmdW5jKGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgZ3JhcGhDb25maWcuYXBwQ29uZmlnID0gSlNPTi5wYXJzZShjb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB4aHR0cC5vcGVuKFwiR0VUXCIsIHNlYXJjaCwgdHJ1ZSk7XG4gICAgICAgIHhodHRwLnNlbmQoKTtcbiAgICB9XG5cbiAgICBsb2FkQ29uZmlnKGRpc3BDb25maWcsIFwiLi4vZnVuY01hY2hpbmVTZXR0aW5ncy5qc29uXCIpO1xuIiwidmFyIGxhc3RTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW2RvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aCAtIDFdO1xuXG4vLyBUT0RPOiBGdW5jdGlvbiBtYWNoaW5lIGluXG5cbi8vQWxwaGEgSUQgaXMgdG8gaWRlbnRpZnkgdGhlIGRpZmZlcmVudCBhbmltYXRpb25zIHRoYXQgY291bGQgaGFwcGVuIGluIHRoZSBhcHBsaWNhdGlvblxudmFyIGFscGhhaWQgPSBbJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCcsICdpJywgJ2onLCAnaycsICdsJywgJ20nLCAnbicsICdvJywgJ3AnLCAncScsICdyJ10sXG4gICAgc3RhdHVzQmFyID0gd2FuZC5xdWVyQXBuZHIoXCIjc3RhdHVzIHBcIiksXG4gICAgc3RhcnRpbmdEYXRhID0gW107XG5cbi8qKioqKioqKlwiQ09OU1RSVUNUT1JcIiAobm90IGV4YWN0bHkpIGZ1bmN0aW9ucyoqKioqKioqKiovXG5mdW5jdGlvbiBhbmlDb25maWcoYmVnQ29vckRhdGEsIGVuZENvb3JEYXRhLCBudW0sIGFscGhhaWQsIGkpIHtcbiAgICB2YXIgYW5pbWF0ZUNvbmZpZyA9IHt9O1xuICAgIGFuaW1hdGVDb25maWcuYmVnQ29vckRhdGEgPSBiZWdDb29yRGF0YTtcbiAgICBhbmltYXRlQ29uZmlnLmVuZENvb3JEYXRhID0gZW5kQ29vckRhdGE7XG4gICAgYW5pbWF0ZUNvbmZpZy5udW0gPSBudW07XG4gICAgYW5pbWF0ZUNvbmZpZy5hbHBoYWlkID0gYWxwaGFpZDtcbiAgICBhbmltYXRlQ29uZmlnLmRlbGF5ID0gaTtcbiAgICByZXR1cm4gYW5pbWF0ZUNvbmZpZztcbn1cblxuZnVuY3Rpb24gYW5pbWF0aW9uVGVtcGxhdGUoYW5pbWF0ZUNvbmZpZykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBzdGFydFRvcE9mZiA9IGFuaW1hdGVDb25maWcuYmVnQ29vckRhdGEudG9wICsgNSxcbiAgICAgICAgc3RhcnRSaWdodE9mZiA9IGFuaW1hdGVDb25maWcuYmVnQ29vckRhdGEucmlnaHQgLSAzMCxcbiAgICAgICAgZW5kVG9wT2ZmID0gYW5pbWF0ZUNvbmZpZy5lbmRDb29yRGF0YS50b3AsXG4gICAgICAgIGVuZFJpZ2h0T2ZmID0gYW5pbWF0ZUNvbmZpZy5lbmRDb29yRGF0YS5yaWdodCxcbiAgICAgICAgaGlnaHdheVBhdGggPSAyNDYsXG4gICAgICAgIG51bUNvbnRhaW5lciA9IHdhbmQucXVlckFwbmRyKFwiI251bUNvbnRhaW5lclwiKTtcbiAgICBhbmltYXRlQ29uZmlnLm51bS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBhbmltYXRlQ29uZmlnLm51bS5zdHlsZS50b3AgPSBgJHtzdGFydFRvcE9mZn1weGA7XG4gICAgYW5pbWF0ZUNvbmZpZy5udW0uc3R5bGUubGVmdCA9IGAke3N0YXJ0UmlnaHRPZmZ9cHhgO1xuICAgIHdhbmQuYXBuZHIobnVtQ29udGFpbmVyLCBhbmltYXRlQ29uZmlnLm51bSk7XG4gICAgbGFzdFNoZWV0Lmluc2VydFJ1bGUoYEBrZXlmcmFtZXMgdG9GdW5jTWFjaGluZSR7YW5pbWF0ZUNvbmZpZy5hbHBoYWlkfSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCUge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7c3RhcnRUb3BPZmZ9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7c3RhcnRSaWdodE9mZn1weDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMzMlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke3N0YXJ0VG9wT2ZmfXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke2hpZ2h3YXlQYXRofXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA2NiUge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7ZW5kVG9wT2ZmfXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke2hpZ2h3YXlQYXRofXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA5MCUge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke2VuZFRvcE9mZn1weDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtlbmRSaWdodE9mZn1weDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9YCwgbGFzdFNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgYW5pbWF0ZUNvbmZpZy5udW0uc3R5bGUuYW5pbWF0aW9uID0gYHRvRnVuY01hY2hpbmUke2FuaW1hdGVDb25maWcuYWxwaGFpZH0gM3MgZWFzZS1pbi1vdXQgJHthbmltYXRlQ29uZmlnLmRlbGF5KjEwfXNgO1xuICAgIGFuaW1hdGVDb25maWcubnVtLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgYW5pbWF0ZUNvbmZpZy5udW0uc3R5bGUuekluZGV4ID0gJzEwMCc7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzb2x2ZShhbmltYXRlQ29uZmlnLm51bSk7XG4gICAgICAgIH0sIGFuaW1hdGVDb25maWcuZGVsYXkgKiAzMDAwKTtcbiAgICB9KTtcbn1cblxuLyoqKioqKioqKioqKkFOSU1BVElPTiBGVU5DVElPTlMqKioqKioqKioqKioqKioqKioqKioqL1xuZnVuY3Rpb24gYW5pbWF0ZVRvU3RhdHVzQmFyKCkge1xuICAgIGNvbnNvbGUubG9nKFwiQW5pbWF0ZSB0byBzdGF0dXMgYmFyIGFuZCBwYXNzIHRoZSBpbmZvcm1hdGlvbiB0byB0aGUgZ3JhcGggZnVuY3Rpb25cIik7XG5cbiAgICAvL1Nob3cgZ3JhcGggY2hlY2tib3hcbiAgICAvL0FuaW1hdGlvbiBjaGVja2JveFxuICAgIC8vRXF1YXRpb25cbiAgICAvL1dpbmRvdyBsaW1pdHNcbiAgICAvL1ggYW5kIFkgdmFsdWVcblxuICAgIC8vZ3JhcGhJdCgpO1xufVxuXG5mdW5jdGlvbiBlcXVBcHBlYXIoY2hhbmdlRXF1KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXF1UGFyYS5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgZXF1UGFyYS5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgICAgIGthdGV4LnJlbmRlcihgeSA9ICR7Y2hhbmdlRXF1fWAsIGVxdVBhcmEpO1xuICAgICAgICAgICAgZXF1UGFyYS5zdHlsZS5hbmltYXRpb24gPSAndGV4dEFwcGVhciAxcyBlYXNlLWluLW91dCc7XG4gICAgICAgICAgICBlcXVQYXJhLnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgICAgICAgICAgcmVzb2x2ZShjaGFuZ2VFcXUpO1xuICAgICAgICB9LCAxNTAwKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZXF1QW5pbWVEaXNhcHBlYXIobnVtKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHZhciBjaGFuZ2VFcXU7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBudW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGNoYW5nZUVxdSA9IGdsb2JhbEVxdS5yZXBsYWNlKFwieFwiLCBgKiR7bnVtLmlubmVyVGV4dH1gKTtcblxuICAgICAgICAgICAgc3RhdHVzQmFyLmlubmVyVGV4dCA9IFwiXCI7XG4gICAgICAgICAgICBzdGF0dXNCYXIuaW5uZXJUZXh0ID0gXCI+PiBDYWxjdWxhdGluZ1wiO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlcXVQYXJhLnN0eWxlLmFuaW1hdGlvbiA9ICd0ZXh0RGlzYXBwZWFyIDEuNXMgZWFzZS1pbi1vdXQnO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoY2hhbmdlRXF1KTtcbiAgICAgICAgICAgIH0sIDE1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBudW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNoYW5nZUVxdSA9IG1hdGguZXZhbChudW0pO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlcXVQYXJhLnN0eWxlLmFuaW1hdGlvbiA9ICd0ZXh0RGlzYXBwZWFyIDEuNXMgZWFzZS1pbi1vdXQnO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoY2hhbmdlRXF1KTtcbiAgICAgICAgICAgIH0sIDE1MDApO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFucyhhbnMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgbnVtQ29udGFpbmVyID0gd2FuZC5xdWVyQXBuZHIoXCIjbnVtQ29udGFpbmVyXCIpLFxuICAgICAgICBudW0gPSB3YW5kLmNydEVsbShcInBcIiwgYW5zLnRvU3RyaW5nKCkpO1xuICAgIG51bUNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZ1bmNNYWNoQ29vciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiA1NSxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDMwMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW5kQ29vckRhdGEgPSB7fTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZW5kQ29vckRhdGEudG9wID0gc3RhcnRpbmdEYXRhWzBdLnRvcCArIDU7XG4gICAgICAgICAgICBlbmRDb29yRGF0YS5yaWdodCA9IHN0YXJ0aW5nRGF0YVswXS5yaWdodDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGFuaW1hdGVDb25maWcgPSBhbmlDb25maWcoZnVuY01hY2hDb29yLCBlbmRDb29yRGF0YSwgbnVtLCAnenonLCAwKTtcblxuICAgICAgICAgICAgc3RhcnRpbmdEYXRhLnBvcCgpO1xuICAgICAgICAgICAgcmVzb2x2ZShhbmltYXRlQ29uZmlnKTtcbiAgICAgICAgfSwgMTUwMCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGFuaW1hdGUoaSwgYXcpIHtcbiAgICB2YXIgbnVtID0gd2FuZC5jcnRFbG0oXCJwXCIsIGF3W2ldLm51bSksXG4gICAgICAgIGZ1bmNNYWNoQ29vciA9IHtcbiAgICAgICAgICAgIHRvcDogNTUsXG4gICAgICAgICAgICByaWdodDogMzAwXG4gICAgICAgIH0sXG4gICAgICAgIGFuaW1hdGVDb25maWcgPSBhbmlDb25maWcoYXdbaV0uY29vckRhdGEsIGZ1bmNNYWNoQ29vciwgbnVtLCBhbHBoYWlkW2ldLCBpKTtcblxuICAgIHN0YXJ0aW5nRGF0YS5wdXNoKGF3W2ldLmNvb3JEYXRhKTtcblxuICAgIGFuaW1hdGlvblRlbXBsYXRlKGFuaW1hdGVDb25maWcpXG4gICAgICAgIC50aGVuKGVxdUFuaW1lRGlzYXBwZWFyKVxuICAgICAgICAudGhlbihlcXVBcHBlYXIpXG4gICAgICAgIC50aGVuKGVxdUFuaW1lRGlzYXBwZWFyKVxuICAgICAgICAudGhlbihlcXVBcHBlYXIpXG4gICAgICAgIC50aGVuKGNyZWF0ZUFucylcbiAgICAgICAgLnRoZW4oYW5pbWF0aW9uVGVtcGxhdGUpO1xufVxuXG4vL0hhbmRsZSBhbGwgQ1NTIGFuaW1hdGlvbnNcbmZ1bmN0aW9uIGFuaW1hdG9yQ29udHJvbChhdywgYW5pKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIG51bUNvbnRhaW5lciA9IHdhbmQucXVlckFwbmRyKFwiI251bUNvbnRhaW5lclwiKTtcbiAgICBudW1Db250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYW5pbWF0ZShpLCBhdyk7XG4gICAgfVxufSIsIihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvL3JlZ2lzdGVyIGFsbCBpbnB1dHMgb24gdGhlIGFwcGxpY2F0aW9uXG4gICAgdmFyIGlucHV0T3B0ID0gW1wiaW5wdXQxXCIsIFwiaW5wdXQyXCIsIFwiaW5wdXQzXCIsIFwiaW5wdXQ0XCIsIFwiaW5wdXQ1XCIsIFwiaW5wdXQ2XCIsIFwiaW5wdXQ3XCIsIFwiaW5wdXQ4XCIsIFwiaW5wdXQ5XCIsIFwiaW5wdXQxMFwiLCBcImlucHV0MTFcIiwgXCJpbnB1dDEyXCIsIFwiaW5wdXQxM1wiLCBcImlucHV0MTRcIiwgXCJpbnB1dDE1XCIsIFwiaW5wdXQxNlwiLCBcImlucHV0MTdcIiwgXCJpbnB1dDE4XCIsIFwiaW5wdXQxOVwiXSxcbiAgICAgICAgYW5pbWF0ZVdhaXQgPSBbXTtcblxuICAgIC8qKioqRE9DVU1FTlQgT05DSEFOR0UgRVZFTlQgSEFORExFUioqKiovXG4gICAgZG9jdW1lbnQub25jaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS50YXJnZXQubG9jYWxOYW1lID09PSBcInNlbGVjdFwiKSB7XG4gICAgICAgICAgICAvL2NoYW5nZVBsb3QgZnVuY3Rpb24gaW4gYWpheC5qc1xuICAgICAgICAgICAgY2hhbmdlUGxvdChlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqKioqRE9DVU1FTlQgQ0xJQ0sgSEFORExFUioqKioqL1xuICAgIGRvY3VtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiR28hXCIpIHtcbiAgICAgICAgICAgIGFuaW1hdGVXYWl0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0T3B0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gd2FuZC5xdWVyQXBuZHIoYFtuYW1lPScke2lucHV0T3B0W2ldfSddYCk7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmlEYXRhID0ge307XG4gICAgICAgICAgICAgICAgICAgIGFuaURhdGEuY29vckRhdGEgPSBpbnB1dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgYW5pRGF0YS5udW0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZVdhaXQucHVzaChhbmlEYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAvL2dyYXBoQ29uZmlnIGxvY2F0ZWQgaW4gQUpBWC5qc1xuICAgICAgICAgICAgICAgICAgICBncmFwaENvbmZpZy5hbmlEYXRhID0gYW5pRGF0YVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFuaW1hdG9yQ29udHJvbChhbmltYXRlV2FpdCk7XG4gICAgICAgIH1cbiAgICB9O1xufSgpKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKioqKlRBQkxFIE1BS0VSKioqKi9cbiAgICB2YXIgdGJvZHkgPSB3YW5kLnF1ZXJBcG5kcihcInRib2R5XCIpLFxuICAgICAgICB0ZDEsXG4gICAgICAgIHRkMixcbiAgICAgICAgdHIsXG4gICAgICAgIGlucHV0LFxuICAgICAgICByb3dDb3VudCA9IDE5O1xuXG4gICAgZm9yICh2YXIgaiA9IDE7IGogPD0gcm93Q291bnQ7IGorKykge1xuICAgICAgICBpbnB1dCA9IHdhbmQuY3J0RWxtKFwiaW5wdXRcIik7XG4gICAgICAgIHRkMSA9IHdhbmQuY3J0RWxtKFwidGRcIik7XG4gICAgICAgIHRkMiA9IHdhbmQuY3J0RWxtKFwidGRcIik7XG4gICAgICAgIHRyID0gd2FuZC5jcnRFbG0oXCJ0clwiKTtcblxuICAgICAgICBpbnB1dC5uYW1lID0gYGlucHV0JHtqfWA7XG4gICAgICAgIGlucHV0LnR5cGUgPSAnbnVtYmVyJztcblxuICAgICAgICB3YW5kLmFwbmRyKHRkMSwgaW5wdXQpO1xuICAgICAgICB3YW5kLmFwbmRyKHRyLCBbdGQxLCB0ZDJdKTtcbiAgICAgICAgd2FuZC5hcG5kcih0Ym9keSwgdHIpO1xuICAgIH1cbn0oKSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
