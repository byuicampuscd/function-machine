"use strict";!function(){for(var t,a,d,p,r=$("tbody"),n=10,e=1;e<=n;e++)p=$("<input>"),t=$("<td></td>"),a=$("<td></td>"),d=$("<tr></tr>"),$(d).attr("id","row"+e),$(p).attr("name","input"+e).attr("type","number"),$(a).attr("id","yval"+e),$(t).append(p),$(d).append(t).append(a),$(r).append(d)}();
"use strict";var plotGraph=function(){function t(t){return function(e){var n=(0).toFixed(2);return function(e){var a=t.x*e;this.textContent="( "+a.toFixed(2)+", "+n+")"}}}function e(t){return function(){var e=t.x,n=t.y;return function(t){this.textContent="( "+e+", "+(n*t).toFixed(2)+")"}}}function n(t){return"graphPoint"+t}function a(t){var e=d3.selectAll(u).append("g").attr("class","point").attr("id",n(t.id));return e.append("circle").attr("r",4).attr("cx",0).attr("cy",0),e.append("text").text("(0, 0)").attr("x",5).attr("y",15),e.attr("transform","translate("+d(0)+" "+p(0)+")"),e}function r(r,i){var o,c,s=r.datapoints[r.currentRound];document.querySelectorAll(u+" .graph .line").length>0;r.datapoints.forEach(function(t){t.updatePoint&&d3.select("#"+n(t.id)).remove()}),r.graphOpt.graphHide?d3.select(u+" .graph .line").attr("display","none"):d3.select(u+" .graph .line").attr("display","inline"),s.updatePoint?(o=a(s),r.graphOpt.duration<=.5?(o.attr("transform","translate("+d(s.x)+" "+p(s.y)+")"),o.select("text").text("("+s.x+", "+s.y+")"),i(r)):(c=o.transition().duration(1e3*r.graphOpt.duration).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+p(0)+")"),c.select("text").tween("text",t(s)),c.transition().duration(1e3*r.graphOpt.duration).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+p(s.y)+")").each("end",function(){i(r)}).select("text").tween("text",e(s)))):i(r)}function i(t,e){var n=t.graphOpt,a={target:e,data:[{fn:n.equation,skipTip:!0}],xAxis:{domain:[n.view.x.min,n.view.x.max]},yAxis:{domain:[n.view.y.min,n.view.y.max]},disableZoom:!0,grid:!0,annotations:[{x:0,text:"y axis"},{y:0,text:"x axis"}]};o=e,u=o+" .content",c=n.equation,s=functionPlot(a),d=s.meta.xScale,p=s.meta.yScale,d3.selectAll(u+" .point").remove()}var o,u,c,s,d,p;return{update:r,setup:i}}();
"use strict";$(document).ready(function(){function t(t,e){var n=JSON.stringify(e),i=$("<option></option>").append(t.name);$(i).val(t.equation).attr("data-profOpt",n),$("select").append(i)}var e=[];if(""==location.search)e.push("file=funcMachineSettings");else{var n=location.search.substring(1);e=n.split("&")}var i={};e.forEach(function(t){var e=t.split("=");i[e[0]]=e[1]}),console.log(e),$.getJSON(i.file+".json",function(e){var n;n=i.load?e[i.load]:e.general,$("#title").html(n.title),$("#instructionText").html(n.instructions),window.professorConfigFile=n.equations,$.each(n.equations,function(e,n){var i={graphOpt:n};t(n,i),0===e&&(plotGraph.setup(i,"#graph"),document.querySelector(".graph").firstChild.style.display="none",$("input#showGraph[type='checkbox']").click(function(t){var e=t.target.checked;e?document.querySelector(".graph").firstChild.style.display="block":document.querySelector(".graph").firstChild.style.display="none"}),changePlot(n.equation))})}).fail(function(){$("#status p").append("Add a query string")})});
"use strict";function runAnimation(n,t){return function(a){var e=a.datapoints[a.currentRound],i=e.element;return new Promise(function(e){$(i).html(t).css({animation:""+n+a.currentRound+" "+aniDuration+"s ease-in-out"}).one("animationend",function(n){e(a)})})}}function statusMessage(n){var t=$("#status p");return t.html("").css({fontWeight:"normal",color:"black"}),function(a){return new Promise(function(e){t.html(n),e(a)})}}function replaceXEqu(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textDisappear "+.5*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",0),t(n)})})}function showEvaluateEqu(n){var t=n.datapoints[n.currentRound],a=t.changeEqu;return new Promise(function(t){n.graphOpt.hideEquation?t(n):(katex.render(""+a,equPara),$(equPara).css("animation","textAppear "+.5*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)}))})}function showYAns(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){n.graphOpt.hideEquation?a(n):$(equPara).css("animation","textDisappear "+.5*aniDuration+"s ease-in-out").one("animationend",function(){$(equPara).css("opacity",0),katex.render(""+t.y,equPara),a(n)})})}function showEquationAgain(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textAppear "+.5*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)})})}function placeYValue(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){var e=$("td#yval"+(t.id+1))[0];$(e).html(""),$(e).append("<p>"+t.y+"</p>"),a(n)})}function resetRound(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textDisappear "+.15*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",0),katex.render(""+profOpt.latex,equPara),t(n)})})}function showDefaultEqu(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textAppear "+.15*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)})})}function plotter(n){return new Promise(function(t){plotGraph.update(n,function(){t(n)})})}function updateRound(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){n.currentRound+=1,t.updatePoint=!1,a(n)})}function animateFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(./img/functionMachineAni.gif)"}),t(n)})}function stopAniFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(./img/functionMachineStill.gif)"}),t(n)})}function miniAni(n){return new Promise(function(t){var a=n.datapoints[n.currentRound],e=a.y,i=$("<p>"+e+"</p>");$(i).css({fontSize:"20px"}),$("body").append(i),i.css({position:"absolute",opacity:0,left:630,top:160}).animate({opacity:1,top:200},function(a){i.css({display:"none"}),t(n)})})}function aniPromiseChain(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(runAnimation("xToMachine",n.x)).then(animateFuncMachine).then(statusMessage("Calculating")).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(showEquationAgain).then(stopAniFuncMachine).then(statusMessage("")).then(miniAni).then(runAnimation("machineToY",n.y)).then(placeYValue).then(runAnimation("yToStatusBar","("+n.x+","+n.y+")")).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter).then(statusMessage("")).then(resetRound).then(showDefaultEqu)),t=t.then(updateRound)})}function animateHide(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(placeYValue).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter)),t=t.then(updateRound)})}function animatorControl(n){var t=$("#numContainer"),a=Promise.resolve(n);t.innerHTML="",.5===aniDuration?animateHide(n,a):aniPromiseChain(n,a)}var equPara=$("#functionMachine #equ")[0],rangeSpeed=$("#animate").val(),aniDuration=5/rangeSpeed;$("#animate").change(function(n){aniDuration=5/n.target.value});
"use strict";function checkConfig(t){var n;return $.each(professorConfigFile,function(e,o){o.equation===t&&(n=o)}),n}function clearValues(){var t=$("input[type='number']"),n=$("tr td:nth-of-type(2)");t.each(function(t,n){n.value=""}),n.each(function(t,n){n.innerHTML=""})}function changePlot(t){xMemory=[],clearValues(),window.profOpt=checkConfig(t);var n=$("#functionMachine #equ")[0];$(n).empty(),window.profOpt.hideEquation===!1?katex.render(window.profOpt.latex,n):window.profOpt.hideEquation===!0&&$(n).append("<h2>Mystery Equation</h2>").css({paddingTop:"5px"})}function stairStep(t){var n=280,e=document.styleSheets[document.styleSheets.length-1];e.insertRule("@keyframes "+t.name+" {\n                            0% {\n                                opacity: 1;\n                                top: "+t.startTopOff+"px;\n                                left: "+t.startLeftOff+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+t.startTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            66% {\n                                top: "+t.endTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+t.endTopOff+"px;\n                                left: "+t.endLeftOff+"px;\n                            }\n                        }",e.cssRules.length)}function makeXToMachine(t,n){stairStep({startTopOff:t.top+10,startLeftOff:t.left+30,endTopOff:150,endLeftOff:450,name:"xToMachine"+n})}function makeMachineToY(t,n){stairStep({startTopOff:200,startLeftOff:630,endTopOff:t.top+10,endLeftOff:t.right+5,name:"machineToY"+n})}function makeYToStatusBar(t,n){stairStep({startTopOff:t.top+5,startLeftOff:t.right+10,endTopOff:50,endLeftOff:400,name:"yToStatusBar"+n})}function UserException(t,n){this.message=t,this.errorNum=n,this.name="UserException"}function setUpObject(t,n,e){t.each(function(t){var o,a,i=$(this).val();if(i){if(o=+i,a=o.toFixed(profOpt.rounding),$(this).val(a),!(profOpt.view.x.min<=a&&a<=profOpt.view.x.max))throw new UserException("out of window",i);var r=n.equation.replace(/x/g,"("+a+")"),p=math.eval(r);if("number"!=typeof p)throw new UserException("out of domain",i);var u=(this.getBoundingClientRect(),{x:a,y:p.toFixed(profOpt.rounding),id:t,changeEqu:profOpt.latex.replace("x","("+a+")"),updatePoint:xMemory[t]!==a,element:$("#numContainer p").get(t)});if(1/0===p)throw new UserException("undefined value",i);u.updatePoint&&$("td#yval"+(t+1)).html(""),xMemory[t]=a,e.datapoints.push(u)}})}function startFuncMach(){var t=$("input[type='number']"),n={equation:profOpt.equation,hideEquation:profOpt.hideEquation,view:profOpt.view,duration:aniDuration},e={datapoints:[],currentRound:0,graphOpt:n};try{setUpObject(t,n,e),animatorControl(e)}catch(o){xMemory=[],$("#status p").html(o.errorNum+" x-value "+o.message+".").css({fontWeight:"bold",color:"#b62727"})}}function cleanInputs(){var t=$("input[type='number']"),n=[];t.each(function(t){var e=$(this).val();""!==e&&(n.push(e),$(this).val(""))}),t.each(function(t){t<n.length?$(this).val(n[t]):$(this).val("")})}for(var xMemory=[],inputs=document.querySelectorAll("input[type='number']"),inputCount=inputs.length,runMaster=!0,run=!0,i=0;i<inputs.length;i++)inputs[i].onkeyup=function(t){t.srcElement.value;69===t.which&&(t.target.value="",$("#status p").html("Can't do that bro!"))};for(var i=0;i<inputCount;i++){xMemory[i]=null;var inputCoor=inputs[i].getBoundingClientRect();makeXToMachine(inputCoor,i),makeMachineToY(inputCoor,i),makeYToStatusBar(inputCoor,i),$("#numContainer").append($("<p></p>"))}$("#closeHelp").click(function(t){$(t.target.parentElement).fadeOut(100),$("#shade").fadeOut(200),localStorage.firstTimeFunctionMachine=!1}),$("#openHelp").click(function(t){$("#instructions").fadeIn(100),$("#shade").fadeIn(1e3)}),$(document).ready(function(t){try{var n=localStorage.firstTimeFunctionMachine}catch(t){console.error(t)}"false"===n&&($("#instructions").hide(),$("#shade").hide())}),$("select").change(function(t){var n=$('option[value="'+t.target.value+'"]'),e=JSON.parse(n.attr("data-profopt"));plotGraph.setup(e,"#graph"),changePlot(t.target.value)}),$(document).keypress(function(t){13==t.which&&runMaster&&(cleanInputs(),startFuncMach())}),$("input[type='button'][value='Go!']").click(function(){runMaster&&(cleanInputs(),startFuncMach())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbG90R3JhcGguanMiLCJhamF4LmpzIiwiYW5pbWF0b3Jjb250cm9sLmpzIiwiZXZlbnRzLmpzIl0sIm5hbWVzIjpbInRkMSIsInRkMiIsInRyIiwiaW5wdXQiLCJ0Ym9keSIsIiQiLCJyb3dDb3VudCIsImoiLCJhdHRyIiwiYXBwZW5kIiwicGxvdEdyYXBoIiwidXBkYXRlVGV4dFgiLCJjdXJyZW50UG9pbnQiLCJkIiwiemVybyIsInRvRml4ZWQiLCJ0IiwibG9jYXRpb24iLCJ4IiwidGhpcyIsInRleHRDb250ZW50IiwidXBkYXRlVGV4dFkiLCJ4Um91bmRlZCIsInlWYWwiLCJ5IiwibWFrZVBvaW50SWQiLCJudW1JbiIsIm1ha2VQb2ludEdyb3VwIiwicG9pbnRHcm91cCIsImQzIiwic2VsZWN0QWxsIiwiZG90TG9jYXRpb24iLCJpZCIsInRleHQiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJ1cGRhdGUiLCJhbmlPcHRpb25zIiwiY2FsbGJhY2siLCJ0cmFuc2l0aW9uIiwiZGF0YXBvaW50cyIsImN1cnJlbnRSb3VuZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImZvckVhY2giLCJwb2ludCIsInVwZGF0ZVBvaW50Iiwic2VsZWN0IiwicmVtb3ZlIiwiZ3JhcGhPcHQiLCJncmFwaEhpZGUiLCJkdXJhdGlvbiIsImVhc2UiLCJ0d2VlbiIsImVhY2giLCJzZXR1cCIsInNlbGVjdG9yIiwib3B0c0luIiwiZ3JhcGhPcHRpb25zIiwidGFyZ2V0IiwiZGF0YSIsImZuIiwiZXF1YXRpb24iLCJza2lwVGlwIiwieEF4aXMiLCJkb21haW4iLCJ2aWV3IiwibWluIiwibWF4IiwieUF4aXMiLCJkaXNhYmxlWm9vbSIsImdyaWQiLCJhbm5vdGF0aW9ucyIsImdyYXBoTG9jYXRpb25TZWxlY3RvciIsImN1cnJlbnRFcXVhdGlvbiIsImZ1blBsb3QiLCJmdW5jdGlvblBsb3QiLCJtZXRhIiwicmVhZHkiLCJzaG93UHJvZk9wdGlvbnMiLCJwcm9mT3B0IiwiaW5pdCIsInN0cmluZ2lmaWVkRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvcHQiLCJuYW1lIiwidmFsIiwicXVlcnlWYXJzIiwic2VhcmNoIiwicHVzaCIsInF1ZXJ5U3RyaW5nIiwic3Vic3RyaW5nIiwic3BsaXQiLCJhbGxRdWVyaWVzIiwicXVlcnkiLCJwYWlyIiwiY29uc29sZSIsImxvZyIsImdldEpTT04iLCJmaWxlIiwicmVzdWx0IiwibG9hZCIsImdlbmVyYWwiLCJodG1sIiwidGl0bGUiLCJpbnN0cnVjdGlvbnMiLCJ3aW5kb3ciLCJwcm9mZXNzb3JDb25maWdGaWxlIiwiZXF1YXRpb25zIiwiaSIsInF1ZXJ5U2VsZWN0b3IiLCJmaXJzdENoaWxkIiwic3R5bGUiLCJkaXNwbGF5IiwiY2xpY2siLCJlIiwiY2hlY2tlZCIsImNoYW5nZVBsb3QiLCJmYWlsIiwicnVuQW5pbWF0aW9uIiwidmFsdWUiLCJhbmlTZXR0aW5ncyIsImRhdGFwb2ludCIsIm51bVBhcmEiLCJlbGVtZW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJjc3MiLCJhbmltYXRpb24iLCJhbmlEdXJhdGlvbiIsIm9uZSIsInN0YXR1c01lc3NhZ2UiLCJtZXNzYWdlIiwic3RhdHVzQmFyIiwiZm9udFdlaWdodCIsImNvbG9yIiwicmVwbGFjZVhFcXUiLCJoaWRlRXF1YXRpb24iLCJlcXVQYXJhIiwic2hvd0V2YWx1YXRlRXF1IiwicG9pbnREYXRhIiwiY2hhbmdlRXF1Iiwia2F0ZXgiLCJyZW5kZXIiLCJzaG93WUFucyIsInNob3dFcXVhdGlvbkFnYWluIiwicGxhY2VZVmFsdWUiLCJyZXNldFJvdW5kIiwibGF0ZXgiLCJzaG93RGVmYXVsdEVxdSIsInBsb3R0ZXIiLCJ1cGRhdGVSb3VuZCIsInBsYWNlaG9sZGVyIiwiYW5pbWF0ZUZ1bmNNYWNoaW5lIiwiYmFja2dyb3VuZC1pbWFnZSIsInN0b3BBbmlGdW5jTWFjaGluZSIsIm1pbmlBbmkiLCJ5dmFsdWUiLCJwYXJhIiwiZm9udFNpemUiLCJwb3NpdGlvbiIsIm9wYWNpdHkiLCJsZWZ0IiwidG9wIiwiYW5pbWF0ZSIsImFuaVByb21pc2VDaGFpbiIsImRwcyIsImNoYWluIiwidGhlbiIsImFuaW1hdGVIaWRlIiwiYW5pbWF0b3JDb250cm9sIiwibnVtQ29udGFpbmVyIiwiaW5uZXJIVE1MIiwicmFuZ2VTcGVlZCIsImNoYW5nZSIsImNoZWNrQ29uZmlnIiwiaXRlbSIsImNsZWFyVmFsdWVzIiwieGlucHV0cyIsInlpbnB1dHMiLCJ4TWVtb3J5IiwiZW1wdHkiLCJwYWRkaW5nVG9wIiwic3RhaXJTdGVwIiwib3B0aW9ucyIsImhpZ2h3YXlQYXRoIiwibGFzdFNoZWV0Iiwic3R5bGVTaGVldHMiLCJpbnNlcnRSdWxlIiwic3RhcnRUb3BPZmYiLCJzdGFydExlZnRPZmYiLCJlbmRUb3BPZmYiLCJlbmRMZWZ0T2ZmIiwiY3NzUnVsZXMiLCJtYWtlWFRvTWFjaGluZSIsImlucHV0Q29yZHMiLCJpbmRleCIsIm1ha2VNYWNoaW5lVG9ZIiwicmlnaHQiLCJtYWtlWVRvU3RhdHVzQmFyIiwiVXNlckV4Y2VwdGlvbiIsImVycm9yTnVtIiwic2V0VXBPYmplY3QiLCJ4dmFsIiwicm91bmRpdCIsInh2YWx1ZSIsInJvdW5kaW5nIiwicmVwbGFjZVgiLCJyZXBsYWNlIiwieXZhbCIsIm1hdGgiLCJldmFsIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0IiwiSW5maW5pdHkiLCJzdGFydEZ1bmNNYWNoIiwiY2xlYW5JbnB1dHMiLCJpbnB1dEFycmF5IiwiaW5wdXRWYWx1ZSIsImlucHV0cyIsImlucHV0Q291bnQiLCJydW5NYXN0ZXIiLCJydW4iLCJvbmtleXVwIiwic3JjRWxlbWVudCIsIndoaWNoIiwiaW5wdXRDb29yIiwicGFyZW50RWxlbWVudCIsImZhZGVPdXQiLCJsb2NhbFN0b3JhZ2UiLCJmYWRlSW4iLCJmaXJzdHRpbWUiLCJlcnJvciIsImhpZGUiLCJzZWxlY3RlZCIsInBhcnNlIiwia2V5cHJlc3MiXSwibWFwcGluZ3MiOiJBQUFBLGNBQUMsV0Fh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SCxJQUNBcE8sRUFBRSxpQkFBaUJzTyxPQUNuQnRPLEVBQUUsVUFBVXNPLFVBT3BCdE8sRUFBRSxVQUFVMkssT0FBTyxTQUFVM0QsR0FDekIsR0FBSXVILEdBQVd2TyxFQUFBQSxpQkFBbUJnSCxFQUFFekQsT0FBTzhELE1BQTVCLE1BQ1h6QyxFQUFVRyxLQUFLeUosTUFBTUQsRUFBU3BPLEtBQUssZ0JBRXZDRSxXQUFVOEMsTUFBTXlCLEVBQVMsVUFDekJzQyxXQUFXRixFQUFFekQsT0FBTzhELFNBTXhCckgsRUFBRXFDLFVBQVVvTSxTQUFTLFNBQVV6SCxHQUNaLElBQVhBLEVBQUU4RyxPQUFlSixZQUNqQkwsY0FDQUQsbUJBT1JwTixFQUFFLHFDQUFxQytHLE1BQU0sV0FDckMyRyxZQUNBTCxjQUNBRCIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBNYWtlIHRoZSB3aG9sZSB0YWJsZSBhbmQgY2VsbHMgZm9yIHRoZSBpbnB1dCBib3hlcyBhbmQgdXNlciBpbnRlcmFjdGlvbi5cclxuICAgICovXHJcbiAgICB2YXIgdGJvZHkgPSAkKFwidGJvZHlcIiksXHJcbiAgICAgICAgdGQxLFxyXG4gICAgICAgIHRkMixcclxuICAgICAgICB0cixcclxuICAgICAgICBpbnB1dCxcclxuICAgICAgICByb3dDb3VudCA9IDEwO1xyXG5cclxuICAgIGZvciAodmFyIGogPSAxOyBqIDw9IHJvd0NvdW50OyBqKyspIHtcclxuICAgICAgICBpbnB1dCA9ICQoXCI8aW5wdXQ+XCIpO1xyXG4gICAgICAgIHRkMSA9ICQoXCI8dGQ+PC90ZD5cIik7XHJcbiAgICAgICAgdGQyID0gJChcIjx0ZD48L3RkPlwiKTtcclxuICAgICAgICB0ciA9ICQoXCI8dHI+PC90cj5cIik7XHJcblxyXG4gICAgICAgICQodHIpLmF0dHIoXCJpZFwiLCBgcm93JHtqfWApO1xyXG5cclxuICAgICAgICAkKGlucHV0KS5hdHRyKFwibmFtZVwiLCBgaW5wdXQke2p9YCkuYXR0cihcInR5cGVcIiwgXCJudW1iZXJcIik7XHJcblxyXG4gICAgICAgICQodGQyKS5hdHRyKFwiaWRcIiwgYHl2YWwke2p9YCk7XHJcblxyXG4gICAgICAgICQodGQxKS5hcHBlbmQoaW5wdXQpO1xyXG4gICAgICAgICQodHIpLmFwcGVuZCh0ZDEpLmFwcGVuZCh0ZDIpO1xyXG4gICAgICAgICQodGJvZHkpLmFwcGVuZCh0cik7XHJcbiAgICB9XHJcbn0oKSk7XHJcbiIsIi8qanNsaW50IHBsdXNwbHVzOiB0cnVlLCBicm93c2VyOiB0cnVlLCBkZXZlbDogdHJ1ZSovXHJcbi8qZ2xvYmFsIGQzLCBmdW5jdGlvblBsb3QqL1xyXG52YXIgcGxvdEdyYXBoID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIGdyYXBoTG9jYXRpb25TZWxlY3RvcixcclxuICAgICAgICBkb3RMb2NhdGlvbixcclxuICAgICAgICBjdXJyZW50RXF1YXRpb24sXHJcbiAgICAgICAgZnVuUGxvdCxcclxuICAgICAgICB4U2NhbGUsXHJcbiAgICAgICAgeVNjYWxlLFxyXG4gICAgICAgIGZyZWVJZCA9IDA7XHJcblxyXG4gICAgLy90aGVzZSB0d28gZnVuY3Rpb25zIG1ha2UgdGhlIGZhY3RvcnkgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIGluIHRoZSBhbmltYXRpb25zIGZvciB0aGUgcG9pbnQgbGFiZWxzXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVUZXh0WChjdXJyZW50UG9pbnQpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgdmFyIHplcm8gPSAoMCkudG9GaXhlZCgyKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gY3VycmVudFBvaW50LnggKiB0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IFwiKCBcIiArIGxvY2F0aW9uLnRvRml4ZWQoMikgKyBcIiwgXCIgKyB6ZXJvICsgXCIpXCI7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVUZXh0WShjdXJyZW50UG9pbnQpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHhSb3VuZGVkID0gY3VycmVudFBvaW50LngsXHJcbiAgICAgICAgICAgICAgICB5VmFsID0gY3VycmVudFBvaW50Lnk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGV4dENvbnRlbnQgPSBcIiggXCIgKyB4Um91bmRlZCArIFwiLCBcIiArICh5VmFsICogdCkudG9GaXhlZCgyKSArIFwiKVwiO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFrZVBvaW50SWQobnVtSW4pIHtcclxuICAgICAgICByZXR1cm4gJ2dyYXBoUG9pbnQnICsgbnVtSW47XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFrZVBvaW50R3JvdXAoY3VycmVudFBvaW50KSB7XHJcbiAgICAgICAgdmFyIHBvaW50R3JvdXAgPSBkMy5zZWxlY3RBbGwoZG90TG9jYXRpb24pLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdwb2ludCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIG1ha2VQb2ludElkKGN1cnJlbnRQb2ludC5pZCkpO1xyXG5cclxuICAgICAgICAvL2FkZCB0aGUgY2lyY2xlXHJcbiAgICAgICAgcG9pbnRHcm91cC5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgIC5hdHRyKCdyJywgNClcclxuICAgICAgICAgICAgLmF0dHIoJ2N4JywgMClcclxuICAgICAgICAgICAgLmF0dHIoJ2N5JywgMCk7XHJcblxyXG4gICAgICAgIC8vYWRkIHRoZSBsYWJlbFxyXG4gICAgICAgIHBvaW50R3JvdXAuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLnRleHQoJygwLCAwKScpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgNSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCAxNSk7XHJcbiAgICAgICAgLy9tb3ZlIGl0IHRvICgwLDApXHJcbiAgICAgICAgcG9pbnRHcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB4U2NhbGUoMCkgKyAnICcgKyB5U2NhbGUoMCkgKyAnKScpO1xyXG4gICAgICAgIHJldHVybiBwb2ludEdyb3VwO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZShhbmlPcHRpb25zLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBjdXJyZW50UG9pbnQgPSBhbmlPcHRpb25zLmRhdGFwb2ludHNbYW5pT3B0aW9ucy5jdXJyZW50Um91bmRdLFxyXG4gICAgICAgICAgICBsaW5lSXNQbG90dGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChkb3RMb2NhdGlvbiArICcgLmdyYXBoIC5saW5lJykubGVuZ3RoID4gMCxcclxuICAgICAgICAgICAgcG9pbnRHcm91cCxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbjtcclxuXHJcbiAgICAgICAgLy9jbGVhciBhbnkgcG9pbnRzIHRoYXQgd2lsbCBnZXQgdXBkYXRlZFxyXG4gICAgICAgIGFuaU9wdGlvbnMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCkge1xyXG4gICAgICAgICAgICBpZiAocG9pbnQudXBkYXRlUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnIycgKyBtYWtlUG9pbnRJZChwb2ludC5pZCkpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vY2hlY2sgaWYgd2UgbmVlZCB0byBoaWRlIG9yIHNob3cgdGhlIHBsb3RsaW5lXHJcbiAgICAgICAgaWYgKGFuaU9wdGlvbnMuZ3JhcGhPcHQuZ3JhcGhIaWRlKSB7XHJcbiAgICAgICAgICAgIGQzLnNlbGVjdChkb3RMb2NhdGlvbiArICcgLmdyYXBoIC5saW5lJykuYXR0cignZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZDMuc2VsZWN0KGRvdExvY2F0aW9uICsgJyAuZ3JhcGggLmxpbmUnKS5hdHRyKCdkaXNwbGF5JywgJ2lubGluZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9kb2VzIHRoZSBjdXJyZW50Um91bmQgbmVlZCB0byBiZSB1cGRhdGVkZWQ/XHJcbiAgICAgICAgaWYgKCFjdXJyZW50UG9pbnQudXBkYXRlUG9pbnQpIHtcclxuICAgICAgICAgICAgLy9ub3RoaXRuZyB0byBzZWUgaGVyZSBqdXN0IGtlZXAgb24gbW92aW5nXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGFuaU9wdGlvbnMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vZHJhdyBwb2ludFxyXG4gICAgICAgICAgICBwb2ludEdyb3VwID0gbWFrZVBvaW50R3JvdXAoY3VycmVudFBvaW50KTtcclxuXHJcbiAgICAgICAgICAgIC8vaXMgYW5pbWF0aW9uIG9uP1xyXG4gICAgICAgICAgICBpZiAoYW5pT3B0aW9ucy5ncmFwaE9wdC5kdXJhdGlvbiA8PSAwLjUpIHtcclxuICAgICAgICAgICAgICAgIC8vbW92ZSBpdCBpbnRvIHBsYWNlIHdpdGhvdXQgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgICAgICBwb2ludEdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZShjdXJyZW50UG9pbnQueCkgKyAnICcgKyB5U2NhbGUoY3VycmVudFBvaW50LnkpICsgJyknKTtcclxuICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBsYWJsZVxyXG4gICAgICAgICAgICAgICAgcG9pbnRHcm91cC5zZWxlY3QoJ3RleHQnKS50ZXh0KCcoJyArIGN1cnJlbnRQb2ludC54ICsgJywgJyArIGN1cnJlbnRQb2ludC55ICsgJyknKTtcclxuICAgICAgICAgICAgICAgIC8vY2FsbCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soYW5pT3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy9kcmF3IHBvaW50IHdpdGggYW5pbWFpb25cclxuICAgICAgICAgICAgICAgIC8vRmlyc3QgdHJhbnNpdGlvbiAtIG1vdmUgdGhlIGdyb3VwIGluIHRoZSBYXHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uID0gcG9pbnRHcm91cFxyXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oYW5pT3B0aW9ucy5ncmFwaE9wdC5kdXJhdGlvbiAqIDEwMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLmVhc2UoJ2N1YmljLW91dCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZShjdXJyZW50UG9pbnQueCkgKyAnICcgKyB5U2NhbGUoMCkgKyAnKScpO1xyXG4gICAgICAgICAgICAgICAgLy9zdWIgdHJhbnNpdGlvbiAtIHVwZGF0ZSB0aGUgbGFiZWxcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uc2VsZWN0KCd0ZXh0JykudHdlZW4oJ3RleHQnLCB1cGRhdGVUZXh0WChjdXJyZW50UG9pbnQpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1NlY29uZCB0cmFuc2l0aW9uIC0gbW92ZSB0aGUgZ3JvdXAgaW4gdGhlIFlcclxuICAgICAgICAgICAgICAgIC8vc3ViIHRyYW5zaXRpb24gLSB1cGRhdGUgdGhlIGxhYmVsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihhbmlPcHRpb25zLmdyYXBoT3B0LmR1cmF0aW9uICogMTAwMClcclxuICAgICAgICAgICAgICAgICAgICAuZWFzZSgnY3ViaWMtb3V0JylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeFNjYWxlKGN1cnJlbnRQb2ludC54KSArICcgJyArIHlTY2FsZShjdXJyZW50UG9pbnQueSkgKyAnKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmVhY2goJ2VuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYW5pT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCd0ZXh0JykudHdlZW4oJ3RleHQnLCB1cGRhdGVUZXh0WShjdXJyZW50UG9pbnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXR1cChhbmlPcHRpb25zLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIC8vc3VnYXJcclxuICAgICAgICB2YXIgb3B0c0luID0gYW5pT3B0aW9ucy5ncmFwaE9wdCxcclxuICAgICAgICAgICAgZ3JhcGhPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBzZWxlY3RvcixcclxuICAgICAgICAgICAgICAgIGRhdGE6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgZm46IG9wdHNJbi5lcXVhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBza2lwVGlwOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIHhBeGlzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBbb3B0c0luLnZpZXcueC5taW4sIG9wdHNJbi52aWV3LngubWF4XVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHlBeGlzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBbb3B0c0luLnZpZXcueS5taW4sIG9wdHNJbi52aWV3LnkubWF4XVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVab29tOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZ3JpZDogdHJ1ZSxcclxuXHRcdFx0XHRhbm5vdGF0aW9uczogW3tcclxuXHRcdFx0XHRcdHg6IDAsXHJcblx0XHRcdFx0XHR0ZXh0OiAneSBheGlzJ1xyXG5cdFx0XHRcdH0sIHtcclxuXHRcdFx0XHRcdHk6IDAsXHJcblx0XHRcdFx0XHR0ZXh0OiAneCBheGlzJ1xyXG5cdFx0XHRcdH1dXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vc2F2ZSBzb21lIHRoaW5ncyBmb3IgbGF0ZXJcclxuICAgICAgICBncmFwaExvY2F0aW9uU2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgICAgICBkb3RMb2NhdGlvbiA9IGdyYXBoTG9jYXRpb25TZWxlY3RvciArICcgLmNvbnRlbnQnO1xyXG4gICAgICAgIGN1cnJlbnRFcXVhdGlvbiA9IG9wdHNJbi5lcXVhdGlvbjtcclxuXHJcbiAgICAgICAgLy9tYWtlIHRoZSBwbG90IGFuZCBzY2FsZXNcclxuICAgICAgICBmdW5QbG90ID0gZnVuY3Rpb25QbG90KGdyYXBoT3B0aW9ucyk7XHJcbiAgICAgICAgeFNjYWxlID0gZnVuUGxvdC5tZXRhLnhTY2FsZTtcclxuICAgICAgICB5U2NhbGUgPSBmdW5QbG90Lm1ldGEueVNjYWxlO1xyXG5cclxuICAgICAgICAvL2NsZWFuIG91dCBhbnkgb2xkIHBvaW50cyBmaXJzdFxyXG4gICAgICAgIGQzLnNlbGVjdEFsbChkb3RMb2NhdGlvbiArICcgLnBvaW50JykucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1cGRhdGU6IHVwZGF0ZSxcclxuICAgICAgICBzZXR1cDogc2V0dXBcclxuICAgIH07XHJcbn0oKSk7XHJcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAvKlxyXG4gICAgTG9hZCBRdWVyeSBzdWJzdHJpbmdcclxuICAgICovXHJcbiAgICB2YXIgcXVlcnlWYXJzID0gW107XHJcbiAgICBpZiAobG9jYXRpb24uc2VhcmNoID09IFwiXCIpIHtcclxuICAgICAgICAgICAgLy9EZWZhdWx0IHF1ZXJ5IHN0cmluZyBpZiBub3RoaW5nIHByb3ZpZGVkXHJcbiAgICAgICAgcXVlcnlWYXJzLnB1c2goXCJmaWxlPWZ1bmNNYWNoaW5lU2V0dGluZ3NcIik7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIC8vIEdyYWIgdGhlIHF1ZXJ5IHN0cmluZyBhbmQgb3B0aW9uc1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgIC8vIFNldCBxdWVyeVZhcnMgdG8gYmUgYXJyYXkgb2YgcGFyYW1ldGVyc1xyXG4gICAgICAgIHF1ZXJ5VmFycyA9IHF1ZXJ5U3RyaW5nLnNwbGl0KFwiJlwiKTtcclxuXHJcbiAgICB9XHJcbiAgICB2YXIgYWxsUXVlcmllcyA9IHt9O1xyXG5cclxuICAgIHF1ZXJ5VmFycy5mb3JFYWNoKGZ1bmN0aW9uIChxdWVyeSl7XHJcbiAgICAgICAgdmFyIHBhaXIgPSBxdWVyeS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgYWxsUXVlcmllc1twYWlyWzBdXSA9IHBhaXJbMV07XHJcbiAgICB9KVxyXG5cclxuLy8gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWVyeVZhcnMubGVuZ3RoOyBpKyspIHtcclxuLy8gICAgICAgIHZhciBwYWlyID0gcXVlcnlWYXJzW2ldLnNwbGl0KFwiPVwiKTtcclxuLy8gICAgICAgIGFsbFF1ZXJpZXNbcGFpclswXV0gPSBwYWlyWzFdO1xyXG4vLyAgICB9XHJcbmNvbnNvbGUubG9nKHF1ZXJ5VmFycyk7XHJcbiAgICBmdW5jdGlvbiBzaG93UHJvZk9wdGlvbnMocHJvZk9wdCwgaW5pdCkge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgQXBwZW5kIHRoZSBwcm9mZXNzb3IncyBjaG9zZW4gZXF1YXRpb25zIHRvIHRoZSBhcHBsaWNhdGlvblxyXG4gICAgICAgICovXHJcblxyXG4gICAgICAgIHZhciBzdHJpbmdpZmllZERhdGEgPSBKU09OLnN0cmluZ2lmeShpbml0KSxcclxuICAgICAgICAgICAgb3B0ID0gJChcIjxvcHRpb24+PC9vcHRpb24+XCIpLmFwcGVuZChwcm9mT3B0Lm5hbWUpO1xyXG5cclxuICAgICAgICAkKG9wdClcclxuICAgICAgICAgICAgLnZhbChwcm9mT3B0LmVxdWF0aW9uKVxyXG4gICAgICAgICAgICAuYXR0cihcImRhdGEtcHJvZk9wdFwiLCBzdHJpbmdpZmllZERhdGEpO1xyXG5cclxuICAgICAgICAkKFwic2VsZWN0XCIpXHJcbiAgICAgICAgICAgIC5hcHBlbmQob3B0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgTG9hZCB0aGUgcHJvZmVzc29yIGNvbmZpZ3VyYXRpb24gZmlsZVxyXG5cclxuICAgIGdlbmVyYWwgcXVlcnk6ID9maWxlPWZ1bmNNYWNoaW5lU2V0dGluZ3MmbG9hZD1nZW5lcmFsXHJcbiAgICAqL1xyXG5cclxuICAgICQuZ2V0SlNPTihhbGxRdWVyaWVzLmZpbGUgKyBcIi5qc29uXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBcImxvYWRcIiBxdWVyeSwgbG9hZCBpdCwgb3RoZXJ3aXNlIGxvYWQgdGhlIGdlbmVyYWwgb3B0aW9uLlxyXG4gICAgICAgIGlmIChhbGxRdWVyaWVzLmxvYWQpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gZGF0YVthbGxRdWVyaWVzLmxvYWRdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGRhdGEuZ2VuZXJhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoXCIjdGl0bGVcIikuaHRtbChyZXN1bHQudGl0bGUpO1xyXG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25UZXh0XCIpLmh0bWwocmVzdWx0Lmluc3RydWN0aW9ucyk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5wcm9mZXNzb3JDb25maWdGaWxlID0gcmVzdWx0LmVxdWF0aW9ucztcclxuXHJcbiAgICAgICAgJC5lYWNoKHJlc3VsdC5lcXVhdGlvbnMsIGZ1bmN0aW9uIChpLCBwcm9mT3B0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5pdCA9IHtcclxuICAgICAgICAgICAgICAgIGdyYXBoT3B0OiBwcm9mT3B0XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzaG93UHJvZk9wdGlvbnMocHJvZk9wdCwgaW5pdCk7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBEaXNwbGF5IHRoZSBkZWZhdWx0IGVxdWF0aW9uIHRvIHRoZSBmdW5jdGlvbiBtYWNoaW5lXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvL2luIGV2ZW50cy5qc1xyXG4gICAgICAgICAgICAgICAgcGxvdEdyYXBoLnNldHVwKGluaXQsIFwiI2dyYXBoXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JhcGhcIikuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgLypDaGVja2JveCBvbmNsaWNrIGV2ZW50Ki9cclxuICAgICAgICAgICAgICAgICQoXCJpbnB1dCNzaG93R3JhcGhbdHlwZT0nY2hlY2tib3gnXVwiKS5jbGljayhlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZCA9IGUudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmFwaFwiKS5maXJzdENoaWxkLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmFwaFwiKS5maXJzdENoaWxkLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIGNoYW5nZVBsb3QocHJvZk9wdC5lcXVhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KS5mYWlsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiI3N0YXR1cyBwXCIpLmFwcGVuZChcIkFkZCBhIHF1ZXJ5IHN0cmluZ1wiKVxyXG4gICAgfSk7XHJcblxyXG59KTtcclxuIiwidmFyIGVxdVBhcmEgPSAkKFwiI2Z1bmN0aW9uTWFjaGluZSAjZXF1XCIpWzBdLFxyXG4gICAgcmFuZ2VTcGVlZCA9ICQoXCIjYW5pbWF0ZVwiKS52YWwoKSxcclxuICAgIGFuaUR1cmF0aW9uID0gKDEgKiA1KSAvIHJhbmdlU3BlZWQ7XHJcblxyXG4kKCcjYW5pbWF0ZScpLmNoYW5nZShlID0+IHtcclxuICAgIGFuaUR1cmF0aW9uID0gKDEgKiA1KSAvIGUudGFyZ2V0LnZhbHVlO1xyXG59KVxyXG5cclxuZnVuY3Rpb24gcnVuQW5pbWF0aW9uKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAvKlxyXG4gICAgVGhpcyBpcyBhIGZ1bmN0aW9uIGZhY3Rvcnkgd2hpY2ggd2lsbCBncmFiIHRoZVxyXG4gICAgbmVjZXNzYXJ5IGRhdGEgYW5kIHRoZW4gcmV0dXJuIHRoZSBmdW5jdGlvbiBwcm9taXNlXHJcbiAgICAqL1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGFuaW1hdGlvbihhbmlTZXR0aW5ncykge1xyXG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgICAgIHZhciBkYXRhcG9pbnQgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXHJcbiAgICAgICAgICAgIG51bVBhcmEgPSBkYXRhcG9pbnQuZWxlbWVudDtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICBNYWtlIHRoZSBwcm9taXNlIHRoYXQgd2hlbiB0aGUgZHluYW1pY1xyXG4gICAgICAgIGFuaW1hdGlvbiBwYXRoIGlzIGRvbmUgdGhlbiB0aGlzIHByb21pc2UgaXMgZmluaXNoZWRcclxuICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAkKG51bVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuaHRtbCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYW5pbWF0aW9uXCI6IGAke25hbWV9JHthbmlTZXR0aW5ncy5jdXJyZW50Um91bmR9ICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGAsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uZSgnYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhdHVzTWVzc2FnZShtZXNzYWdlKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIC8qXHJcbiAgICBUaGlzIGlzIGEgZnVuY3Rpb24gZmFjdG9yeSB3aGljaCB3aWxsIGdyYWIgdGhlXHJcbiAgICBuZWNlc3NhcnkgZGF0YSBhbmQgdGhlbiByZXR1cm4gdGhlIGZ1bmN0aW9uIHByb21pc2VcclxuICAgICovXHJcbiAgICB2YXIgc3RhdHVzQmFyID0gJChcIiNzdGF0dXMgcFwiKTtcclxuXHJcbiAgICBzdGF0dXNCYXJcclxuICAgICAgICAuaHRtbCgnJylcclxuICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgXCJmb250V2VpZ2h0XCI6IFwibm9ybWFsXCIsXHJcbiAgICAgICAgICAgIFwiY29sb3JcIjogXCJibGFja1wiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhbmlTZXR0aW5ncykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICBzdGF0dXNCYXIuaHRtbChtZXNzYWdlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVwbGFjZVhFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBSZXBsYWNlIHRoZSB4IGluIHRoZSBkaXNhcHBlYXJlZCBlcXVhdGlvbiB3aXRob3V0IGhhdmluZyB0aGUgeSBkaXNhcHBlYXIuXHJcbiAgICAqL1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgaWYgKGFuaVNldHRpbmdzLmdyYXBoT3B0LmhpZGVFcXVhdGlvbikge1xyXG4gICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0RGlzYXBwZWFyICR7YW5pRHVyYXRpb24qMC41fXMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RXZhbHVhdGVFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBHZXQgdGhlIHkgYW5zd2VyIGFuZCB0aGUgeC1jaGFuZ2VkIGVxdWF0aW9uXHJcbiAgICAqL1xyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcclxuICAgICAgICBjaGFuZ2VFcXUgPSBwb2ludERhdGEuY2hhbmdlRXF1O1xyXG5cclxuICAgIC8qXHJcbiAgICBTaG93IHRoZSBuZXcgZXF1YXRpb24gd2l0aCB0aGUgcmVwbGFjZWQgeC12YWx1ZSBlcXVhdGlvblxyXG4gICAgKi9cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGlmIChhbmlTZXR0aW5ncy5ncmFwaE9wdC5oaWRlRXF1YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke2NoYW5nZUVxdX1gLCBlcXVQYXJhKTtcclxuICAgICAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cmF0aW9uKjAuNX1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93WUFucyhhbmlTZXR0aW5ncykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgLypcclxuICAgIEdldCB0aGUgY3VycmVudCByb3VuZCBhbmQgY3VycmVudCBkYXRhIHBvaW50c1xyXG4gICAgKi9cclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XHJcblxyXG4gICAgLypcclxuICAgIEFuaW1hdGUgdGhlIG5ldyB5IHZhbHVlIHRvIHRoZSBjb29yZGluYXRlZCB5IGNvbHVtbiBhbmQgb25jZVxyXG4gICAgYW5pbWF0aW9uIGlzIGRvbmUgdGhlbiByZXR1cm4gdGhlIHByb21pc2VcclxuICAgICovXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBpZiAoYW5pU2V0dGluZ3MuZ3JhcGhPcHQuaGlkZUVxdWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJhdGlvbiowLjV9cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke3BvaW50RGF0YS55fWAsIGVxdVBhcmEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcblNob3cgdGhlIGNob3NlbiBlcXVhdGlvbiB0byBncmFwaFxyXG4qL1xyXG5mdW5jdGlvbiBzaG93RXF1YXRpb25BZ2FpbihhbmlTZXR0aW5ncykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgaWYgKGFuaVNldHRpbmdzLmdyYXBoT3B0LmhpZGVFcXVhdGlvbikge1xyXG4gICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0QXBwZWFyICR7YW5pRHVyYXRpb24qMC41fXMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5PbmNlIHRoZSB5LXZhbHVlIGFwcGVhcnMgaW4gdGhlIGNvcnJlY3QgeS1jb2x1bW4gdGhlbiBmdWxmaWxsIHRoZSBwcm9taXNlLlxyXG4qL1xyXG5mdW5jdGlvbiBwbGFjZVlWYWx1ZShhbmlTZXR0aW5ncykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gJChgdGQjeXZhbCR7cG9pbnREYXRhLmlkICsgMX1gKVswXTtcclxuICAgICAgICAkKGlucHV0KS5odG1sKFwiXCIpO1xyXG4gICAgICAgICQoaW5wdXQpLmFwcGVuZChgPHA+JHtwb2ludERhdGEueX08L3A+YCk7XHJcbiAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuT25jZSB0aGUgZXF1YXRpb24gaXMgY2xlYXJlZCBhbmQgcmVzZXQgdG8gdGhlIGRlZmF1bHQgZXF1YXRpb25cclxudGhlbiBmdWxmaWxsIHRoZSBwcm9taXNlXHJcbiovXHJcbmZ1bmN0aW9uIHJlc2V0Um91bmQoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8vICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgaWYgKGFuaVNldHRpbmdzLmdyYXBoT3B0LmhpZGVFcXVhdGlvbikge1xyXG4gICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0RGlzYXBwZWFyICR7YW5pRHVyYXRpb24qMC4xNX1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke3Byb2ZPcHQubGF0ZXh9YCwgZXF1UGFyYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuUmV0dXJuIHRvIGRlZmF1bHQgYmVnaW5uaW5nIGVxdWF0aW9uIGZvciB0aGUgbmV4dCBhbmltYXRpb24gb3IgZm9yIHRoZSBlbmRcclxuKi9cclxuZnVuY3Rpb24gc2hvd0RlZmF1bHRFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGlmIChhbmlTZXR0aW5ncy5ncmFwaE9wdC5oaWRlRXF1YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cmF0aW9uKjAuMTV9cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbkFjY2VwdCB0aGUgZGF0YXBvaW50IGFuZCBpdHMgaXRlcmF0b3IgYW5kIHBsb3QgdGhhdCBwb2ludCBiZWluZyBwYXNzZWQgdGhyb3VnaFxyXG4qL1xyXG5mdW5jdGlvbiBwbG90dGVyKGFuaVNldHRpbmdzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIHBsb3RHcmFwaC51cGRhdGUoYW5pU2V0dGluZ3MsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuVGhpcyBmdW5jdGlvbiBhY3RzIGFzIGFuIGl0ZXJhdG9yIHNvIHRoYXQgdGhlIHByb21pc2UgY2hhaW4ga25vd3Mgd2hpY2hcclxuZGF0YXBvaW50IHRvIGhhbmRsZSBhbmQgdG8gYW5pbWF0ZVxyXG4qL1xyXG5mdW5jdGlvbiB1cGRhdGVSb3VuZChhbmlTZXR0aW5ncykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIHBsYWNlaG9sZGVyID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGFuaVNldHRpbmdzLmN1cnJlbnRSb3VuZCArPSAxO1xyXG4gICAgICAgIHBsYWNlaG9sZGVyLnVwZGF0ZVBvaW50ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vKlxyXG5Ud28gZnVuY3Rpb25zIGluIG9yZGVyIHRvIHJlcGxhY2UgdGhlIGZ1bmN0aW9uIG1hY2hpbmUgZ2lmIHdpdGggdGhlIGFuaW1hdGVkXHJcbmdpZiBhbmQgYmFja3dhcmRzLlxyXG4qL1xyXG5mdW5jdGlvbiBhbmltYXRlRnVuY01hY2hpbmUoYW5pU2V0dGluZ3MpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICQoXCIjZnVuY3Rpb25NYWNoaW5lXCIpLmNzcyh7XHJcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiOiBcInVybCguL2ltZy9mdW5jdGlvbk1hY2hpbmVBbmkuZ2lmKVwiXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0b3BBbmlGdW5jTWFjaGluZShhbmlTZXR0aW5ncykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgJChcIiNmdW5jdGlvbk1hY2hpbmVcIikuY3NzKHtcclxuICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCI6IFwidXJsKC4vaW1nL2Z1bmN0aW9uTWFjaGluZVN0aWxsLmdpZilcIlxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncylcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5BIGZ1bmN0aW9uIHRvIHNob3cgdGhlIHkgYW5zd2VyIGxlYXZpbmcgdGhlIGZ1bmN0aW9uIG1hY2hpbmUgdG9cclxuc3RhcnQgdGhlIG5leHQgYW5pbWF0aW9uIG9mIGdvaW5nIGJhY2sgdG8gdGhlIHkgY29sdW1uLlxyXG4qL1xyXG5mdW5jdGlvbiBtaW5pQW5pKGFuaVNldHRpbmdzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuXHJcbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdLFxyXG4gICAgICAgICAgICB5dmFsdWUgPSBwbGFjZWhvbGRlci55LFxyXG4gICAgICAgICAgICBwYXJhID0gJChgPHA+JHt5dmFsdWV9PC9wPmApO1xyXG5cclxuICAgICAgICAkKHBhcmEpLmNzcyh7XHJcbiAgICAgICAgICAgIFwiZm9udFNpemVcIjogXCIyMHB4XCJcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQocGFyYSk7XHJcblxyXG4gICAgICAgIHBhcmFcclxuICAgICAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IDYzMCxcclxuICAgICAgICAgICAgICAgIHRvcDogMTYwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICB0b3A6IDIwMFxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgcGFyYS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5BIHByb21pc2UgY2hhaW4gdG8gcnVuIHRocm91Z2ggdGhlIHdob2xlIGFuaW1hdGlvbiBwcm9jZXNzXHJcblxyXG5OT1RFXHJcbkEgcHJvbWlzZSBjaGFpbiBoYXMgYmVlbiB1dGl6aWxlZCBpbiBvcmRlciB0byBlYXNpbHkgcGx1Z2luXHJcbmV4dHJhIGZ1bmN0aW9ucyB0aGF0IHdvdWxkIGJlIGdyZWF0IHRvIGhhdmUgaW4gdGhlIGFuaW1hdGlvblxyXG5wcm9jZXNzLiAgQSBwcm9taXNlIGNoYWluIGhhcyBhbHNvIGJlZW4gdXNlZCBpbiBvcmRlciB0byB3YWl0XHJcbmZvciBhIGFuaW1hdGlvbiB0byBlbmQgdG8gc3RhcnQgdGhlIG5leHQgYW5pbWF0aW9uLlxyXG4qL1xyXG5cclxuLypcclxuRGVmYXVsdCBQcm9taXNlIENoYWluXHJcbiovXHJcbmZ1bmN0aW9uIGFuaVByb21pc2VDaGFpbihkcHMsIGNoYWluKSB7XHJcblxyXG4gICAgZHBzLmRhdGFwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoZGF0YXBvaW50KSB7XHJcbiAgICAgICAgaWYgKGRhdGFwb2ludC51cGRhdGVQb2ludCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjaGFpbiA9IGNoYWluXHJcbiAgICAgICAgICAgICAgICAudGhlbihydW5BbmltYXRpb24oXCJ4VG9NYWNoaW5lXCIsIGRhdGFwb2ludC54KSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGFuaW1hdGVGdW5jTWFjaGluZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoXCJDYWxjdWxhdGluZ1wiKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlcGxhY2VYRXF1KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd0V2YWx1YXRlRXF1KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd1lBbnMpXHJcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RXF1YXRpb25BZ2FpbilcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0b3BBbmlGdW5jTWFjaGluZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoXCJcIikpXHJcbiAgICAgICAgICAgICAgICAudGhlbihtaW5pQW5pKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocnVuQW5pbWF0aW9uKFwibWFjaGluZVRvWVwiLCBkYXRhcG9pbnQueSkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihwbGFjZVlWYWx1ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJ1bkFuaW1hdGlvbihcInlUb1N0YXR1c0JhclwiLCBgKCR7ZGF0YXBvaW50Lnh9LCR7ZGF0YXBvaW50Lnl9KWApKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgUGxvdHRpbmcgKCR7ZGF0YXBvaW50Lnh9LCR7ZGF0YXBvaW50Lnl9KWApKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxvdHRlcilcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoYGApKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzZXRSb3VuZClcclxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dEZWZhdWx0RXF1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hhaW4gPSBjaGFpbi50aGVuKHVwZGF0ZVJvdW5kKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5JZiB0aGUgXCJIaWRlIEFuaW1hdGlvblwiIGNoZWNrYm94IGlzIGNoZWNrZWQgdGhlbiBza2lwIHRoZSB3aG9sZSBhbmltYXRpb25cclxucHJvbWlzZSBjaGFpbiBhbmQganVzdCBhcHBlbmQgdGhlIHkgdmFsdWVzXHJcbiovXHJcbmZ1bmN0aW9uIGFuaW1hdGVIaWRlKGRwcywgY2hhaW4pIHtcclxuXHJcbiAgICBkcHMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhcG9pbnQpIHtcclxuICAgICAgICBpZiAoZGF0YXBvaW50LnVwZGF0ZVBvaW50ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNoYWluID0gY2hhaW5cclxuICAgICAgICAgICAgICAgIC50aGVuKHBsYWNlWVZhbHVlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgUGxvdHRpbmcgKCR7ZGF0YXBvaW50Lnh9LCR7ZGF0YXBvaW50Lnl9KWApKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxvdHRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoYWluID0gY2hhaW4udGhlbih1cGRhdGVSb3VuZCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuSGFuZGxlIGFsbCBDU1MgYW5pbWF0aW9ucyBieSBjcmVhdGluZyBhIFByb21pc2UgY2hhaW4gdGhyb3VnaCBhIGZvciBsb29wLlxyXG4qL1xyXG5mdW5jdGlvbiBhbmltYXRvckNvbnRyb2woZHBzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgbnVtQ29udGFpbmVyID0gJChcIiNudW1Db250YWluZXJcIiksXHJcbiAgICAgICAgY2hhaW4gPSBQcm9taXNlLnJlc29sdmUoZHBzKTtcclxuXHJcbiAgICBudW1Db250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICBpZiAoYW5pRHVyYXRpb24gPT09IDAuNSkge1xyXG4gICAgICAgIGFuaW1hdGVIaWRlKGRwcywgY2hhaW4pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbmlQcm9taXNlQ2hhaW4oZHBzLCBjaGFpbik7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qXHJcblNldCB1cCB0aGUgYmFzaWMgdmFyaWFibGVzLlxyXG4qL1xyXG52YXIgeE1lbW9yeSA9IFtdLFxyXG4gICAgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxyXG4gICAgaW5wdXRDb3VudCA9IGlucHV0cy5sZW5ndGgsXHJcbiAgICBydW5NYXN0ZXIgPSB0cnVlLFxyXG4gICAgcnVuID0gdHJ1ZTtcclxuXHJcbi8qXHJcbkF0dGFjaCBhbiBvbmlucHV0IGV2ZW50IHRvIGFsbCB0aGUgaW5wdXQgYm94ZXMgaW4gb3JkZXIgdG8gdmFsaWRhdGUgdGhlbSB3aXRoaW4gdGhlIGJvdW5kc1xyXG50aGF0IHRoZSBwcm9mZXNzb3IgaGFzIGNob3Nlbi4gIElmIHRoZSBib3VuZHMgYXJlIGV4Y2VlZGVkLCB0aGVuIGRpc2FibGUgdGhlIFwiR28hXCIgYnV0dG9uXHJcbmFuZCBvdXRwdXQgYSBtZXNzYWdlIHRvIHRoZSBzdGF0dXMgYmFyLlxyXG4qL1xyXG5mb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgIGlucHV0c1tpXS5vbmtleXVwID0gZSA9PiB7XHJcblxyXG4gICAgICAgIHZhciB4SW5wdXRWYWwgPSBlLnNyY0VsZW1lbnQudmFsdWU7XHJcblxyXG4gICAgICAgIGlmIChlLndoaWNoID09PSA2OSkge1xyXG4gICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICQoXCIjc3RhdHVzIHBcIikuaHRtbChgQ2FuJ3QgZG8gdGhhdCBicm8hYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuLypcclxuRnVuY3Rpb24gdG8gc2VsZWN0IHRoZSBjaG9zZW4gZXF1YXRpb24gd2l0aCBpdHMgbmFtZSBhbmQgZ3JhcGggd2luZG93IGJvdW5kYXJpZXMuXHJcbiovXHJcbmZ1bmN0aW9uIGNoZWNrQ29uZmlnKHZhbCkge1xyXG4gICAgdmFyIHByb2ZPcHQ7XHJcbiAgICAkLmVhY2gocHJvZmVzc29yQ29uZmlnRmlsZSwgZnVuY3Rpb24gKGksIGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbS5lcXVhdGlvbiA9PT0gdmFsKSB7XHJcbiAgICAgICAgICAgIHByb2ZPcHQgPSBpdGVtO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gcHJvZk9wdDtcclxufVxyXG5cclxuLypcclxuVXBvbiBjaG9vc2luZyBhbm90aGVyIGVxdWF0aW9uIHRvIGdyYXBoLCBjbGVhciBhbGwgdGhlIHZhbHVlc1xyXG4qL1xyXG5mdW5jdGlvbiBjbGVhclZhbHVlcygpIHtcclxuICAgIHZhciB4aW5wdXRzID0gJChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxyXG4gICAgICAgIHlpbnB1dHMgPSAkKGB0ciB0ZDpudGgtb2YtdHlwZSgyKWApO1xyXG5cclxuICAgIHhpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSwgaXRlbSkge1xyXG4gICAgICAgIGl0ZW0udmFsdWUgPSBcIlwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgeWlucHV0cy5lYWNoKGZ1bmN0aW9uIChpLCBpdGVtKSB7XHJcbiAgICAgICAgaXRlbS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbkRpcHNsYXkgS2F0ZXggZXF1YXRpb24uIEFMU08gdXNlZCBpbiBhamF4LmpzXHJcbiovXHJcbmZ1bmN0aW9uIGNoYW5nZVBsb3QodmFsKSB7XHJcblxyXG4gICAgeE1lbW9yeSA9IFtdO1xyXG5cclxuICAgIGNsZWFyVmFsdWVzKCk7XHJcblxyXG4gICAgd2luZG93LnByb2ZPcHQgPSBjaGVja0NvbmZpZyh2YWwpO1xyXG5cclxuICAgIHZhciBlcXVhdCA9IHZhbCxcclxuICAgICAgICBlcXVQYXJhID0gJChcIiNmdW5jdGlvbk1hY2hpbmUgI2VxdVwiKVswXTtcclxuXHJcbiAgICAkKGVxdVBhcmEpLmVtcHR5KCk7XHJcblxyXG4gICAgaWYgKHdpbmRvdy5wcm9mT3B0LmhpZGVFcXVhdGlvbiA9PT0gZmFsc2UpIHtcclxuICAgICAgICBrYXRleC5yZW5kZXIod2luZG93LnByb2ZPcHQubGF0ZXgsIGVxdVBhcmEpO1xyXG4gICAgfSBlbHNlIGlmICh3aW5kb3cucHJvZk9wdC5oaWRlRXF1YXRpb24gPT09IHRydWUpIHtcclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoXCI8aDI+TXlzdGVyeSBFcXVhdGlvbjwvaDI+XCIpXHJcbiAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgXCJwYWRkaW5nVG9wXCI6IFwiNXB4XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKlxyXG5BbmltYXRpb24gcGF0aCBmb3IgdGhlIHN0YWlyc3RlcFxyXG4qL1xyXG5mdW5jdGlvbiBzdGFpclN0ZXAob3B0aW9ucykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgaGlnaHdheVBhdGggPSAyODAsXHJcbiAgICAgICAgbGFzdFNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoIC0gMV07XHJcbiAgICBsYXN0U2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyAke29wdGlvbnMubmFtZX0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke29wdGlvbnMuc3RhcnRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtvcHRpb25zLnN0YXJ0TGVmdE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMzJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke29wdGlvbnMuc3RhcnRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtoaWdod2F5UGF0aH1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDY2JSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke29wdGlvbnMuZW5kVG9wT2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7aGlnaHdheVBhdGh9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA5MCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtvcHRpb25zLmVuZFRvcE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke29wdGlvbnMuZW5kTGVmdE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsIGxhc3RTaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xyXG59XHJcblxyXG4vKlxyXG5BIHNldCBvZiBmdW5jdGlvbnMgdXNpbmcgdGhlIHN0YWlyc3RlcCBhbmltYXRpb24gdGVtcGxhdGVcclxudG8gY3JlYXRlIHBhdGh3YXlzIHdpdGggY29vcmRpbmF0ZSBkYXRhXHJcbiovXHJcbmZ1bmN0aW9uIG1ha2VYVG9NYWNoaW5lKGlucHV0Q29yZHMsIGluZGV4KSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHN0YWlyU3RlcCh7XHJcbiAgICAgICAgc3RhcnRUb3BPZmY6IGlucHV0Q29yZHMudG9wICsgMTAsXHJcbiAgICAgICAgc3RhcnRMZWZ0T2ZmOiBpbnB1dENvcmRzLmxlZnQgKyAzMCxcclxuICAgICAgICBlbmRUb3BPZmY6IDE1MCxcclxuICAgICAgICBlbmRMZWZ0T2ZmOiA0NTAsXHJcbiAgICAgICAgbmFtZTogYHhUb01hY2hpbmUke2luZGV4fWBcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTWFjaGluZVRvWShpbnB1dENvcmRzLCBpbmRleCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBzdGFpclN0ZXAoe1xyXG4gICAgICAgIHN0YXJ0VG9wT2ZmOiAyMDAsXHJcbiAgICAgICAgc3RhcnRMZWZ0T2ZmOiA2MzAsXHJcbiAgICAgICAgZW5kVG9wT2ZmOiBpbnB1dENvcmRzLnRvcCArIDEwLFxyXG4gICAgICAgIGVuZExlZnRPZmY6IGlucHV0Q29yZHMucmlnaHQgKyA1LFxyXG4gICAgICAgIG5hbWU6IGBtYWNoaW5lVG9ZJHtpbmRleH1gXHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVlUb1N0YXR1c0JhcihpbnB1dENvcmRzLCBpbmRleCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBzdGFpclN0ZXAoe1xyXG4gICAgICAgIHN0YXJ0VG9wT2ZmOiBpbnB1dENvcmRzLnRvcCArIDUsXHJcbiAgICAgICAgc3RhcnRMZWZ0T2ZmOiBpbnB1dENvcmRzLnJpZ2h0ICsgMTAsXHJcbiAgICAgICAgZW5kVG9wT2ZmOiA1MCxcclxuICAgICAgICBlbmRMZWZ0T2ZmOiA0MDAsXHJcbiAgICAgICAgbmFtZTogYHlUb1N0YXR1c0JhciR7aW5kZXh9YFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcblNldCB1cCB0aGUgeE1lbW9yeSBhcnJheSBhbmQgdGhlIGFuaW1hdGlvbiBwYXRocyBmb3IgZWFjaCBpbnB1dCBib3guXHJcblxyXG5OT1RFOiBTZXR0aW5nIHVwIHRoZSB4TWVtb3J5IGFycmF5IGFsc28gbWFrZXMgaXQgc28gdGhhdCBubyBhbmltYXRpb25zXHJcbiAgICAgIGFyZSByZXBlYXRlZCBieSBtdWx0aXBsZSBjbGlja3Mgb24gdGhlIFwiR28hXCIgYnV0dG9uLlxyXG4qL1xyXG5mb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Q291bnQ7IGkrKykge1xyXG4gICAgeE1lbW9yeVtpXSA9IG51bGw7XHJcblxyXG4gICAgdmFyIGlucHV0Q29vciA9IGlucHV0c1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICBtYWtlWFRvTWFjaGluZShpbnB1dENvb3IsIGkpO1xyXG4gICAgbWFrZU1hY2hpbmVUb1koaW5wdXRDb29yLCBpKTtcclxuICAgIG1ha2VZVG9TdGF0dXNCYXIoaW5wdXRDb29yLCBpKTtcclxuICAgICQoXCIjbnVtQ29udGFpbmVyXCIpLmFwcGVuZCgkKGA8cD48L3A+YCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBVc2VyRXhjZXB0aW9uKG1lc3NhZ2UsIGVycm9yTnVtKSB7XHJcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgdGhpcy5lcnJvck51bSA9IGVycm9yTnVtO1xyXG4gICAgdGhpcy5uYW1lID0gXCJVc2VyRXhjZXB0aW9uXCI7XHJcbn1cclxuXHJcbi8qXHJcblNldCB1cCB0aGUgb2JqZWN0IHRoYXQgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgcHJvbWlzZSBjaGFpblxyXG5pbiBhbmltYXRvciBjb250cm9sLlxyXG4qL1xyXG5mdW5jdGlvbiBzZXRVcE9iamVjdCh4aW5wdXRzLCBncmFwaE9wdCwgYW5pU2V0dGluZ3MpIHtcclxuICAgIHhpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSkge1xyXG5cclxuICAgICAgICB2YXIgeHZhbHVlID0gJCh0aGlzKS52YWwoKSxcclxuICAgICAgICAgICAgeHZhbCxcclxuICAgICAgICAgICAgcm91bmRpdDtcclxuXHJcbiAgICAgICAgaWYgKHh2YWx1ZSkge1xyXG4gICAgICAgICAgICB4dmFsID0gK3h2YWx1ZTtcclxuICAgICAgICAgICAgcm91bmRpdCA9IHh2YWwudG9GaXhlZChwcm9mT3B0LnJvdW5kaW5nKTtcclxuXHJcbiAgICAgICAgICAgICQodGhpcykudmFsKHJvdW5kaXQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb2ZPcHQudmlldy54Lm1pbiA8PSByb3VuZGl0ICYmIHJvdW5kaXQgPD0gcHJvZk9wdC52aWV3LngubWF4KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VYID0gZ3JhcGhPcHQuZXF1YXRpb24ucmVwbGFjZSgveC9nLCBgKCR7cm91bmRpdH0pYCksXHJcbiAgICAgICAgICAgICAgICAgICAgeXZhbCA9IG1hdGguZXZhbChyZXBsYWNlWCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB5dmFsID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0Q29vciA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogcm91bmRpdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHl2YWwudG9GaXhlZChwcm9mT3B0LnJvdW5kaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlRXF1OiBwcm9mT3B0LmxhdGV4LnJlcGxhY2UoXCJ4XCIsIGAoJHtyb3VuZGl0fSlgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBvaW50OiB4TWVtb3J5W2ldICE9PSByb3VuZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJChcIiNudW1Db250YWluZXIgcFwiKS5nZXQoaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oXCJvdXQgb2YgZG9tYWluXCIsIHh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEluZmluaXR5ID09PSB5dmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oXCJ1bmRlZmluZWQgdmFsdWVcIiwgeHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgQ2xlYXIgb3V0IHRoZSBZcyB3aGVuIHRoZXkgZG9uJ3QgZXF1YWwgZWFjaCBvdGhlciBhbmQgbmVlZCB0byBiZSB1cGRhdGVkXHJcbiAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnVwZGF0ZVBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChgdGQjeXZhbCR7aSArIDF9YCkuaHRtbChcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKlVwZGF0ZSB0aGUgeG1lbW9yeSovXHJcbiAgICAgICAgICAgICAgICB4TWVtb3J5W2ldID0gcm91bmRpdDtcclxuICAgICAgICAgICAgICAgIGFuaVNldHRpbmdzLmRhdGFwb2ludHMucHVzaChwb2ludCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihcIm91dCBvZiB3aW5kb3dcIiwgeHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5TZXQgYWxsIHRoZSBkYXRhIHRoYXQgd2lsbCBiZSBzZXQgdG8gYW5pU2V0dGluZ3MgaW4gdGhlIHNldFVwT2JqZWN0IGZ1bmN0aW9uXHJcblxyXG5OT1RFXHJcbmdyYXBoT3B0LmNhbGxiYWNrIHN0aWxsIG5lZWRzIGEgdmlhYmxlIG1ldGhvZCFcclxuKi9cclxuZnVuY3Rpb24gc3RhcnRGdW5jTWFjaCgpIHtcclxuXHJcbiAgICB2YXIgeGlucHV0cyA9ICQoXCJpbnB1dFt0eXBlPSdudW1iZXInXVwiKSxcclxuICAgICAgICBncmFwaE9wdCA9IHtcclxuICAgICAgICAgICAgZXF1YXRpb246IHByb2ZPcHQuZXF1YXRpb24sXHJcbiAgICAgICAgICAgIGhpZGVFcXVhdGlvbjogcHJvZk9wdC5oaWRlRXF1YXRpb24sXHJcbiAgICAgICAgICAgIHZpZXc6IHByb2ZPcHQudmlldyxcclxuICAgICAgICAgICAgZHVyYXRpb246IGFuaUR1cmF0aW9uXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbmlTZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgZGF0YXBvaW50czogW10sXHJcbiAgICAgICAgICAgIGN1cnJlbnRSb3VuZDogMCxcclxuICAgICAgICAgICAgZ3JhcGhPcHQ6IGdyYXBoT3B0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIHNldFVwT2JqZWN0KHhpbnB1dHMsIGdyYXBoT3B0LCBhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgYW5pbWF0b3JDb250cm9sKGFuaVNldHRpbmdzKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICB4TWVtb3J5ID0gW107XHJcbiAgICAgICAgJChcIiNzdGF0dXMgcFwiKVxyXG4gICAgICAgICAgICAuaHRtbChgJHtlLmVycm9yTnVtfSB4LXZhbHVlICR7ZS5tZXNzYWdlfS5gKVxyXG4gICAgICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgICAgIFwiZm9udFdlaWdodFwiOiBcImJvbGRcIixcclxuICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjYjYyNzI3XCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qQmVmb3JlIHJ1bm5pbmcgdGhlIGZ1bmN0aW9uIG1hY2hpbmUsIHB1dCBhbGwgaW5wdXRzIG5leHQgdG8gZWFjaCBvdGhlci4qL1xyXG5mdW5jdGlvbiBjbGVhbklucHV0cygpIHtcclxuICAgIHZhciB4aW5wdXRzID0gJChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxyXG4gICAgICAgIGlucHV0QXJyYXkgPSBbXTtcclxuXHJcbiAgICB4aW5wdXRzLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICB2YXIgaW5wdXRWYWx1ZSA9ICQodGhpcykudmFsKCk7XHJcblxyXG4gICAgICAgIGlmIChpbnB1dFZhbHVlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGlucHV0QXJyYXkucHVzaChpbnB1dFZhbHVlKTtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwoXCJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB4aW5wdXRzLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICBpZiAoaSA8IGlucHV0QXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKGlucHV0QXJyYXlbaV0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbiQoXCIjY2xvc2VIZWxwXCIpLmNsaWNrKGUgPT4ge1xyXG4gICAgJChlLnRhcmdldC5wYXJlbnRFbGVtZW50KS5mYWRlT3V0KDEwMCk7XHJcbiAgICAkKFwiI3NoYWRlXCIpLmZhZGVPdXQoMjAwKTtcclxuICAgIGxvY2FsU3RvcmFnZVsnZmlyc3RUaW1lRnVuY3Rpb25NYWNoaW5lJ10gPSBmYWxzZTtcclxufSk7XHJcblxyXG4kKFwiI29wZW5IZWxwXCIpLmNsaWNrKGUgPT4ge1xyXG4gICAgJChcIiNpbnN0cnVjdGlvbnNcIikuZmFkZUluKDEwMCk7XHJcbiAgICAkKFwiI3NoYWRlXCIpLmZhZGVJbigxMDAwKTtcclxufSk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShlID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIGZpcnN0dGltZSA9IGxvY2FsU3RvcmFnZVsnZmlyc3RUaW1lRnVuY3Rpb25NYWNoaW5lJ107XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICAgIGlmIChmaXJzdHRpbWUgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zXCIpLmhpZGUoKTtcclxuICAgICAgICAkKFwiI3NoYWRlXCIpLmhpZGUoKTtcclxuICAgIH1cclxufSlcclxuXHJcbi8qXHJcbk9uY2hhbmdlIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBzZWxlY3QgaHRtbCBlbGVtZW50LlxyXG4qL1xyXG4kKFwic2VsZWN0XCIpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyIHNlbGVjdGVkID0gJChgb3B0aW9uW3ZhbHVlPVwiJHtlLnRhcmdldC52YWx1ZX1cIl1gKSxcclxuICAgICAgICBwcm9mT3B0ID0gSlNPTi5wYXJzZShzZWxlY3RlZC5hdHRyKFwiZGF0YS1wcm9mb3B0XCIpKTtcclxuXHJcbiAgICBwbG90R3JhcGguc2V0dXAocHJvZk9wdCwgXCIjZ3JhcGhcIilcclxuICAgIGNoYW5nZVBsb3QoZS50YXJnZXQudmFsdWUpO1xyXG59KTtcclxuXHJcbi8qXHJcbkRPQ1VNRU5UIGtleWRvd24gZXZlbnQgaGFuZGxlclxyXG4qL1xyXG4kKGRvY3VtZW50KS5rZXlwcmVzcyhmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKGUud2hpY2ggPT0gMTMgJiYgcnVuTWFzdGVyKSB7XHJcbiAgICAgICAgY2xlYW5JbnB1dHMoKTtcclxuICAgICAgICBzdGFydEZ1bmNNYWNoKCk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLypcclxuR08hIENsaWNrIGV2ZW50IGhhbmRsZXJcclxuKi9cclxuJChcImlucHV0W3R5cGU9J2J1dHRvbiddW3ZhbHVlPSdHbyEnXVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAocnVuTWFzdGVyKSB7XHJcbiAgICAgICAgY2xlYW5JbnB1dHMoKTtcclxuICAgICAgICBzdGFydEZ1bmNNYWNoKCk7XHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=
