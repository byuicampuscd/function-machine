"use strict";!function(){for(var t,a,d,p,r=$("tbody"),n=10,e=1;e<=n;e++)p=$("<input>"),t=$("<td></td>"),a=$("<td></td>"),d=$("<tr></tr>"),$(d).attr("id","row"+e),$(p).attr("name","input"+e).attr("type","number"),$(a).attr("id","yval"+e),$(t).append(p),$(d).append(t).append(a),$(r).append(d)}();
"use strict";var plotGraph=function(){function t(t){return function(e){var n=(0).toFixed(2);return function(e){var a=t.x*e;this.textContent="( "+a.toFixed(2)+", "+n+")"}}}function e(t){return function(){var e=t.x,n=t.y;return function(t){this.textContent="( "+e+", "+(n*t).toFixed(2)+")"}}}function n(t){return"graphPoint"+t}function a(t){var e=d3.selectAll(u).append("g").attr("class","point").attr("id",n(t.id));return e.append("circle").attr("r",4).attr("cx",0).attr("cy",0),e.append("text").text("(0, 0)").attr("x",5).attr("y",15),e.attr("transform","translate("+d(0)+" "+p(0)+")"),e}function r(r,i){var o,c,s=r.datapoints[r.currentRound];document.querySelectorAll(u+" .graph .line").length>0;r.datapoints.forEach(function(t){t.updatePoint&&d3.select("#"+n(t.id)).remove()}),r.graphOpt.graphHide?d3.select(u+" .graph .line").attr("display","none"):d3.select(u+" .graph .line").attr("display","inline"),s.updatePoint?(o=a(s),r.graphOpt.duration<=.5?(o.attr("transform","translate("+d(s.x)+" "+p(s.y)+")"),o.select("text").text("("+s.x+", "+s.y+")"),i(r)):(c=o.transition().duration(1e3*r.graphOpt.duration).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+p(0)+")"),c.select("text").tween("text",t(s)),c.transition().duration(1e3*r.graphOpt.duration).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+p(s.y)+")").each("end",function(){i(r)}).select("text").tween("text",e(s)))):i(r)}function i(t,e){var n=t.graphOpt,a={target:e,data:[{fn:n.equation,skipTip:!0}],xAxis:{domain:[n.view.x.min,n.view.x.max]},yAxis:{domain:[n.view.y.min,n.view.y.max]},disableZoom:!0,grid:!0,annotations:[{x:0,text:"y axis"},{y:0,text:"x axis"}]};o=e,u=o+" .content",c=n.equation,s=functionPlot(a),d=s.meta.xScale,p=s.meta.yScale,d3.selectAll(u+" .point").remove()}var o,u,c,s,d,p;return{update:r,setup:i}}();
"use strict";$(document).ready(function(){function t(t,e){var n=JSON.stringify(e),i=$("<option></option>").append(t.name);$(i).val(t.equation).attr("data-profOpt",n),$("select").append(i)}if(""==location.search){var e=[];e.push("file=funcMachineSettings")}else{var e=[],n=location.search.substring(1);e=n.split("&")}var i={};e.forEach(function(t){var e=t.split("=");i[e[0]]=e[1]}),console.log(e),$.getJSON(i.file+".json",function(e){var n;n=i.load?e[i.load]:e.general,$("#title").html(n.title),$("#instructionText").html(n.instructions),window.professorConfigFile=n.equations,$.each(n.equations,function(e,n){var i={graphOpt:n};t(n,i),0===e&&(plotGraph.setup(i,"#graph"),document.querySelector(".graph").firstChild.style.display="none",$("input#showGraph[type='checkbox']").click(function(t){var e=t.target.checked;e?document.querySelector(".graph").firstChild.style.display="block":document.querySelector(".graph").firstChild.style.display="none"}),changePlot(n.equation))})}).fail(function(){$("#status p").append("Add a query string")})});
"use strict";function runAnimation(n,t){return function(a){var e=a.datapoints[a.currentRound],i=e.element;return new Promise(function(e){$(i).html(t).css({animation:""+n+a.currentRound+" "+aniDuration+"s ease-in-out"}).one("animationend",function(n){e(a)})})}}function statusMessage(n){var t=$("#status p");return t.html("").css({fontWeight:"normal",color:"black"}),function(a){return new Promise(function(e){t.html(n),e(a)})}}function replaceXEqu(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textDisappear "+.5*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",0),t(n)})})}function showEvaluateEqu(n){var t=n.datapoints[n.currentRound],a=t.changeEqu;return new Promise(function(t){n.graphOpt.hideEquation?t(n):(katex.render(""+a,equPara),$(equPara).css("animation","textAppear "+.5*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)}))})}function showYAns(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){n.graphOpt.hideEquation?a(n):$(equPara).css("animation","textDisappear "+.5*aniDuration+"s ease-in-out").one("animationend",function(){$(equPara).css("opacity",0),katex.render(""+t.y,equPara),a(n)})})}function showEquationAgain(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textAppear "+.5*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)})})}function placeYValue(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){var e=$("td#yval"+(t.id+1))[0];$(e).html(""),$(e).append("<p>"+t.y+"</p>"),a(n)})}function resetRound(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textDisappear "+.15*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",0),katex.render(""+profOpt.latex,equPara),t(n)})})}function showDefaultEqu(n){return new Promise(function(t){n.graphOpt.hideEquation?t(n):$(equPara).css("animation","textAppear "+.15*aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)})})}function plotter(n){return new Promise(function(t){plotGraph.update(n,function(){t(n)})})}function updateRound(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){n.currentRound+=1,t.updatePoint=!1,a(n)})}function animateFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(./img/functionMachineAni.gif)"}),t(n)})}function stopAniFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(./img/functionMachineStill.gif)"}),t(n)})}function miniAni(n){return new Promise(function(t){var a=n.datapoints[n.currentRound],e=a.y,i=$("<p>"+e+"</p>");$(i).css({fontSize:"20px"}),$("body").append(i),i.css({position:"absolute",opacity:0,left:630,top:160}).animate({opacity:1,top:200},function(a){i.css({display:"none"}),t(n)})})}function aniPromiseChain(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(runAnimation("xToMachine",n.x)).then(animateFuncMachine).then(statusMessage("Calculating")).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(showEquationAgain).then(stopAniFuncMachine).then(statusMessage("")).then(miniAni).then(runAnimation("machineToY",n.y)).then(placeYValue).then(runAnimation("yToStatusBar","("+n.x+","+n.y+")")).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter).then(statusMessage("")).then(resetRound).then(showDefaultEqu)),t=t.then(updateRound)})}function animateHide(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(placeYValue).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter)),t=t.then(updateRound)})}function animatorControl(n){var t=$("#numContainer"),a=Promise.resolve(n);t.innerHTML="",.5===aniDuration?animateHide(n,a):aniPromiseChain(n,a)}var equPara=$("#functionMachine #equ")[0],rangeSpeed=$("#animate").val(),aniDuration=5/rangeSpeed;$("#animate").change(function(n){aniDuration=5/n.target.value});
"use strict";function checkConfig(t){var n;return $.each(professorConfigFile,function(e,o){o.equation===t&&(n=o)}),n}function clearValues(){var t=$("input[type='number']"),n=$("tr td:nth-of-type(2)");t.each(function(t,n){n.value=""}),n.each(function(t,n){n.innerHTML=""})}function changePlot(t){xMemory=[],clearValues(),window.profOpt=checkConfig(t);var n=$("#functionMachine #equ")[0];$(n).empty(),window.profOpt.hideEquation===!1?katex.render(window.profOpt.latex,n):window.profOpt.hideEquation===!0&&$(n).append("<h2>Mystery Equation</h2>").css({paddingTop:"5px"})}function stairStep(t){var n=280,e=document.styleSheets[document.styleSheets.length-1];e.insertRule("@keyframes "+t.name+" {\n                            0% {\n                                opacity: 1;\n                                top: "+t.startTopOff+"px;\n                                left: "+t.startLeftOff+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+t.startTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            66% {\n                                top: "+t.endTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+t.endTopOff+"px;\n                                left: "+t.endLeftOff+"px;\n                            }\n                        }",e.cssRules.length)}function makeXToMachine(t,n){stairStep({startTopOff:t.top+10,startLeftOff:t.left+30,endTopOff:150,endLeftOff:450,name:"xToMachine"+n})}function makeMachineToY(t,n){stairStep({startTopOff:200,startLeftOff:630,endTopOff:t.top+10,endLeftOff:t.right+5,name:"machineToY"+n})}function makeYToStatusBar(t,n){stairStep({startTopOff:t.top+5,startLeftOff:t.right+10,endTopOff:50,endLeftOff:400,name:"yToStatusBar"+n})}function UserException(t,n){this.message=t,this.errorNum=n,this.name="UserException"}function setUpObject(t,n,e){t.each(function(t){var o,a,i=$(this).val();if(i){if(o=+i,a=o.toFixed(profOpt.rounding),$(this).val(a),!(profOpt.view.x.min<=a&&a<=profOpt.view.x.max))throw new UserException("out of window",i);var r=n.equation.replace(/x/g,"("+a+")"),p=math.eval(r);if("number"!=typeof p)throw new UserException("out of domain",i);var u=(this.getBoundingClientRect(),{x:a,y:p.toFixed(profOpt.rounding),id:t,changeEqu:profOpt.latex.replace("x","("+a+")"),updatePoint:xMemory[t]!==a,element:$("#numContainer p").get(t)});if(1/0===p)throw new UserException("undefined value",i);u.updatePoint&&$("td#yval"+(t+1)).html(""),xMemory[t]=a,e.datapoints.push(u)}})}function startFuncMach(){var t=$("input[type='number']"),n={equation:profOpt.equation,hideEquation:profOpt.hideEquation,view:profOpt.view,duration:aniDuration},e={datapoints:[],currentRound:0,graphOpt:n};try{setUpObject(t,n,e),animatorControl(e)}catch(o){xMemory=[],$("#status p").html(o.errorNum+" x-value "+o.message+".").css({fontWeight:"bold",color:"#b62727"})}}function cleanInputs(){var t=$("input[type='number']"),n=[];t.each(function(t){var e=$(this).val();""!==e&&(n.push(e),$(this).val(""))}),t.each(function(t){t<n.length?$(this).val(n[t]):$(this).val("")})}for(var xMemory=[],inputs=document.querySelectorAll("input[type='number']"),inputCount=inputs.length,runMaster=!0,run=!0,i=0;i<inputs.length;i++)inputs[i].onkeyup=function(t){t.srcElement.value;69===t.which&&(t.target.value="",$("#status p").html("Can't do that bro!"))};for(var i=0;i<inputCount;i++){xMemory[i]=null;var inputCoor=inputs[i].getBoundingClientRect();makeXToMachine(inputCoor,i),makeMachineToY(inputCoor,i),makeYToStatusBar(inputCoor,i),$("#numContainer").append($("<p></p>"))}$("#closeHelp").click(function(t){$(t.target.parentElement).fadeOut(100),$("#shade").fadeOut(200),localStorage.firstTimeFunctionMachine=!1}),$("#openHelp").click(function(t){$("#instructions").fadeIn(100),$("#shade").fadeIn(1e3)}),$(document).ready(function(t){try{var n=localStorage.firstTimeFunctionMachine}catch(t){console.error(t)}"false"===n&&($("#instructions").hide(),$("#shade").hide())}),$("select").change(function(t){var n=$('option[value="'+t.target.value+'"]'),e=JSON.parse(n.attr("data-profopt"));plotGraph.setup(e,"#graph"),changePlot(t.target.value)}),$(document).keypress(function(t){13==t.which&&runMaster&&(cleanInputs(),startFuncMach())}),$("input[type='button'][value='Go!']").click(function(){runMaster&&(cleanInputs(),startFuncMach())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbG90R3JhcGguanMiLCJhamF4LmpzIiwiYW5pbWF0b3Jjb250cm9sLmpzIiwiZXZlbnRzLmpzIl0sIm5hbWVzIjpbInRkMSIsInRkMiIsInRyIiwiaW5wdXQiLCJ0Ym9keSIsIiQiLCJyb3dDb3VudCIsImoiLCJhdHRyIiwiYXBwZW5kIiwicGxvdEdyYXBoIiwidXBkYXRlVGV4dFgiLCJjdXJyZW50UG9pbnQiLCJkIiwiemVybyIsInRvRml4ZWQiLCJ0IiwibG9jYXRpb24iLCJ4IiwidGhpcyIsInRleHRDb250ZW50IiwidXBkYXRlVGV4dFkiLCJ4Um91bmRlZCIsInlWYWwiLCJ5IiwibWFrZVBvaW50SWQiLCJudW1JbiIsIm1ha2VQb2ludEdyb3VwIiwicG9pbnRHcm91cCIsImQzIiwic2VsZWN0QWxsIiwiZG90TG9jYXRpb24iLCJpZCIsInRleHQiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJ1cGRhdGUiLCJhbmlPcHRpb25zIiwiY2FsbGJhY2siLCJ0cmFuc2l0aW9uIiwiZGF0YXBvaW50cyIsImN1cnJlbnRSb3VuZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImZvckVhY2giLCJwb2ludCIsInVwZGF0ZVBvaW50Iiwic2VsZWN0IiwicmVtb3ZlIiwiZ3JhcGhPcHQiLCJncmFwaEhpZGUiLCJkdXJhdGlvbiIsImVhc2UiLCJ0d2VlbiIsImVhY2giLCJzZXR1cCIsInNlbGVjdG9yIiwib3B0c0luIiwiZ3JhcGhPcHRpb25zIiwidGFyZ2V0IiwiZGF0YSIsImZuIiwiZXF1YXRpb24iLCJza2lwVGlwIiwieEF4aXMiLCJkb21haW4iLCJ2aWV3IiwibWluIiwibWF4IiwieUF4aXMiLCJkaXNhYmxlWm9vbSIsImdyaWQiLCJhbm5vdGF0aW9ucyIsImdyYXBoTG9jYXRpb25TZWxlY3RvciIsImN1cnJlbnRFcXVhdGlvbiIsImZ1blBsb3QiLCJmdW5jdGlvblBsb3QiLCJtZXRhIiwicmVhZHkiLCJzaG93UHJvZk9wdGlvbnMiLCJwcm9mT3B0IiwiaW5pdCIsInN0cmluZ2lmaWVkRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvcHQiLCJuYW1lIiwidmFsIiwic2VhcmNoIiwicXVlcnlWYXJzIiwicHVzaCIsInF1ZXJ5U3RyaW5nIiwic3Vic3RyaW5nIiwic3BsaXQiLCJhbGxRdWVyaWVzIiwicXVlcnkiLCJwYWlyIiwiY29uc29sZSIsImxvZyIsImdldEpTT04iLCJmaWxlIiwicmVzdWx0IiwibG9hZCIsImdlbmVyYWwiLCJodG1sIiwidGl0bGUiLCJpbnN0cnVjdGlvbnMiLCJ3aW5kb3ciLCJwcm9mZXNzb3JDb25maWdGaWxlIiwiZXF1YXRpb25zIiwiaSIsInF1ZXJ5U2VsZWN0b3IiLCJmaXJzdENoaWxkIiwic3R5bGUiLCJkaXNwbGF5IiwiY2xpY2siLCJlIiwiY2hlY2tlZCIsImNoYW5nZVBsb3QiLCJmYWlsIiwicnVuQW5pbWF0aW9uIiwidmFsdWUiLCJhbmlTZXR0aW5ncyIsImRhdGFwb2ludCIsIm51bVBhcmEiLCJlbGVtZW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJjc3MiLCJhbmltYXRpb24iLCJhbmlEdXJhdGlvbiIsIm9uZSIsInN0YXR1c01lc3NhZ2UiLCJtZXNzYWdlIiwic3RhdHVzQmFyIiwiZm9udFdlaWdodCIsImNvbG9yIiwicmVwbGFjZVhFcXUiLCJoaWRlRXF1YXRpb24iLCJlcXVQYXJhIiwic2hvd0V2YWx1YXRlRXF1IiwicG9pbnREYXRhIiwiY2hhbmdlRXF1Iiwia2F0ZXgiLCJyZW5kZXIiLCJzaG93WUFucyIsInNob3dFcXVhdGlvbkFnYWluIiwicGxhY2VZVmFsdWUiLCJyZXNldFJvdW5kIiwibGF0ZXgiLCJzaG93RGVmYXVsdEVxdSIsInBsb3R0ZXIiLCJ1cGRhdGVSb3VuZCIsInBsYWNlaG9sZGVyIiwiYW5pbWF0ZUZ1bmNNYWNoaW5lIiwiYmFja2dyb3VuZC1pbWFnZSIsInN0b3BBbmlGdW5jTWFjaGluZSIsIm1pbmlBbmkiLCJ5dmFsdWUiLCJwYXJhIiwiZm9udFNpemUiLCJwb3NpdGlvbiIsIm9wYWNpdHkiLCJsZWZ0IiwidG9wIiwiYW5pbWF0ZSIsImFuaVByb21pc2VDaGFpbiIsImRwcyIsImNoYWluIiwidGhlbiIsImFuaW1hdGVIaWRlIiwiYW5pbWF0b3JDb250cm9sIiwibnVtQ29udGFpbmVyIiwiaW5uZXJIVE1MIiwicmFuZ2VTcGVlZCIsImNoYW5nZSIsImNoZWNrQ29uZmlnIiwiaXRlbSIsImNsZWFyVmFsdWVzIiwieGlucHV0cyIsInlpbnB1dHMiLCJ4TWVtb3J5IiwiZW1wdHkiLCJwYWRkaW5nVG9wIiwic3RhaXJTdGVwIiwib3B0aW9ucyIsImhpZ2h3YXlQYXRoIiwibGFzdFNoZWV0Iiwic3R5bGVTaGVldHMiLCJpbnNlcnRSdWxlIiwic3RhcnRUb3BPZmYiLCJzdGFydExlZnRPZmYiLCJlbmRUb3BPZmYiLCJlbmRMZWZ0T2ZmIiwiY3NzUnVsZXMiLCJtYWtlWFRvTWFjaGluZSIsImlucHV0Q29yZHMiLCJpbmRleCIsIm1ha2VNYWNoaW5lVG9ZIiwicmlnaHQiLCJtYWtlWVRvU3RhdHVzQmFyIiwiVXNlckV4Y2VwdGlvbiIsImVycm9yTnVtIiwic2V0VXBPYmplY3QiLCJ4dmFsIiwicm91bmRpdCIsInh2YWx1ZSIsInJvdW5kaW5nIiwicmVwbGFjZVgiLCJyZXBsYWNlIiwieXZhbCIsIm1hdGgiLCJldmFsIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0IiwiSW5maW5pdHkiLCJzdGFydEZ1bmNNYWNoIiwiY2xlYW5JbnB1dHMiLCJpbnB1dEFycmF5IiwiaW5wdXRWYWx1ZSIsImlucHV0cyIsImlucHV0Q291bnQiLCJydW5NYXN0ZXIiLCJydW4iLCJvbmtleXVwIiwic3JjRWxlbWVudCIsIndoaWNoIiwiaW5wdXRDb29yIiwicGFyZW50RWxlbWVudCIsImZhZGVPdXQiLCJsb2NhbFN0b3JhZ2UiLCJmYWRlSW4iLCJmaXJzdHRpbWUiLCJlcnJvciIsImhpZGUiLCJzZWxlY3RlZCIsInBhcnNlIiwia2V5cHJlc3MiXSwibWFwcGluZ3MiOiJBQUFBLGNBQUMsV0Fh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SCxHQUVBLFVBQWRvSCxJQUNBcE8sRUFBRSxpQkFBaUJzTyxPQUNuQnRPLEVBQUUsVUFBVXNPLFVBT3BCdE8sRUFBRSxVQUFVMkssT0FBTyxTQUFVM0QsR0FDekIsR0FBSXVILEdBQVd2TyxFQUFBQSxpQkFBbUJnSCxFQUFFekQsT0FBTzhELE1BQTVCLE1BQ1h6QyxFQUFVRyxLQUFLeUosTUFBTUQsRUFBU3BPLEtBQUssZ0JBRXZDRSxXQUFVOEMsTUFBTXlCLEVBQVMsVUFDekJzQyxXQUFXRixFQUFFekQsT0FBTzhELFNBTXhCckgsRUFBRXFDLFVBQVVvTSxTQUFTLFNBQVV6SCxHQUNaLElBQVhBLEVBQUU4RyxPQUFlSixZQUNqQkwsY0FDQUQsbUJBT1JwTixFQUFFLHFDQUFxQytHLE1BQU0sV0FDckMyRyxZQUNBTCxjQUNBRCIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBNYWtlIHRoZSB3aG9sZSB0YWJsZSBhbmQgY2VsbHMgZm9yIHRoZSBpbnB1dCBib3hlcyBhbmQgdXNlciBpbnRlcmFjdGlvbi5cclxuICAgICovXHJcbiAgICB2YXIgdGJvZHkgPSAkKFwidGJvZHlcIiksXHJcbiAgICAgICAgdGQxLFxyXG4gICAgICAgIHRkMixcclxuICAgICAgICB0cixcclxuICAgICAgICBpbnB1dCxcclxuICAgICAgICByb3dDb3VudCA9IDEwO1xyXG5cclxuICAgIGZvciAodmFyIGogPSAxOyBqIDw9IHJvd0NvdW50OyBqKyspIHtcclxuICAgICAgICBpbnB1dCA9ICQoXCI8aW5wdXQ+XCIpO1xyXG4gICAgICAgIHRkMSA9ICQoXCI8dGQ+PC90ZD5cIik7XHJcbiAgICAgICAgdGQyID0gJChcIjx0ZD48L3RkPlwiKTtcclxuICAgICAgICB0ciA9ICQoXCI8dHI+PC90cj5cIik7XHJcblxyXG4gICAgICAgICQodHIpLmF0dHIoXCJpZFwiLCBgcm93JHtqfWApO1xyXG5cclxuICAgICAgICAkKGlucHV0KS5hdHRyKFwibmFtZVwiLCBgaW5wdXQke2p9YCkuYXR0cihcInR5cGVcIiwgXCJudW1iZXJcIik7XHJcblxyXG4gICAgICAgICQodGQyKS5hdHRyKFwiaWRcIiwgYHl2YWwke2p9YCk7XHJcblxyXG4gICAgICAgICQodGQxKS5hcHBlbmQoaW5wdXQpO1xyXG4gICAgICAgICQodHIpLmFwcGVuZCh0ZDEpLmFwcGVuZCh0ZDIpO1xyXG4gICAgICAgICQodGJvZHkpLmFwcGVuZCh0cik7XHJcbiAgICB9XHJcbn0oKSk7XHJcbiIsIi8qanNsaW50IHBsdXNwbHVzOiB0cnVlLCBicm93c2VyOiB0cnVlLCBkZXZlbDogdHJ1ZSovXHJcbi8qZ2xvYmFsIGQzLCBmdW5jdGlvblBsb3QqL1xyXG52YXIgcGxvdEdyYXBoID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIGdyYXBoTG9jYXRpb25TZWxlY3RvcixcclxuICAgICAgICBkb3RMb2NhdGlvbixcclxuICAgICAgICBjdXJyZW50RXF1YXRpb24sXHJcbiAgICAgICAgZnVuUGxvdCxcclxuICAgICAgICB4U2NhbGUsXHJcbiAgICAgICAgeVNjYWxlLFxyXG4gICAgICAgIGZyZWVJZCA9IDA7XHJcblxyXG4gICAgLy90aGVzZSB0d28gZnVuY3Rpb25zIG1ha2UgdGhlIGZhY3RvcnkgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIGluIHRoZSBhbmltYXRpb25zIGZvciB0aGUgcG9pbnQgbGFiZWxzXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVUZXh0WChjdXJyZW50UG9pbnQpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgdmFyIHplcm8gPSAoMCkudG9GaXhlZCgyKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gY3VycmVudFBvaW50LnggKiB0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IFwiKCBcIiArIGxvY2F0aW9uLnRvRml4ZWQoMikgKyBcIiwgXCIgKyB6ZXJvICsgXCIpXCI7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVUZXh0WShjdXJyZW50UG9pbnQpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHhSb3VuZGVkID0gY3VycmVudFBvaW50LngsXHJcbiAgICAgICAgICAgICAgICB5VmFsID0gY3VycmVudFBvaW50Lnk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGV4dENvbnRlbnQgPSBcIiggXCIgKyB4Um91bmRlZCArIFwiLCBcIiArICh5VmFsICogdCkudG9GaXhlZCgyKSArIFwiKVwiO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFrZVBvaW50SWQobnVtSW4pIHtcclxuICAgICAgICByZXR1cm4gJ2dyYXBoUG9pbnQnICsgbnVtSW47XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFrZVBvaW50R3JvdXAoY3VycmVudFBvaW50KSB7XHJcbiAgICAgICAgdmFyIHBvaW50R3JvdXAgPSBkMy5zZWxlY3RBbGwoZG90TG9jYXRpb24pLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdwb2ludCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIG1ha2VQb2ludElkKGN1cnJlbnRQb2ludC5pZCkpO1xyXG5cclxuICAgICAgICAvL2FkZCB0aGUgY2lyY2xlXHJcbiAgICAgICAgcG9pbnRHcm91cC5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgIC5hdHRyKCdyJywgNClcclxuICAgICAgICAgICAgLmF0dHIoJ2N4JywgMClcclxuICAgICAgICAgICAgLmF0dHIoJ2N5JywgMCk7XHJcblxyXG4gICAgICAgIC8vYWRkIHRoZSBsYWJlbFxyXG4gICAgICAgIHBvaW50R3JvdXAuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgLnRleHQoJygwLCAwKScpXHJcbiAgICAgICAgICAgIC5hdHRyKCd4JywgNSlcclxuICAgICAgICAgICAgLmF0dHIoJ3knLCAxNSk7XHJcbiAgICAgICAgLy9tb3ZlIGl0IHRvICgwLDApXHJcbiAgICAgICAgcG9pbnRHcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB4U2NhbGUoMCkgKyAnICcgKyB5U2NhbGUoMCkgKyAnKScpO1xyXG4gICAgICAgIHJldHVybiBwb2ludEdyb3VwO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZShhbmlPcHRpb25zLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBjdXJyZW50UG9pbnQgPSBhbmlPcHRpb25zLmRhdGFwb2ludHNbYW5pT3B0aW9ucy5jdXJyZW50Um91bmRdLFxyXG4gICAgICAgICAgICBsaW5lSXNQbG90dGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChkb3RMb2NhdGlvbiArICcgLmdyYXBoIC5saW5lJykubGVuZ3RoID4gMCxcclxuICAgICAgICAgICAgcG9pbnRHcm91cCxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbjtcclxuXHJcbiAgICAgICAgLy9jbGVhciBhbnkgcG9pbnRzIHRoYXQgd2lsbCBnZXQgdXBkYXRlZFxyXG4gICAgICAgIGFuaU9wdGlvbnMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCkge1xyXG4gICAgICAgICAgICBpZiAocG9pbnQudXBkYXRlUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnIycgKyBtYWtlUG9pbnRJZChwb2ludC5pZCkpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vY2hlY2sgaWYgd2UgbmVlZCB0byBoaWRlIG9yIHNob3cgdGhlIHBsb3RsaW5lXHJcbiAgICAgICAgaWYgKGFuaU9wdGlvbnMuZ3JhcGhPcHQuZ3JhcGhIaWRlKSB7XHJcbiAgICAgICAgICAgIGQzLnNlbGVjdChkb3RMb2NhdGlvbiArICcgLmdyYXBoIC5saW5lJykuYXR0cignZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZDMuc2VsZWN0KGRvdExvY2F0aW9uICsgJyAuZ3JhcGggLmxpbmUnKS5hdHRyKCdkaXNwbGF5JywgJ2lubGluZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9kb2VzIHRoZSBjdXJyZW50Um91bmQgbmVlZCB0byBiZSB1cGRhdGVkZWQ/XHJcbiAgICAgICAgaWYgKCFjdXJyZW50UG9pbnQudXBkYXRlUG9pbnQpIHtcclxuICAgICAgICAgICAgLy9ub3RoaXRuZyB0byBzZWUgaGVyZSBqdXN0IGtlZXAgb24gbW92aW5nXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGFuaU9wdGlvbnMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vZHJhdyBwb2ludFxyXG4gICAgICAgICAgICBwb2ludEdyb3VwID0gbWFrZVBvaW50R3JvdXAoY3VycmVudFBvaW50KTtcclxuXHJcbiAgICAgICAgICAgIC8vaXMgYW5pbWF0aW9uIG9uP1xyXG4gICAgICAgICAgICBpZiAoYW5pT3B0aW9ucy5ncmFwaE9wdC5kdXJhdGlvbiA8PSAwLjUpIHtcclxuICAgICAgICAgICAgICAgIC8vbW92ZSBpdCBpbnRvIHBsYWNlIHdpdGhvdXQgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgICAgICBwb2ludEdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZShjdXJyZW50UG9pbnQueCkgKyAnICcgKyB5U2NhbGUoY3VycmVudFBvaW50LnkpICsgJyknKTtcclxuICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBsYWJsZVxyXG4gICAgICAgICAgICAgICAgcG9pbnRHcm91cC5zZWxlY3QoJ3RleHQnKS50ZXh0KCcoJyArIGN1cnJlbnRQb2ludC54ICsgJywgJyArIGN1cnJlbnRQb2ludC55ICsgJyknKTtcclxuICAgICAgICAgICAgICAgIC8vY2FsbCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soYW5pT3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy9kcmF3IHBvaW50IHdpdGggYW5pbWFpb25cclxuICAgICAgICAgICAgICAgIC8vRmlyc3QgdHJhbnNpdGlvbiAtIG1vdmUgdGhlIGdyb3VwIGluIHRoZSBYXHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uID0gcG9pbnRHcm91cFxyXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oYW5pT3B0aW9ucy5ncmFwaE9wdC5kdXJhdGlvbiAqIDEwMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLmVhc2UoJ2N1YmljLW91dCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZShjdXJyZW50UG9pbnQueCkgKyAnICcgKyB5U2NhbGUoMCkgKyAnKScpO1xyXG4gICAgICAgICAgICAgICAgLy9zdWIgdHJhbnNpdGlvbiAtIHVwZGF0ZSB0aGUgbGFiZWxcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uc2VsZWN0KCd0ZXh0JykudHdlZW4oJ3RleHQnLCB1cGRhdGVUZXh0WChjdXJyZW50UG9pbnQpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1NlY29uZCB0cmFuc2l0aW9uIC0gbW92ZSB0aGUgZ3JvdXAgaW4gdGhlIFlcclxuICAgICAgICAgICAgICAgIC8vc3ViIHRyYW5zaXRpb24gLSB1cGRhdGUgdGhlIGxhYmVsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbihhbmlPcHRpb25zLmdyYXBoT3B0LmR1cmF0aW9uICogMTAwMClcclxuICAgICAgICAgICAgICAgICAgICAuZWFzZSgnY3ViaWMtb3V0JylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeFNjYWxlKGN1cnJlbnRQb2ludC54KSArICcgJyArIHlTY2FsZShjdXJyZW50UG9pbnQueSkgKyAnKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmVhY2goJ2VuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYW5pT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCd0ZXh0JykudHdlZW4oJ3RleHQnLCB1cGRhdGVUZXh0WShjdXJyZW50UG9pbnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXR1cChhbmlPcHRpb25zLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIC8vc3VnYXJcclxuICAgICAgICB2YXIgb3B0c0luID0gYW5pT3B0aW9ucy5ncmFwaE9wdCxcclxuICAgICAgICAgICAgZ3JhcGhPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBzZWxlY3RvcixcclxuICAgICAgICAgICAgICAgIGRhdGE6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgZm46IG9wdHNJbi5lcXVhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBza2lwVGlwOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIHhBeGlzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBbb3B0c0luLnZpZXcueC5taW4sIG9wdHNJbi52aWV3LngubWF4XVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHlBeGlzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBbb3B0c0luLnZpZXcueS5taW4sIG9wdHNJbi52aWV3LnkubWF4XVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVab29tOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZ3JpZDogdHJ1ZSxcclxuXHRcdFx0XHRhbm5vdGF0aW9uczogW3tcclxuXHRcdFx0XHRcdHg6IDAsXHJcblx0XHRcdFx0XHR0ZXh0OiAneSBheGlzJ1xyXG5cdFx0XHRcdH0sIHtcclxuXHRcdFx0XHRcdHk6IDAsXHJcblx0XHRcdFx0XHR0ZXh0OiAneCBheGlzJ1xyXG5cdFx0XHRcdH1dXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vc2F2ZSBzb21lIHRoaW5ncyBmb3IgbGF0ZXJcclxuICAgICAgICBncmFwaExvY2F0aW9uU2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgICAgICBkb3RMb2NhdGlvbiA9IGdyYXBoTG9jYXRpb25TZWxlY3RvciArICcgLmNvbnRlbnQnO1xyXG4gICAgICAgIGN1cnJlbnRFcXVhdGlvbiA9IG9wdHNJbi5lcXVhdGlvbjtcclxuXHJcbiAgICAgICAgLy9tYWtlIHRoZSBwbG90IGFuZCBzY2FsZXNcclxuICAgICAgICBmdW5QbG90ID0gZnVuY3Rpb25QbG90KGdyYXBoT3B0aW9ucyk7XHJcbiAgICAgICAgeFNjYWxlID0gZnVuUGxvdC5tZXRhLnhTY2FsZTtcclxuICAgICAgICB5U2NhbGUgPSBmdW5QbG90Lm1ldGEueVNjYWxlO1xyXG5cclxuICAgICAgICAvL2NsZWFuIG91dCBhbnkgb2xkIHBvaW50cyBmaXJzdFxyXG4gICAgICAgIGQzLnNlbGVjdEFsbChkb3RMb2NhdGlvbiArICcgLnBvaW50JykucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1cGRhdGU6IHVwZGF0ZSxcclxuICAgICAgICBzZXR1cDogc2V0dXBcclxuICAgIH07XHJcbn0oKSk7XHJcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAvKlxyXG4gICAgTG9hZCBRdWVyeSBzdWJzdHJpbmdcclxuICAgICovXHJcbiAgICBcclxuICAgIGlmIChsb2NhdGlvbi5zZWFyY2ggPT0gXCJcIikge1xyXG4gICAgICAgICAgICAvL0RlZmF1bHQgcXVlcnkgc3RyaW5nIGlmIG5vdGhpbmcgcHJvdmlkZWRcclxuICAgICAgICB2YXIgcXVlcnlWYXJzID0gW107XHJcbiAgICAgICAgcXVlcnlWYXJzLnB1c2goXCJmaWxlPWZ1bmNNYWNoaW5lU2V0dGluZ3NcIik7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIC8vIEdyYWIgdGhlIHF1ZXJ5IHN0cmluZyBhbmQgb3B0aW9uc1xyXG4gICAgICAgIHZhciBxdWVyeVZhcnMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTtcclxuICAgICAgICAvLyBTZXQgcXVlcnlWYXJzIHRvIGJlIGFycmF5IG9mIHBhcmFtZXRlcnNcclxuICAgICAgICBxdWVyeVZhcnMgPSBxdWVyeVN0cmluZy5zcGxpdChcIiZcIik7XHJcblxyXG4gICAgfVxyXG4gICAgdmFyIGFsbFF1ZXJpZXMgPSB7fTtcclxuXHJcbiAgICBxdWVyeVZhcnMuZm9yRWFjaChmdW5jdGlvbiAocXVlcnkpe1xyXG4gICAgICAgIHZhciBwYWlyID0gcXVlcnkuc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgIGFsbFF1ZXJpZXNbcGFpclswXV0gPSBwYWlyWzFdO1xyXG4gICAgfSlcclxuXHJcbi8vICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVlcnlWYXJzLmxlbmd0aDsgaSsrKSB7XHJcbi8vICAgICAgICB2YXIgcGFpciA9IHF1ZXJ5VmFyc1tpXS5zcGxpdChcIj1cIik7XHJcbi8vICAgICAgICBhbGxRdWVyaWVzW3BhaXJbMF1dID0gcGFpclsxXTtcclxuLy8gICAgfVxyXG5jb25zb2xlLmxvZyhxdWVyeVZhcnMpO1xyXG4gICAgZnVuY3Rpb24gc2hvd1Byb2ZPcHRpb25zKHByb2ZPcHQsIGluaXQpIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgIEFwcGVuZCB0aGUgcHJvZmVzc29yJ3MgY2hvc2VuIGVxdWF0aW9ucyB0byB0aGUgYXBwbGljYXRpb25cclxuICAgICAgICAqL1xyXG5cclxuICAgICAgICB2YXIgc3RyaW5naWZpZWREYXRhID0gSlNPTi5zdHJpbmdpZnkoaW5pdCksXHJcbiAgICAgICAgICAgIG9wdCA9ICQoXCI8b3B0aW9uPjwvb3B0aW9uPlwiKS5hcHBlbmQocHJvZk9wdC5uYW1lKTtcclxuXHJcbiAgICAgICAgJChvcHQpXHJcbiAgICAgICAgICAgIC52YWwocHJvZk9wdC5lcXVhdGlvbilcclxuICAgICAgICAgICAgLmF0dHIoXCJkYXRhLXByb2ZPcHRcIiwgc3RyaW5naWZpZWREYXRhKTtcclxuXHJcbiAgICAgICAgJChcInNlbGVjdFwiKVxyXG4gICAgICAgICAgICAuYXBwZW5kKG9wdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIExvYWQgdGhlIHByb2Zlc3NvciBjb25maWd1cmF0aW9uIGZpbGVcclxuXHJcbiAgICBnZW5lcmFsIHF1ZXJ5OiA/ZmlsZT1mdW5jTWFjaGluZVNldHRpbmdzJmxvYWQ9Z2VuZXJhbFxyXG4gICAgKi9cclxuXHJcbiAgICAkLmdldEpTT04oYWxsUXVlcmllcy5maWxlICsgXCIuanNvblwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgXCJsb2FkXCIgcXVlcnksIGxvYWQgaXQsIG90aGVyd2lzZSBsb2FkIHRoZSBnZW5lcmFsIG9wdGlvbi5cclxuICAgICAgICBpZiAoYWxsUXVlcmllcy5sb2FkKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGRhdGFbYWxsUXVlcmllcy5sb2FkXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBkYXRhLmdlbmVyYWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiI3RpdGxlXCIpLmh0bWwocmVzdWx0LnRpdGxlKTtcclxuICAgICAgICAkKFwiI2luc3RydWN0aW9uVGV4dFwiKS5odG1sKHJlc3VsdC5pbnN0cnVjdGlvbnMpO1xyXG5cclxuICAgICAgICB3aW5kb3cucHJvZmVzc29yQ29uZmlnRmlsZSA9IHJlc3VsdC5lcXVhdGlvbnM7XHJcblxyXG4gICAgICAgICQuZWFjaChyZXN1bHQuZXF1YXRpb25zLCBmdW5jdGlvbiAoaSwgcHJvZk9wdCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGluaXQgPSB7XHJcbiAgICAgICAgICAgICAgICBncmFwaE9wdDogcHJvZk9wdFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgc2hvd1Byb2ZPcHRpb25zKHByb2ZPcHQsIGluaXQpO1xyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgRGlzcGxheSB0aGUgZGVmYXVsdCBlcXVhdGlvbiB0byB0aGUgZnVuY3Rpb24gbWFjaGluZVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy9pbiBldmVudHMuanNcclxuICAgICAgICAgICAgICAgIHBsb3RHcmFwaC5zZXR1cChpbml0LCBcIiNncmFwaFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyYXBoXCIpLmZpcnN0Q2hpbGQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qQ2hlY2tib3ggb25jbGljayBldmVudCovXHJcbiAgICAgICAgICAgICAgICAkKFwiaW5wdXQjc2hvd0dyYXBoW3R5cGU9J2NoZWNrYm94J11cIikuY2xpY2soZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBlLnRhcmdldC5jaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JhcGhcIikuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JhcGhcIikuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VQbG90KHByb2ZPcHQuZXF1YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSkuZmFpbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcIiNzdGF0dXMgcFwiKS5hcHBlbmQoXCJBZGQgYSBxdWVyeSBzdHJpbmdcIilcclxuICAgIH0pO1xyXG5cclxufSk7XHJcbiIsInZhciBlcXVQYXJhID0gJChcIiNmdW5jdGlvbk1hY2hpbmUgI2VxdVwiKVswXSxcclxuICAgIHJhbmdlU3BlZWQgPSAkKFwiI2FuaW1hdGVcIikudmFsKCksXHJcbiAgICBhbmlEdXJhdGlvbiA9ICgxICogNSkgLyByYW5nZVNwZWVkO1xyXG5cclxuJCgnI2FuaW1hdGUnKS5jaGFuZ2UoZSA9PiB7XHJcbiAgICBhbmlEdXJhdGlvbiA9ICgxICogNSkgLyBlLnRhcmdldC52YWx1ZTtcclxufSlcclxuXHJcbmZ1bmN0aW9uIHJ1bkFuaW1hdGlvbihuYW1lLCB2YWx1ZSkge1xyXG4gICAgLypcclxuICAgIFRoaXMgaXMgYSBmdW5jdGlvbiBmYWN0b3J5IHdoaWNoIHdpbGwgZ3JhYiB0aGVcclxuICAgIG5lY2Vzc2FyeSBkYXRhIGFuZCB0aGVuIHJldHVybiB0aGUgZnVuY3Rpb24gcHJvbWlzZVxyXG4gICAgKi9cclxuICAgIHJldHVybiBmdW5jdGlvbiBhbmltYXRpb24oYW5pU2V0dGluZ3MpIHtcclxuICAgICAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgICAgICB2YXIgZGF0YXBvaW50ID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdLFxyXG4gICAgICAgICAgICBudW1QYXJhID0gZGF0YXBvaW50LmVsZW1lbnQ7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgTWFrZSB0aGUgcHJvbWlzZSB0aGF0IHdoZW4gdGhlIGR5bmFtaWNcclxuICAgICAgICBhbmltYXRpb24gcGF0aCBpcyBkb25lIHRoZW4gdGhpcyBwcm9taXNlIGlzIGZpbmlzaGVkXHJcbiAgICAgICAgKi9cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgJChudW1QYXJhKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwodmFsdWUpXHJcbiAgICAgICAgICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBcImFuaW1hdGlvblwiOiBgJHtuYW1lfSR7YW5pU2V0dGluZ3MuY3VycmVudFJvdW5kfSAke2FuaUR1cmF0aW9ufXMgZWFzZS1pbi1vdXRgLFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbmUoJ2FuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YXR1c01lc3NhZ2UobWVzc2FnZSkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAvKlxyXG4gICAgVGhpcyBpcyBhIGZ1bmN0aW9uIGZhY3Rvcnkgd2hpY2ggd2lsbCBncmFiIHRoZVxyXG4gICAgbmVjZXNzYXJ5IGRhdGEgYW5kIHRoZW4gcmV0dXJuIHRoZSBmdW5jdGlvbiBwcm9taXNlXHJcbiAgICAqL1xyXG4gICAgdmFyIHN0YXR1c0JhciA9ICQoXCIjc3RhdHVzIHBcIik7XHJcblxyXG4gICAgc3RhdHVzQmFyXHJcbiAgICAgICAgLmh0bWwoJycpXHJcbiAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgIFwiZm9udFdlaWdodFwiOiBcIm5vcm1hbFwiLFxyXG4gICAgICAgICAgICBcImNvbG9yXCI6IFwiYmxhY2tcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoYW5pU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgc3RhdHVzQmFyLmh0bWwobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlcGxhY2VYRXF1KGFuaVNldHRpbmdzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAvKlxyXG4gICAgUmVwbGFjZSB0aGUgeCBpbiB0aGUgZGlzYXBwZWFyZWQgZXF1YXRpb24gd2l0aG91dCBoYXZpbmcgdGhlIHkgZGlzYXBwZWFyLlxyXG4gICAgKi9cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGlmIChhbmlTZXR0aW5ncy5ncmFwaE9wdC5oaWRlRXF1YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dERpc2FwcGVhciAke2FuaUR1cmF0aW9uKjAuNX1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0V2YWx1YXRlRXF1KGFuaVNldHRpbmdzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAvKlxyXG4gICAgR2V0IHRoZSB5IGFuc3dlciBhbmQgdGhlIHgtY2hhbmdlZCBlcXVhdGlvblxyXG4gICAgKi9cclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXHJcbiAgICAgICAgY2hhbmdlRXF1ID0gcG9pbnREYXRhLmNoYW5nZUVxdTtcclxuXHJcbiAgICAvKlxyXG4gICAgU2hvdyB0aGUgbmV3IGVxdWF0aW9uIHdpdGggdGhlIHJlcGxhY2VkIHgtdmFsdWUgZXF1YXRpb25cclxuICAgICovXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBpZiAoYW5pU2V0dGluZ3MuZ3JhcGhPcHQuaGlkZUVxdWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGthdGV4LnJlbmRlcihgJHtjaGFuZ2VFcXV9YCwgZXF1UGFyYSk7XHJcbiAgICAgICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHRBcHBlYXIgJHthbmlEdXJhdGlvbiowLjV9cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd1lBbnMoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBHZXQgdGhlIGN1cnJlbnQgcm91bmQgYW5kIGN1cnJlbnQgZGF0YSBwb2ludHNcclxuICAgICovXHJcbiAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xyXG5cclxuICAgIC8qXHJcbiAgICBBbmltYXRlIHRoZSBuZXcgeSB2YWx1ZSB0byB0aGUgY29vcmRpbmF0ZWQgeSBjb2x1bW4gYW5kIG9uY2VcclxuICAgIGFuaW1hdGlvbiBpcyBkb25lIHRoZW4gcmV0dXJuIHRoZSBwcm9taXNlXHJcbiAgICAqL1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgaWYgKGFuaVNldHRpbmdzLmdyYXBoT3B0LmhpZGVFcXVhdGlvbikge1xyXG4gICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0RGlzYXBwZWFyICR7YW5pRHVyYXRpb24qMC41fXMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGthdGV4LnJlbmRlcihgJHtwb2ludERhdGEueX1gLCBlcXVQYXJhKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5TaG93IHRoZSBjaG9zZW4gZXF1YXRpb24gdG8gZ3JhcGhcclxuKi9cclxuZnVuY3Rpb24gc2hvd0VxdWF0aW9uQWdhaW4oYW5pU2V0dGluZ3MpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGlmIChhbmlTZXR0aW5ncy5ncmFwaE9wdC5oaWRlRXF1YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cmF0aW9uKjAuNX1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuT25jZSB0aGUgeS12YWx1ZSBhcHBlYXJzIGluIHRoZSBjb3JyZWN0IHktY29sdW1uIHRoZW4gZnVsZmlsbCB0aGUgcHJvbWlzZS5cclxuKi9cclxuZnVuY3Rpb24gcGxhY2VZVmFsdWUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIHZhciBpbnB1dCA9ICQoYHRkI3l2YWwke3BvaW50RGF0YS5pZCArIDF9YClbMF07XHJcbiAgICAgICAgJChpbnB1dCkuaHRtbChcIlwiKTtcclxuICAgICAgICAkKGlucHV0KS5hcHBlbmQoYDxwPiR7cG9pbnREYXRhLnl9PC9wPmApO1xyXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbk9uY2UgdGhlIGVxdWF0aW9uIGlzIGNsZWFyZWQgYW5kIHJlc2V0IHRvIHRoZSBkZWZhdWx0IGVxdWF0aW9uXHJcbnRoZW4gZnVsZmlsbCB0aGUgcHJvbWlzZVxyXG4qL1xyXG5mdW5jdGlvbiByZXNldFJvdW5kKGFuaVNldHRpbmdzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAvLyAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGlmIChhbmlTZXR0aW5ncy5ncmFwaE9wdC5oaWRlRXF1YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dERpc2FwcGVhciAke2FuaUR1cmF0aW9uKjAuMTV9cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGthdGV4LnJlbmRlcihgJHtwcm9mT3B0LmxhdGV4fWAsIGVxdVBhcmEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcblJldHVybiB0byBkZWZhdWx0IGJlZ2lubmluZyBlcXVhdGlvbiBmb3IgdGhlIG5leHQgYW5pbWF0aW9uIG9yIGZvciB0aGUgZW5kXHJcbiovXHJcbmZ1bmN0aW9uIHNob3dEZWZhdWx0RXF1KGFuaVNldHRpbmdzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBpZiAoYW5pU2V0dGluZ3MuZ3JhcGhPcHQuaGlkZUVxdWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHRBcHBlYXIgJHthbmlEdXJhdGlvbiowLjE1fXMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5BY2NlcHQgdGhlIGRhdGFwb2ludCBhbmQgaXRzIGl0ZXJhdG9yIGFuZCBwbG90IHRoYXQgcG9pbnQgYmVpbmcgcGFzc2VkIHRocm91Z2hcclxuKi9cclxuZnVuY3Rpb24gcGxvdHRlcihhbmlTZXR0aW5ncykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBwbG90R3JhcGgudXBkYXRlKGFuaVNldHRpbmdzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcblRoaXMgZnVuY3Rpb24gYWN0cyBhcyBhbiBpdGVyYXRvciBzbyB0aGF0IHRoZSBwcm9taXNlIGNoYWluIGtub3dzIHdoaWNoXHJcbmRhdGFwb2ludCB0byBoYW5kbGUgYW5kIHRvIGFuaW1hdGVcclxuKi9cclxuZnVuY3Rpb24gdXBkYXRlUm91bmQoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBwbGFjZWhvbGRlciA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBhbmlTZXR0aW5ncy5jdXJyZW50Um91bmQgKz0gMTtcclxuICAgICAgICBwbGFjZWhvbGRlci51cGRhdGVQb2ludCA9IGZhbHNlO1xyXG5cclxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLypcclxuVHdvIGZ1bmN0aW9ucyBpbiBvcmRlciB0byByZXBsYWNlIHRoZSBmdW5jdGlvbiBtYWNoaW5lIGdpZiB3aXRoIHRoZSBhbmltYXRlZFxyXG5naWYgYW5kIGJhY2t3YXJkcy5cclxuKi9cclxuZnVuY3Rpb24gYW5pbWF0ZUZ1bmNNYWNoaW5lKGFuaVNldHRpbmdzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKFwiI2Z1bmN0aW9uTWFjaGluZVwiKS5jc3Moe1xyXG4gICAgICAgICAgICBcImJhY2tncm91bmQtaW1hZ2VcIjogXCJ1cmwoLi9pbWcvZnVuY3Rpb25NYWNoaW5lQW5pLmdpZilcIlxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncylcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdG9wQW5pRnVuY01hY2hpbmUoYW5pU2V0dGluZ3MpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICQoXCIjZnVuY3Rpb25NYWNoaW5lXCIpLmNzcyh7XHJcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiOiBcInVybCguL2ltZy9mdW5jdGlvbk1hY2hpbmVTdGlsbC5naWYpXCJcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpXHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuQSBmdW5jdGlvbiB0byBzaG93IHRoZSB5IGFuc3dlciBsZWF2aW5nIHRoZSBmdW5jdGlvbiBtYWNoaW5lIHRvXHJcbnN0YXJ0IHRoZSBuZXh0IGFuaW1hdGlvbiBvZiBnb2luZyBiYWNrIHRvIHRoZSB5IGNvbHVtbi5cclxuKi9cclxuZnVuY3Rpb24gbWluaUFuaShhbmlTZXR0aW5ncykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcblxyXG4gICAgICAgIHZhciBwbGFjZWhvbGRlciA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcclxuICAgICAgICAgICAgeXZhbHVlID0gcGxhY2Vob2xkZXIueSxcclxuICAgICAgICAgICAgcGFyYSA9ICQoYDxwPiR7eXZhbHVlfTwvcD5gKTtcclxuXHJcbiAgICAgICAgJChwYXJhKS5jc3Moe1xyXG4gICAgICAgICAgICBcImZvbnRTaXplXCI6IFwiMjBweFwiXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgJChcImJvZHlcIikuYXBwZW5kKHBhcmEpO1xyXG5cclxuICAgICAgICBwYXJhXHJcbiAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiA2MzAsXHJcbiAgICAgICAgICAgICAgICB0b3A6IDE2MFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgdG9wOiAyMDBcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHBhcmEuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuQSBwcm9taXNlIGNoYWluIHRvIHJ1biB0aHJvdWdoIHRoZSB3aG9sZSBhbmltYXRpb24gcHJvY2Vzc1xyXG5cclxuTk9URVxyXG5BIHByb21pc2UgY2hhaW4gaGFzIGJlZW4gdXRpemlsZWQgaW4gb3JkZXIgdG8gZWFzaWx5IHBsdWdpblxyXG5leHRyYSBmdW5jdGlvbnMgdGhhdCB3b3VsZCBiZSBncmVhdCB0byBoYXZlIGluIHRoZSBhbmltYXRpb25cclxucHJvY2Vzcy4gIEEgcHJvbWlzZSBjaGFpbiBoYXMgYWxzbyBiZWVuIHVzZWQgaW4gb3JkZXIgdG8gd2FpdFxyXG5mb3IgYSBhbmltYXRpb24gdG8gZW5kIHRvIHN0YXJ0IHRoZSBuZXh0IGFuaW1hdGlvbi5cclxuKi9cclxuXHJcbi8qXHJcbkRlZmF1bHQgUHJvbWlzZSBDaGFpblxyXG4qL1xyXG5mdW5jdGlvbiBhbmlQcm9taXNlQ2hhaW4oZHBzLCBjaGFpbikge1xyXG5cclxuICAgIGRwcy5kYXRhcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGRhdGFwb2ludCkge1xyXG4gICAgICAgIGlmIChkYXRhcG9pbnQudXBkYXRlUG9pbnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgY2hhaW4gPSBjaGFpblxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocnVuQW5pbWF0aW9uKFwieFRvTWFjaGluZVwiLCBkYXRhcG9pbnQueCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihhbmltYXRlRnVuY01hY2hpbmUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihzdGF0dXNNZXNzYWdlKFwiQ2FsY3VsYXRpbmdcIikpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXBsYWNlWEVxdSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dFdmFsdWF0ZUVxdSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dZQW5zKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2hvd0VxdWF0aW9uQWdhaW4pXHJcbiAgICAgICAgICAgICAgICAudGhlbihzdG9wQW5pRnVuY01hY2hpbmUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihzdGF0dXNNZXNzYWdlKFwiXCIpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4obWluaUFuaSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJ1bkFuaW1hdGlvbihcIm1hY2hpbmVUb1lcIiwgZGF0YXBvaW50LnkpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxhY2VZVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihydW5BbmltYXRpb24oXCJ5VG9TdGF0dXNCYXJcIiwgYCgke2RhdGFwb2ludC54fSwke2RhdGFwb2ludC55fSlgKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoYFBsb3R0aW5nICgke2RhdGFwb2ludC54fSwke2RhdGFwb2ludC55fSlgKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHBsb3R0ZXIpXHJcbiAgICAgICAgICAgICAgICAudGhlbihzdGF0dXNNZXNzYWdlKGBgKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc2V0Um91bmQpXHJcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RGVmYXVsdEVxdSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoYWluID0gY2hhaW4udGhlbih1cGRhdGVSb3VuZCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuSWYgdGhlIFwiSGlkZSBBbmltYXRpb25cIiBjaGVja2JveCBpcyBjaGVja2VkIHRoZW4gc2tpcCB0aGUgd2hvbGUgYW5pbWF0aW9uXHJcbnByb21pc2UgY2hhaW4gYW5kIGp1c3QgYXBwZW5kIHRoZSB5IHZhbHVlc1xyXG4qL1xyXG5mdW5jdGlvbiBhbmltYXRlSGlkZShkcHMsIGNoYWluKSB7XHJcblxyXG4gICAgZHBzLmRhdGFwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoZGF0YXBvaW50KSB7XHJcbiAgICAgICAgaWYgKGRhdGFwb2ludC51cGRhdGVQb2ludCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjaGFpbiA9IGNoYWluXHJcbiAgICAgICAgICAgICAgICAudGhlbihwbGFjZVlWYWx1ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoYFBsb3R0aW5nICgke2RhdGFwb2ludC54fSwke2RhdGFwb2ludC55fSlgKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHBsb3R0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGFpbiA9IGNoYWluLnRoZW4odXBkYXRlUm91bmQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbkhhbmRsZSBhbGwgQ1NTIGFuaW1hdGlvbnMgYnkgY3JlYXRpbmcgYSBQcm9taXNlIGNoYWluIHRocm91Z2ggYSBmb3IgbG9vcC5cclxuKi9cclxuZnVuY3Rpb24gYW5pbWF0b3JDb250cm9sKGRwcykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIG51bUNvbnRhaW5lciA9ICQoXCIjbnVtQ29udGFpbmVyXCIpLFxyXG4gICAgICAgIGNoYWluID0gUHJvbWlzZS5yZXNvbHZlKGRwcyk7XHJcblxyXG4gICAgbnVtQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgaWYgKGFuaUR1cmF0aW9uID09PSAwLjUpIHtcclxuICAgICAgICBhbmltYXRlSGlkZShkcHMsIGNoYWluKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYW5pUHJvbWlzZUNoYWluKGRwcywgY2hhaW4pO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCIvKlxyXG5TZXQgdXAgdGhlIGJhc2ljIHZhcmlhYmxlcy5cclxuKi9cclxudmFyIHhNZW1vcnkgPSBbXSxcclxuICAgIGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFt0eXBlPSdudW1iZXInXVwiKSxcclxuICAgIGlucHV0Q291bnQgPSBpbnB1dHMubGVuZ3RoLFxyXG4gICAgcnVuTWFzdGVyID0gdHJ1ZSxcclxuICAgIHJ1biA9IHRydWU7XHJcblxyXG4vKlxyXG5BdHRhY2ggYW4gb25pbnB1dCBldmVudCB0byBhbGwgdGhlIGlucHV0IGJveGVzIGluIG9yZGVyIHRvIHZhbGlkYXRlIHRoZW0gd2l0aGluIHRoZSBib3VuZHNcclxudGhhdCB0aGUgcHJvZmVzc29yIGhhcyBjaG9zZW4uICBJZiB0aGUgYm91bmRzIGFyZSBleGNlZWRlZCwgdGhlbiBkaXNhYmxlIHRoZSBcIkdvIVwiIGJ1dHRvblxyXG5hbmQgb3V0cHV0IGEgbWVzc2FnZSB0byB0aGUgc3RhdHVzIGJhci5cclxuKi9cclxuZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICBpbnB1dHNbaV0ub25rZXl1cCA9IGUgPT4ge1xyXG5cclxuICAgICAgICB2YXIgeElucHV0VmFsID0gZS5zcmNFbGVtZW50LnZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoZS53aGljaCA9PT0gNjkpIHtcclxuICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgICAgICAkKFwiI3N0YXR1cyBwXCIpLmh0bWwoYENhbid0IGRvIHRoYXQgYnJvIWApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbi8qXHJcbkZ1bmN0aW9uIHRvIHNlbGVjdCB0aGUgY2hvc2VuIGVxdWF0aW9uIHdpdGggaXRzIG5hbWUgYW5kIGdyYXBoIHdpbmRvdyBib3VuZGFyaWVzLlxyXG4qL1xyXG5mdW5jdGlvbiBjaGVja0NvbmZpZyh2YWwpIHtcclxuICAgIHZhciBwcm9mT3B0O1xyXG4gICAgJC5lYWNoKHByb2Zlc3NvckNvbmZpZ0ZpbGUsIGZ1bmN0aW9uIChpLCBpdGVtKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0uZXF1YXRpb24gPT09IHZhbCkge1xyXG4gICAgICAgICAgICBwcm9mT3B0ID0gaXRlbTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHByb2ZPcHQ7XHJcbn1cclxuXHJcbi8qXHJcblVwb24gY2hvb3NpbmcgYW5vdGhlciBlcXVhdGlvbiB0byBncmFwaCwgY2xlYXIgYWxsIHRoZSB2YWx1ZXNcclxuKi9cclxuZnVuY3Rpb24gY2xlYXJWYWx1ZXMoKSB7XHJcbiAgICB2YXIgeGlucHV0cyA9ICQoXCJpbnB1dFt0eXBlPSdudW1iZXInXVwiKSxcclxuICAgICAgICB5aW5wdXRzID0gJChgdHIgdGQ6bnRoLW9mLXR5cGUoMilgKTtcclxuXHJcbiAgICB4aW5wdXRzLmVhY2goZnVuY3Rpb24gKGksIGl0ZW0pIHtcclxuICAgICAgICBpdGVtLnZhbHVlID0gXCJcIjtcclxuICAgIH0pO1xyXG5cclxuICAgIHlpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSwgaXRlbSkge1xyXG4gICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5EaXBzbGF5IEthdGV4IGVxdWF0aW9uLiBBTFNPIHVzZWQgaW4gYWpheC5qc1xyXG4qL1xyXG5mdW5jdGlvbiBjaGFuZ2VQbG90KHZhbCkge1xyXG5cclxuICAgIHhNZW1vcnkgPSBbXTtcclxuXHJcbiAgICBjbGVhclZhbHVlcygpO1xyXG5cclxuICAgIHdpbmRvdy5wcm9mT3B0ID0gY2hlY2tDb25maWcodmFsKTtcclxuXHJcbiAgICB2YXIgZXF1YXQgPSB2YWwsXHJcbiAgICAgICAgZXF1UGFyYSA9ICQoXCIjZnVuY3Rpb25NYWNoaW5lICNlcXVcIilbMF07XHJcblxyXG4gICAgJChlcXVQYXJhKS5lbXB0eSgpO1xyXG5cclxuICAgIGlmICh3aW5kb3cucHJvZk9wdC5oaWRlRXF1YXRpb24gPT09IGZhbHNlKSB7XHJcbiAgICAgICAga2F0ZXgucmVuZGVyKHdpbmRvdy5wcm9mT3B0LmxhdGV4LCBlcXVQYXJhKTtcclxuICAgIH0gZWxzZSBpZiAod2luZG93LnByb2ZPcHQuaGlkZUVxdWF0aW9uID09PSB0cnVlKSB7XHJcbiAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAuYXBwZW5kKFwiPGgyPk15c3RlcnkgRXF1YXRpb248L2gyPlwiKVxyXG4gICAgICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgICAgIFwicGFkZGluZ1RvcFwiOiBcIjVweFwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLypcclxuQW5pbWF0aW9uIHBhdGggZm9yIHRoZSBzdGFpcnN0ZXBcclxuKi9cclxuZnVuY3Rpb24gc3RhaXJTdGVwKG9wdGlvbnMpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIGhpZ2h3YXlQYXRoID0gMjgwLFxyXG4gICAgICAgIGxhc3RTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW2RvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aCAtIDFdO1xyXG4gICAgbGFzdFNoZWV0Lmluc2VydFJ1bGUoYEBrZXlmcmFtZXMgJHtvcHRpb25zLm5hbWV9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtvcHRpb25zLnN0YXJ0VG9wT2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7b3B0aW9ucy5zdGFydExlZnRPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzMyUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtvcHRpb25zLnN0YXJ0VG9wT2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7aGlnaHdheVBhdGh9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA2NiUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtvcHRpb25zLmVuZFRvcE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke2hpZ2h3YXlQYXRofXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOTAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7b3B0aW9ucy5lbmRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtvcHRpb25zLmVuZExlZnRPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gLCBsYXN0U2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcclxufVxyXG5cclxuLypcclxuQSBzZXQgb2YgZnVuY3Rpb25zIHVzaW5nIHRoZSBzdGFpcnN0ZXAgYW5pbWF0aW9uIHRlbXBsYXRlXHJcbnRvIGNyZWF0ZSBwYXRod2F5cyB3aXRoIGNvb3JkaW5hdGUgZGF0YVxyXG4qL1xyXG5mdW5jdGlvbiBtYWtlWFRvTWFjaGluZShpbnB1dENvcmRzLCBpbmRleCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBzdGFpclN0ZXAoe1xyXG4gICAgICAgIHN0YXJ0VG9wT2ZmOiBpbnB1dENvcmRzLnRvcCArIDEwLFxyXG4gICAgICAgIHN0YXJ0TGVmdE9mZjogaW5wdXRDb3Jkcy5sZWZ0ICsgMzAsXHJcbiAgICAgICAgZW5kVG9wT2ZmOiAxNTAsXHJcbiAgICAgICAgZW5kTGVmdE9mZjogNDUwLFxyXG4gICAgICAgIG5hbWU6IGB4VG9NYWNoaW5lJHtpbmRleH1gXHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZU1hY2hpbmVUb1koaW5wdXRDb3JkcywgaW5kZXgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgc3RhaXJTdGVwKHtcclxuICAgICAgICBzdGFydFRvcE9mZjogMjAwLFxyXG4gICAgICAgIHN0YXJ0TGVmdE9mZjogNjMwLFxyXG4gICAgICAgIGVuZFRvcE9mZjogaW5wdXRDb3Jkcy50b3AgKyAxMCxcclxuICAgICAgICBlbmRMZWZ0T2ZmOiBpbnB1dENvcmRzLnJpZ2h0ICsgNSxcclxuICAgICAgICBuYW1lOiBgbWFjaGluZVRvWSR7aW5kZXh9YFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VZVG9TdGF0dXNCYXIoaW5wdXRDb3JkcywgaW5kZXgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgc3RhaXJTdGVwKHtcclxuICAgICAgICBzdGFydFRvcE9mZjogaW5wdXRDb3Jkcy50b3AgKyA1LFxyXG4gICAgICAgIHN0YXJ0TGVmdE9mZjogaW5wdXRDb3Jkcy5yaWdodCArIDEwLFxyXG4gICAgICAgIGVuZFRvcE9mZjogNTAsXHJcbiAgICAgICAgZW5kTGVmdE9mZjogNDAwLFxyXG4gICAgICAgIG5hbWU6IGB5VG9TdGF0dXNCYXIke2luZGV4fWBcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5TZXQgdXAgdGhlIHhNZW1vcnkgYXJyYXkgYW5kIHRoZSBhbmltYXRpb24gcGF0aHMgZm9yIGVhY2ggaW5wdXQgYm94LlxyXG5cclxuTk9URTogU2V0dGluZyB1cCB0aGUgeE1lbW9yeSBhcnJheSBhbHNvIG1ha2VzIGl0IHNvIHRoYXQgbm8gYW5pbWF0aW9uc1xyXG4gICAgICBhcmUgcmVwZWF0ZWQgYnkgbXVsdGlwbGUgY2xpY2tzIG9uIHRoZSBcIkdvIVwiIGJ1dHRvbi5cclxuKi9cclxuZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dENvdW50OyBpKyspIHtcclxuICAgIHhNZW1vcnlbaV0gPSBudWxsO1xyXG5cclxuICAgIHZhciBpbnB1dENvb3IgPSBpbnB1dHNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgbWFrZVhUb01hY2hpbmUoaW5wdXRDb29yLCBpKTtcclxuICAgIG1ha2VNYWNoaW5lVG9ZKGlucHV0Q29vciwgaSk7XHJcbiAgICBtYWtlWVRvU3RhdHVzQmFyKGlucHV0Q29vciwgaSk7XHJcbiAgICAkKFwiI251bUNvbnRhaW5lclwiKS5hcHBlbmQoJChgPHA+PC9wPmApKTtcclxufVxyXG5cclxuZnVuY3Rpb24gVXNlckV4Y2VwdGlvbihtZXNzYWdlLCBlcnJvck51bSkge1xyXG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgIHRoaXMuZXJyb3JOdW0gPSBlcnJvck51bTtcclxuICAgIHRoaXMubmFtZSA9IFwiVXNlckV4Y2VwdGlvblwiO1xyXG59XHJcblxyXG4vKlxyXG5TZXQgdXAgdGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdGhlIHByb21pc2UgY2hhaW5cclxuaW4gYW5pbWF0b3IgY29udHJvbC5cclxuKi9cclxuZnVuY3Rpb24gc2V0VXBPYmplY3QoeGlucHV0cywgZ3JhcGhPcHQsIGFuaVNldHRpbmdzKSB7XHJcbiAgICB4aW5wdXRzLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuXHJcbiAgICAgICAgdmFyIHh2YWx1ZSA9ICQodGhpcykudmFsKCksXHJcbiAgICAgICAgICAgIHh2YWwsXHJcbiAgICAgICAgICAgIHJvdW5kaXQ7XHJcblxyXG4gICAgICAgIGlmICh4dmFsdWUpIHtcclxuICAgICAgICAgICAgeHZhbCA9ICt4dmFsdWU7XHJcbiAgICAgICAgICAgIHJvdW5kaXQgPSB4dmFsLnRvRml4ZWQocHJvZk9wdC5yb3VuZGluZyk7XHJcblxyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbChyb3VuZGl0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcm9mT3B0LnZpZXcueC5taW4gPD0gcm91bmRpdCAmJiByb3VuZGl0IDw9IHByb2ZPcHQudmlldy54Lm1heCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByZXBsYWNlWCA9IGdyYXBoT3B0LmVxdWF0aW9uLnJlcGxhY2UoL3gvZywgYCgke3JvdW5kaXR9KWApLFxyXG4gICAgICAgICAgICAgICAgICAgIHl2YWwgPSBtYXRoLmV2YWwocmVwbGFjZVgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgeXZhbCA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dENvb3IgPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHJvdW5kaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiB5dmFsLnRvRml4ZWQocHJvZk9wdC5yb3VuZGluZyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUVxdTogcHJvZk9wdC5sYXRleC5yZXBsYWNlKFwieFwiLCBgKCR7cm91bmRpdH0pYCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQb2ludDogeE1lbW9yeVtpXSAhPT0gcm91bmRpdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICQoXCIjbnVtQ29udGFpbmVyIHBcIikuZ2V0KGkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKFwib3V0IG9mIGRvbWFpblwiLCB4dmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChJbmZpbml0eSA9PT0geXZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKFwidW5kZWZpbmVkIHZhbHVlXCIsIHh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgIENsZWFyIG91dCB0aGUgWXMgd2hlbiB0aGV5IGRvbid0IGVxdWFsIGVhY2ggb3RoZXIgYW5kIG5lZWQgdG8gYmUgdXBkYXRlZFxyXG4gICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIGlmIChwb2ludC51cGRhdGVQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoYHRkI3l2YWwke2kgKyAxfWApLmh0bWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLypVcGRhdGUgdGhlIHhtZW1vcnkqL1xyXG4gICAgICAgICAgICAgICAgeE1lbW9yeVtpXSA9IHJvdW5kaXQ7XHJcbiAgICAgICAgICAgICAgICBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzLnB1c2gocG9pbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oXCJvdXQgb2Ygd2luZG93XCIsIHh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuU2V0IGFsbCB0aGUgZGF0YSB0aGF0IHdpbGwgYmUgc2V0IHRvIGFuaVNldHRpbmdzIGluIHRoZSBzZXRVcE9iamVjdCBmdW5jdGlvblxyXG5cclxuTk9URVxyXG5ncmFwaE9wdC5jYWxsYmFjayBzdGlsbCBuZWVkcyBhIHZpYWJsZSBtZXRob2QhXHJcbiovXHJcbmZ1bmN0aW9uIHN0YXJ0RnVuY01hY2goKSB7XHJcblxyXG4gICAgdmFyIHhpbnB1dHMgPSAkKFwiaW5wdXRbdHlwZT0nbnVtYmVyJ11cIiksXHJcbiAgICAgICAgZ3JhcGhPcHQgPSB7XHJcbiAgICAgICAgICAgIGVxdWF0aW9uOiBwcm9mT3B0LmVxdWF0aW9uLFxyXG4gICAgICAgICAgICBoaWRlRXF1YXRpb246IHByb2ZPcHQuaGlkZUVxdWF0aW9uLFxyXG4gICAgICAgICAgICB2aWV3OiBwcm9mT3B0LnZpZXcsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiBhbmlEdXJhdGlvblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pU2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgIGRhdGFwb2ludHM6IFtdLFxyXG4gICAgICAgICAgICBjdXJyZW50Um91bmQ6IDAsXHJcbiAgICAgICAgICAgIGdyYXBoT3B0OiBncmFwaE9wdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBzZXRVcE9iamVjdCh4aW5wdXRzLCBncmFwaE9wdCwgYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgIGFuaW1hdG9yQ29udHJvbChhbmlTZXR0aW5ncyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgeE1lbW9yeSA9IFtdO1xyXG4gICAgICAgICQoXCIjc3RhdHVzIHBcIilcclxuICAgICAgICAgICAgLmh0bWwoYCR7ZS5lcnJvck51bX0geC12YWx1ZSAke2UubWVzc2FnZX0uYClcclxuICAgICAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgICAgICBcImZvbnRXZWlnaHRcIjogXCJib2xkXCIsXHJcbiAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2I2MjcyN1wiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKkJlZm9yZSBydW5uaW5nIHRoZSBmdW5jdGlvbiBtYWNoaW5lLCBwdXQgYWxsIGlucHV0cyBuZXh0IHRvIGVhY2ggb3RoZXIuKi9cclxuZnVuY3Rpb24gY2xlYW5JbnB1dHMoKSB7XHJcbiAgICB2YXIgeGlucHV0cyA9ICQoXCJpbnB1dFt0eXBlPSdudW1iZXInXVwiKSxcclxuICAgICAgICBpbnB1dEFycmF5ID0gW107XHJcblxyXG4gICAgeGlucHV0cy5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgdmFyIGlucHV0VmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xyXG5cclxuICAgICAgICBpZiAoaW5wdXRWYWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBpbnB1dEFycmF5LnB1c2goaW5wdXRWYWx1ZSk7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgeGlucHV0cy5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgaWYgKGkgPCBpbnB1dEFycmF5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbChpbnB1dEFycmF5W2ldKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbChcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG4kKFwiI2Nsb3NlSGVscFwiKS5jbGljayhlID0+IHtcclxuICAgICQoZS50YXJnZXQucGFyZW50RWxlbWVudCkuZmFkZU91dCgxMDApO1xyXG4gICAgJChcIiNzaGFkZVwiKS5mYWRlT3V0KDIwMCk7XHJcbiAgICBsb2NhbFN0b3JhZ2VbJ2ZpcnN0VGltZUZ1bmN0aW9uTWFjaGluZSddID0gZmFsc2U7XHJcbn0pO1xyXG5cclxuJChcIiNvcGVuSGVscFwiKS5jbGljayhlID0+IHtcclxuICAgICQoXCIjaW5zdHJ1Y3Rpb25zXCIpLmZhZGVJbigxMDApO1xyXG4gICAgJChcIiNzaGFkZVwiKS5mYWRlSW4oMTAwMCk7XHJcbn0pO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHZhciBmaXJzdHRpbWUgPSBsb2NhbFN0b3JhZ2VbJ2ZpcnN0VGltZUZ1bmN0aW9uTWFjaGluZSddO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZmlyc3R0aW1lID09PSBcImZhbHNlXCIpIHtcclxuICAgICAgICAkKFwiI2luc3RydWN0aW9uc1wiKS5oaWRlKCk7XHJcbiAgICAgICAgJChcIiNzaGFkZVwiKS5oaWRlKCk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG4vKlxyXG5PbmNoYW5nZSBldmVudCBoYW5kbGVyIGZvciB0aGUgc2VsZWN0IGh0bWwgZWxlbWVudC5cclxuKi9cclxuJChcInNlbGVjdFwiKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcclxuICAgIHZhciBzZWxlY3RlZCA9ICQoYG9wdGlvblt2YWx1ZT1cIiR7ZS50YXJnZXQudmFsdWV9XCJdYCksXHJcbiAgICAgICAgcHJvZk9wdCA9IEpTT04ucGFyc2Uoc2VsZWN0ZWQuYXR0cihcImRhdGEtcHJvZm9wdFwiKSk7XHJcblxyXG4gICAgcGxvdEdyYXBoLnNldHVwKHByb2ZPcHQsIFwiI2dyYXBoXCIpXHJcbiAgICBjaGFuZ2VQbG90KGUudGFyZ2V0LnZhbHVlKTtcclxufSk7XHJcblxyXG4vKlxyXG5ET0NVTUVOVCBrZXlkb3duIGV2ZW50IGhhbmRsZXJcclxuKi9cclxuJChkb2N1bWVudCkua2V5cHJlc3MoZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmIChlLndoaWNoID09IDEzICYmIHJ1bk1hc3Rlcikge1xyXG4gICAgICAgIGNsZWFuSW5wdXRzKCk7XHJcbiAgICAgICAgc3RhcnRGdW5jTWFjaCgpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8qXHJcbkdPISBDbGljayBldmVudCBoYW5kbGVyXHJcbiovXHJcbiQoXCJpbnB1dFt0eXBlPSdidXR0b24nXVt2YWx1ZT0nR28hJ11cIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHJ1bk1hc3Rlcikge1xyXG4gICAgICAgIGNsZWFuSW5wdXRzKCk7XHJcbiAgICAgICAgc3RhcnRGdW5jTWFjaCgpO1xyXG4gICAgfVxyXG59KTtcclxuIl19
