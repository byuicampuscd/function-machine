"use strict";$(document).ready(function(){$.getJSON("../funcMachineSettings.json",function(n){window.professorConfigFile=n,$.each(n,function(n,e){var o=$("<option></option>").append(e.name);$(o).val(e.equation),$("select").append(o),0===n&&changePlot(e.equation)})})});
"use strict";function startFuncMach(){var e=$("input[type='number']"),t=$("#animate:checked").length>0,n=$("#showGraph:checked").length>0,o=({callback:function(){return Promise.resolve(console.log("Done!"))},animate:t,showGraph:n,equation:profOpt.equation},{datapoints:[],currentRound:0});$.each(e,function(e,t){var n=$(t).val(),a=profOpt.equation;if(n){var c=a.replace("x","("+n+")"),i=math.eval(c),r=t.getBoundingClientRect(),u={x:n,y:i,id:e,changeEqu:profOpt.equation.replace("x","("+n+")"),updatePoint:!0,element:$("<p>"+n+"</p>")[0],beginCoor:{top:r.top,left:r.left},endCoor:{top:55,left:300}};o.datapoints.push(u)}}),animatorControl(o)}function checkConfig(e){var t;return $.each(professorConfigFile,function(n,o){o.equation===e&&(t=o)}),t}function changePlot(e){window.profOpt=checkConfig(e);var t="y = ",n=""+e,o=$("#functionMachine #equ")[0],a=$("#functionMachine #y");$(o).empty(""),katex.render(t,a[0]),katex.render(n,o)}$("select").change(function(e){changePlot(e.target.value)}),$(document).keypress(function(e){13==e.which&&startFuncMach()}),$("input[type='button'][value='Go!']").click(function(){startFuncMach()});
"use strict";function animationTemplate(n){var t=n.datapoints[n.currentRound],e=t.beginCoor.top+5,a=t.beginCoor.left+30,o=t.endCoor.top+5,i=t.endCoor.left+30,s=246.5,r=t.id.toString(),u=$("#numContainer"),p=t.element;return lastSheet.insertRule("@keyframes animationPath"+r+" {\n                            0% {\n                                opacity: 0;\n                                top: "+e+"px;\n                                left: "+a+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+e+"px;\n                                left: "+s+"px;\n                            }\n                            66% {\n                                top: "+o+"px;\n                                left: "+s+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+o+"px;\n                                left: "+i+"px;\n                            }\n                        }",lastSheet.cssRules.length),$(u).append(p),new Promise(function(t){$(p).css("position","absolute").css("top",e+"px").css("left",a+"px").css("animation","animationPath"+r+" 4s ease-in-out").css("opacity","0").css("zIndex","100").bind("animationend",function(e){t(n)})})}function updateRound(n){return new Promise(function(t){n.currentRound+=1,t(n)})}function replaceXEqu(n){return new Promise(function(t){$(statusBar).html("").html("<p>>> Calculating</p>"),$(equPara).css("animation","textDisappear 2s ease-in-out").bind("animationend",function(e){$(equPara).css("opacity",0),t(n)})})}function showEvaluateEqu(n){var t=n.datapoints[n.currentRound],e=t.changeEqu;return new Promise(function(a){"number"==typeof t.y&&$(statusBar).html("").html("<p>>> Returning answer.</p>"),katex.render(""+e,equPara),$(equPara).css("animation","textAppear 1s ease-in-out").bind("animationend",function(t){$(equPara).css("opacity",1),a(n)})})}function showYAns(n){var t=n.datapoints[n.currentRound],e=t.beginCoor.top,a=t.beginCoor.left+100,o=t.endCoor.top,i=t.endCoor.left;return t.endCoor={top:e,left:a},t.beginCoor={top:o,left:i},t.element.innerText=t.y,new Promise(function(e){$(equPara).css("animation","textDisappear 2s ease-in-out").bind("animationend",function(a){$(equPara).css("opacity",0),katex.render(""+t.y,equPara),$(equPara).css("animation","textAppear 1s ease-in-out").bind("animationend",function(n){$(equPara).css("opacity",1)}),e(n)})})}function placeYValue(n){var t=n.datapoints[n.currentRound];return new Promise(function(e){var a=$("td#yval"+(t.id+1))[0];$(a).append("<p>"+t.y+"</p>"),e(n)})}function resetRound(n){n.datapoints[n.currentRound];return new Promise(function(t){$(equPara).css("animation","textDisappear 2s ease-in-out").bind("animationend",function(e){$(statusBar).html("").html("<p>>> Resetting...</p>"),$(equPara).css("opacity",0),katex.render(""+profOpt.equation,equPara),$(equPara).css("animation","textAppear 1s ease-in-out").bind("animationend",function(n){$(equPara).css("opacity",1),$(statusBar).html("")}),t(n)})})}function animatorControl(n){var t=$("#numContainer"),e=Promise.resolve(n);t.innerHTML="";for(var a=0;a<n.datapoints.length;a++)e=e.then(animationTemplate).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(animationTemplate).then(placeYValue).then(resetRound).then(updateRound)}var statusBar=$("#status p"),lastSheet=document.styleSheets[document.styleSheets.length-1],equPara=$("#functionMachine #equ")[0];
"use strict";!function(){for(var t,a,d,p,r=$("tbody"),n=19,e=1;n>=e;e++)p=$("<input>"),t=$("<td></td>"),a=$("<td></td>"),d=$("<tr></tr>"),$(d).attr("id","row"+e),$(p).attr("name","input"+e).attr("type","number"),$(a).attr("id","yval"+e),$(t).append(p),$(d).append(t).append(a),$(r).append(d)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJldmVudHMuanMiLCJhbmltYXRvcmNvbnRyb2wuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiZ2V0SlNPTiIsInJlc3VsdCIsIndpbmRvdyIsInByb2Zlc3NvckNvbmZpZ0ZpbGUiLCJlYWNoIiwiaSIsImZpZWxkIiwib3B0IiwiYXBwZW5kIiwibmFtZSIsInZhbCIsImVxdWF0aW9uIiwiY2hhbmdlUGxvdCIsInN0YXJ0RnVuY01hY2giLCJ4aW5wdXRzIiwiaGlkZUFuaW1hdGlvbkNoZWNrZWQiLCJsZW5ndGgiLCJoaWRlR3JhcGhDaGVja2VkIiwiYW5pU2V0dGluZ3MiLCJjYWxsYmFjayIsIlByb21pc2UiLCJyZXNvbHZlIiwiY29uc29sZSIsImxvZyIsImFuaW1hdGUiLCJzaG93R3JhcGgiLCJwcm9mT3B0IiwiZGF0YXBvaW50cyIsImN1cnJlbnRSb3VuZCIsInh2YWwiLCJyZXBsYWNlWCIsInJlcGxhY2UiLCJ5dmFsIiwibWF0aCIsImV2YWwiLCJpbnB1dENvb3IiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwb2ludCIsIngiLCJ5IiwiaWQiLCJjaGFuZ2VFcXUiLCJ1cGRhdGVQb2ludCIsImVsZW1lbnQiLCJiZWdpbkNvb3IiLCJ0b3AiLCJsZWZ0IiwiZW5kQ29vciIsInB1c2giLCJhbmltYXRvckNvbnRyb2wiLCJjaGVja0NvbmZpZyIsIml0ZW0iLCJlcXVhdCIsImVxdVBhcmEiLCJ5UGFyYSIsImVtcHR5Iiwia2F0ZXgiLCJyZW5kZXIiLCJjaGFuZ2UiLCJlIiwidGFyZ2V0IiwidmFsdWUiLCJrZXlwcmVzcyIsIndoaWNoIiwiY2xpY2siLCJhbmltYXRpb25UZW1wbGF0ZSIsInBvaW50RGF0YSIsInN0YXJ0VG9wT2ZmIiwic3RhcnRMZWZ0T2ZmIiwiZW5kVG9wT2ZmIiwiZW5kTGVmdE9mZiIsImhpZ2h3YXlQYXRoIiwidG9TdHJpbmciLCJudW1Db250YWluZXIiLCJudW1QYXJhIiwibGFzdFNoZWV0IiwiaW5zZXJ0UnVsZSIsImNzc1J1bGVzIiwiY3NzIiwiYmluZCIsInVwZGF0ZVJvdW5kIiwicmVwbGFjZVhFcXUiLCJkYXRhIiwic3RhdHVzQmFyIiwiaHRtbCIsInNob3dFdmFsdWF0ZUVxdSIsInNob3dZQW5zIiwibmV3RW5kVG9wIiwibmV3RW5kTGVmdCIsIm5ld0JlZ2luVG9wIiwibmV3QmVnaW5MZWZ0IiwiaW5uZXJUZXh0IiwicGxhY2VZVmFsdWUiLCJpbnB1dCIsInJlc2V0Um91bmQiLCJkcHMiLCJjaGFpbiIsImlubmVySFRNTCIsInRoZW4iLCJzdHlsZVNoZWV0cyIsInRkMSIsInRkMiIsInRyIiwidGJvZHkiLCJyb3dDb3VudCIsImoiLCJhdHRyIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFBQSxHQUFFQyxVQUFVQyxNQUFNLFdBRWRGLEVBQUVHLFFBQVEsOEJBQStCLFNBQVVDLEdBRS9DQyxPQUFPQyxvQkFBc0JGLEVBRTdCSixFQUFFTyxLQUFLSCxFQUFRLFNBQVVJLEVBQUdDLEdBRXhCLEdBQUlDLEdBQU1WLEVBQUUscUJBQXFCVyxPQUFPRixFQUFNRyxLQUU5Q1osR0FBRVUsR0FBS0csSUFBSUosRUFBTUssVUFFakJkLEVBQUUsVUFBVVcsT0FBT0QsR0FFVCxJQUFORixHQUNBTyxXQUFXTixFQUFNSztBQ2ZqQyxZQUFBLFNBQVNFLGlCQUVMLEdBQUlDLEdBQVVqQixFQUFFLHdCQUNaa0IsRUFBdUJsQixFQUFFLG9CQUFvQm1CLE9BQVMsRUFDdERDLEVBQW1CcEIsRUFBRSxzQkFBc0JtQixPQUFTLEVBU3BERSxJQVBJQyxTQUFVLFdBQ04sTUFBT0MsU0FBUUMsUUFBUUMsUUFBUUMsSUFBSSxXQUV2Q0MsUUFBU1QsRUFDVFUsVUFBV1IsRUFDWE4sU0FBVWUsUUFBUWYsV0FHbEJnQixjQUNBQyxhQUFjLEdBR3RCL0IsR0FBRU8sS0FBS1UsRUFBUyxTQUFVVCxFQUFHSyxHQUN6QixHQUFJbUIsR0FBT2hDLEVBQUVhLEdBQUtBLE1BQ2RDLEVBQVdlLFFBQVFmLFFBRXZCLElBQUlr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RyxJQUFLLEdBTkR1RyxHQUNBQyxFQUNBQyxFQUNBVCxFQUpBVSxFQUFRMUcsRUFBRSxTQUtWMkcsRUFBVyxHQUVOQyxFQUFJLEVBQVFELEdBQUxDLEVBQWVBLElBQzNCWixFQUFRaEcsRUFBRSxXQUNWdUcsRUFBTXZHLEVBQUUsYUFDUndHLEVBQU14RyxFQUFFLGFBQ1J5RyxFQUFLekcsRUFBRSxhQUVQQSxFQUFFeUcsR0FBSUksS0FBSyxLQUFYLE1BQXVCRCxHQUV2QjVHLEVBQUVnRyxHQUFPYSxLQUFLLE9BQWQsUUFBOEJELEdBQUtDLEtBQUssT0FBUSxVQUVoRDdHLEVBQUV3RyxHQUFLSyxLQUFLLEtBQVosT0FBeUJELEdBRXpCNUcsRUFBRXVHLEdBQUs1RixPQUFPcUYsR0FDZGhHLEVBQUV5RyxHQUFJOUYsT0FBTzRGLEdBQUs1RixPQUFPNkYsR0FDekJ4RyxFQUFFMEcsR0FBTy9GLE9BQU84RiIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICQuZ2V0SlNPTihcIi4uL2Z1bmNNYWNoaW5lU2V0dGluZ3MuanNvblwiLCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgIHdpbmRvdy5wcm9mZXNzb3JDb25maWdGaWxlID0gcmVzdWx0O1xyXG5cclxuICAgICAgICAkLmVhY2gocmVzdWx0LCBmdW5jdGlvbiAoaSwgZmllbGQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBvcHQgPSAkKFwiPG9wdGlvbj48L29wdGlvbj5cIikuYXBwZW5kKGZpZWxkLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgJChvcHQpLnZhbChmaWVsZC5lcXVhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAkKFwic2VsZWN0XCIpLmFwcGVuZChvcHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZVBsb3QoZmllbGQuZXF1YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxufSk7XHJcbiIsImZ1bmN0aW9uIHN0YXJ0RnVuY01hY2goKSB7XHJcblxyXG4gICAgdmFyIHhpbnB1dHMgPSAkKFwiaW5wdXRbdHlwZT0nbnVtYmVyJ11cIiksXHJcbiAgICAgICAgaGlkZUFuaW1hdGlvbkNoZWNrZWQgPSAkKFwiI2FuaW1hdGU6Y2hlY2tlZFwiKS5sZW5ndGggPiAwLFxyXG4gICAgICAgIGhpZGVHcmFwaENoZWNrZWQgPSAkKFwiI3Nob3dHcmFwaDpjaGVja2VkXCIpLmxlbmd0aCA+IDAsXHJcbiAgICAgICAgZ3JhcGhPcHQgPSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNvbnNvbGUubG9nKFwiRG9uZSFcIikpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhbmltYXRlOiBoaWRlQW5pbWF0aW9uQ2hlY2tlZCxcclxuICAgICAgICAgICAgc2hvd0dyYXBoOiBoaWRlR3JhcGhDaGVja2VkLFxyXG4gICAgICAgICAgICBlcXVhdGlvbjogcHJvZk9wdC5lcXVhdGlvblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pU2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgIGRhdGFwb2ludHM6IFtdLFxyXG4gICAgICAgICAgICBjdXJyZW50Um91bmQ6IDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICQuZWFjaCh4aW5wdXRzLCBmdW5jdGlvbiAoaSwgdmFsKSB7XHJcbiAgICAgICAgdmFyIHh2YWwgPSAkKHZhbCkudmFsKCksXHJcbiAgICAgICAgICAgIGVxdWF0aW9uID0gcHJvZk9wdC5lcXVhdGlvbjtcclxuXHJcbiAgICAgICAgaWYgKHh2YWwpIHtcclxuICAgICAgICAgICAgdmFyIHJlcGxhY2VYID0gZXF1YXRpb24ucmVwbGFjZShcInhcIiwgYCgke3h2YWx9KWApLFxyXG4gICAgICAgICAgICAgICAgeXZhbCA9IG1hdGguZXZhbChyZXBsYWNlWCksXHJcbiAgICAgICAgICAgICAgICBpbnB1dENvb3IgPSB2YWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcbiAgICAgICAgICAgICAgICBwb2ludCA9IHtcclxuICAgICAgICAgICAgICAgICAgICB4OiB4dmFsLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHl2YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRXF1OiBwcm9mT3B0LmVxdWF0aW9uLnJlcGxhY2UoXCJ4XCIsIGAoJHt4dmFsfSlgKSxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVQb2ludDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiAkKGA8cD4ke3h2YWx9PC9wPmApWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luQ29vcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGlucHV0Q29vci50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGlucHV0Q29vci5sZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlbmRDb29yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogNTUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDMwMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGFuaVNldHRpbmdzLmRhdGFwb2ludHMucHVzaChwb2ludCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYW5pbWF0b3JDb250cm9sKGFuaVNldHRpbmdzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tDb25maWcodmFsKSB7XHJcbiAgICB2YXIgcHJvZk9wdDtcclxuICAgICQuZWFjaChwcm9mZXNzb3JDb25maWdGaWxlLCBmdW5jdGlvbiAoaSwgaXRlbSkge1xyXG4gICAgICAgIGlmIChpdGVtLmVxdWF0aW9uID09PSB2YWwpIHtcclxuICAgICAgICAgICAgcHJvZk9wdCA9IGl0ZW07XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiBwcm9mT3B0O1xyXG59XHJcblxyXG4vL0RpcHNsYXkgS2F0ZXggZXF1YXRpb25cclxuZnVuY3Rpb24gY2hhbmdlUGxvdCh2YWwpIHtcclxuXHJcbiAgICB3aW5kb3cucHJvZk9wdCA9IGNoZWNrQ29uZmlnKHZhbCk7XHJcblxyXG4gICAgdmFyIHkgPSBgeSA9IGAsXHJcbiAgICAgICAgZXF1YXQgPSBgJHt2YWx9YCxcclxuICAgICAgICBlcXVQYXJhID0gJChcIiNmdW5jdGlvbk1hY2hpbmUgI2VxdVwiKVswXSxcclxuICAgICAgICB5UGFyYSA9ICQoXCIjZnVuY3Rpb25NYWNoaW5lICN5XCIpO1xyXG5cclxuICAgICQoZXF1UGFyYSkuZW1wdHkoXCJcIik7XHJcblxyXG4gICAga2F0ZXgucmVuZGVyKHksIHlQYXJhWzBdKTtcclxuICAgIGthdGV4LnJlbmRlcihlcXVhdCwgZXF1UGFyYSk7XHJcbn1cclxuXHJcbi8qKioqKkRPQ1VNRU5UIG9uY2hhbmdlIEVWRU5UIEhBTkRMRVIqKioqKi9cclxuJChcInNlbGVjdFwiKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcclxuICAgIGNoYW5nZVBsb3QoZS50YXJnZXQudmFsdWUpO1xyXG59KTtcclxuXHJcbi8qKioqRE9DVU1FTlQga2V5ZG93biBFVkVOVCBIQU5ETEVSKioqKi9cclxuJChkb2N1bWVudCkua2V5cHJlc3MoZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmIChlLndoaWNoID09IDEzKSB7XHJcbiAgICAgICAgc3RhcnRGdW5jTWFjaCgpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8qKioqKkdPISBDbGljayoqKioqL1xyXG4kKFwiaW5wdXRbdHlwZT0nYnV0dG9uJ11bdmFsdWU9J0dvISddXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgIHN0YXJ0RnVuY01hY2goKTtcclxufSk7IiwidmFyIHN0YXR1c0JhciA9ICQoXCIjc3RhdHVzIHBcIiksXHJcbiAgICBsYXN0U2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGggLSAxXSxcclxuICAgIGVxdVBhcmEgPSAkKFwiI2Z1bmN0aW9uTWFjaGluZSAjZXF1XCIpWzBdO1xyXG5cclxuZnVuY3Rpb24gYW5pbWF0aW9uVGVtcGxhdGUoYW5pU2V0dGluZ3MpIHtcclxuXHJcbiAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdLFxyXG4gICAgICAgIHN0YXJ0VG9wT2ZmID0gcG9pbnREYXRhLmJlZ2luQ29vci50b3AgKyA1LFxyXG4gICAgICAgIHN0YXJ0TGVmdE9mZiA9IHBvaW50RGF0YS5iZWdpbkNvb3IubGVmdCArIDMwLFxyXG4gICAgICAgIGVuZFRvcE9mZiA9IHBvaW50RGF0YS5lbmRDb29yLnRvcCArIDUsXHJcbiAgICAgICAgZW5kTGVmdE9mZiA9IHBvaW50RGF0YS5lbmRDb29yLmxlZnQgKyAzMCxcclxuICAgICAgICBoaWdod2F5UGF0aCA9IDI0Ni41LFxyXG4gICAgICAgIGlkID0gcG9pbnREYXRhLmlkLnRvU3RyaW5nKCksXHJcbiAgICAgICAgbnVtQ29udGFpbmVyID0gJChcIiNudW1Db250YWluZXJcIiksXHJcbiAgICAgICAgbnVtUGFyYSA9IHBvaW50RGF0YS5lbGVtZW50O1xyXG5cclxuICAgIGxhc3RTaGVldC5pbnNlcnRSdWxlKGBAa2V5ZnJhbWVzIGFuaW1hdGlvblBhdGgke2lkfSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7c3RhcnRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtzdGFydExlZnRPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzMyUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtzdGFydFRvcE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke2hpZ2h3YXlQYXRofXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNjYlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7ZW5kVG9wT2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7aGlnaHdheVBhdGh9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA5MCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHtlbmRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtlbmRMZWZ0T2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCwgbGFzdFNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XHJcblxyXG4gICAgJChudW1Db250YWluZXIpLmFwcGVuZChudW1QYXJhKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKG51bVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIpXHJcbiAgICAgICAgICAgIC5jc3MoXCJ0b3BcIiwgYCR7c3RhcnRUb3BPZmZ9cHhgKVxyXG4gICAgICAgICAgICAuY3NzKFwibGVmdFwiLCBgJHtzdGFydExlZnRPZmZ9cHhgKVxyXG4gICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGBhbmltYXRpb25QYXRoJHtpZH0gNHMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAuY3NzKFwib3BhY2l0eVwiLCBgMGApXHJcbiAgICAgICAgICAgIC5jc3MoXCJ6SW5kZXhcIiwgYDEwMGApXHJcbiAgICAgICAgICAgIC5iaW5kKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUm91bmQoYW5pU2V0dGluZ3MpIHtcclxuICAgIC8vbWFrZSBzdXJlIHRoYXQgdGhlIHVwZGF0ZVBvaW50IGlzIGFsc28gc2hvd0V2YWx1YXRlRXF1ZC5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGFuaVNldHRpbmdzLmN1cnJlbnRSb3VuZCArPSAxO1xyXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiByZXBsYWNlWEVxdShkYXRhKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKHN0YXR1c0JhcilcclxuICAgICAgICAgICAgLmh0bWwoXCJcIilcclxuICAgICAgICAgICAgLmh0bWwoXCI8cD4+PiBDYWxjdWxhdGluZzwvcD5cIik7XHJcblxyXG4gICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBcInRleHREaXNhcHBlYXIgMnMgZWFzZS1pbi1vdXRcIilcclxuICAgICAgICAgICAgLmJpbmQoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAwKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dFdmFsdWF0ZUVxdShhbmlTZXR0aW5ncykge1xyXG4gICAgXHJcbiAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdLFxyXG4gICAgICAgIGNoYW5nZUVxdSA9IHBvaW50RGF0YS5jaGFuZ2VFcXU7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgcG9pbnREYXRhLnkgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgJChzdGF0dXNCYXIpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChcIlwiKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoXCI8cD4+PiBSZXR1cm5pbmcgYW5zd2VyLjwvcD5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBrYXRleC5yZW5kZXIoYCR7Y2hhbmdlRXF1fWAsIGVxdVBhcmEpO1xyXG5cclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgJ3RleHRBcHBlYXIgMXMgZWFzZS1pbi1vdXQnKVxyXG4gICAgICAgICAgICAuYmluZChcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd1lBbnMoYW5pU2V0dGluZ3MpIHtcclxuXHJcbiAgICB2YXIgcG9pbnREYXRhID0gYW5pU2V0dGluZ3MuZGF0YXBvaW50c1thbmlTZXR0aW5ncy5jdXJyZW50Um91bmRdLFxyXG4gICAgICAgIG5ld0VuZFRvcCA9IHBvaW50RGF0YS5iZWdpbkNvb3IudG9wLFxyXG4gICAgICAgIG5ld0VuZExlZnQgPSBwb2ludERhdGEuYmVnaW5Db29yLmxlZnQgKyAxMDAsXHJcbiAgICAgICAgbmV3QmVnaW5Ub3AgPSBwb2ludERhdGEuZW5kQ29vci50b3AsXHJcbiAgICAgICAgbmV3QmVnaW5MZWZ0ID0gcG9pbnREYXRhLmVuZENvb3IubGVmdDtcclxuXHJcbiAgICBwb2ludERhdGEuZW5kQ29vciA9IHtcclxuICAgICAgICB0b3A6IG5ld0VuZFRvcCxcclxuICAgICAgICBsZWZ0OiBuZXdFbmRMZWZ0XHJcbiAgICB9O1xyXG5cclxuICAgIHBvaW50RGF0YS5iZWdpbkNvb3IgPSB7XHJcbiAgICAgICAgdG9wOiBuZXdCZWdpblRvcCxcclxuICAgICAgICBsZWZ0OiBuZXdCZWdpbkxlZnRcclxuICAgIH07XHJcblxyXG4gICAgcG9pbnREYXRhLmVsZW1lbnQuaW5uZXJUZXh0ID0gcG9pbnREYXRhLnlcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgJ3RleHREaXNhcHBlYXIgMnMgZWFzZS1pbi1vdXQnKVxyXG4gICAgICAgICAgICAuYmluZChcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDApO1xyXG4gICAgICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke3BvaW50RGF0YS55fWAsIGVxdVBhcmEpO1xyXG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgJ3RleHRBcHBlYXIgMXMgZWFzZS1pbi1vdXQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5iaW5kKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwbGFjZVlWYWx1ZShhbmlTZXR0aW5ncykge1xyXG5cclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XHJcbiAgICAgICAgXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICB2YXIgaW5wdXQgPSAkKGB0ZCN5dmFsJHtwb2ludERhdGEuaWQgKyAxfWApWzBdO1xyXG4gICAgICAgICQoaW5wdXQpLmFwcGVuZChgPHA+JHtwb2ludERhdGEueX08L3A+YCk7XHJcbiAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzZXRSb3VuZChhbmlTZXR0aW5ncykge1xyXG5cclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsICd0ZXh0RGlzYXBwZWFyIDJzIGVhc2UtaW4tb3V0JylcclxuICAgICAgICAgICAgLmJpbmQoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHN0YXR1c0JhcilcclxuICAgICAgICAgICAgICAgICAgICAuaHRtbChcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKFwiPHA+Pj4gUmVzZXR0aW5nLi4uPC9wPlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICBrYXRleC5yZW5kZXIoYCR7cHJvZk9wdC5lcXVhdGlvbn1gLCBlcXVQYXJhKTtcclxuICAgICAgICAgICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsICd0ZXh0QXBwZWFyIDFzIGVhc2UtaW4tb3V0JylcclxuICAgICAgICAgICAgICAgICAgICAuYmluZChcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoc3RhdHVzQmFyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy9IYW5kbGUgYWxsIENTUyBhbmltYXRpb25zXHJcbmZ1bmN0aW9uIGFuaW1hdG9yQ29udHJvbChkcHMpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIG51bUNvbnRhaW5lciA9ICQoXCIjbnVtQ29udGFpbmVyXCIpLFxyXG4gICAgICAgIGNoYWluID0gUHJvbWlzZS5yZXNvbHZlKGRwcyk7XHJcblxyXG4gICAgbnVtQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkcHMuZGF0YXBvaW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNoYWluID0gY2hhaW4udGhlbihhbmltYXRpb25UZW1wbGF0ZSlcclxuICAgICAgICAgICAgLnRoZW4ocmVwbGFjZVhFcXUpXHJcbiAgICAgICAgICAgIC50aGVuKHNob3dFdmFsdWF0ZUVxdSlcclxuICAgICAgICAgICAgLnRoZW4oc2hvd1lBbnMpXHJcbiAgICAgICAgICAgIC50aGVuKGFuaW1hdGlvblRlbXBsYXRlKVxyXG4gICAgICAgICAgICAudGhlbihwbGFjZVlWYWx1ZSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzZXRSb3VuZClcclxuICAgICAgICAgICAgLnRoZW4odXBkYXRlUm91bmQpO1xyXG4gICAgfVxyXG59IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qKioqVEFCTEUgTUFLRVIqKioqL1xyXG4gICAgdmFyIHRib2R5ID0gJChcInRib2R5XCIpLFxyXG4gICAgICAgIHRkMSxcclxuICAgICAgICB0ZDIsXHJcbiAgICAgICAgdHIsXHJcbiAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgcm93Q291bnQgPSAxOTtcclxuXHJcbiAgICBmb3IgKHZhciBqID0gMTsgaiA8PSByb3dDb3VudDsgaisrKSB7XHJcbiAgICAgICAgaW5wdXQgPSAkKFwiPGlucHV0PlwiKTtcclxuICAgICAgICB0ZDEgPSAkKFwiPHRkPjwvdGQ+XCIpO1xyXG4gICAgICAgIHRkMiA9ICQoXCI8dGQ+PC90ZD5cIik7XHJcbiAgICAgICAgdHIgPSAkKFwiPHRyPjwvdHI+XCIpO1xyXG5cclxuICAgICAgICAkKHRyKS5hdHRyKFwiaWRcIiwgYHJvdyR7an1gKTtcclxuXHJcbiAgICAgICAgJChpbnB1dCkuYXR0cihcIm5hbWVcIiwgYGlucHV0JHtqfWApLmF0dHIoXCJ0eXBlXCIsIFwibnVtYmVyXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQodGQyKS5hdHRyKFwiaWRcIiwgYHl2YWwke2p9YCk7XHJcblxyXG4gICAgICAgICQodGQxKS5hcHBlbmQoaW5wdXQpO1xyXG4gICAgICAgICQodHIpLmFwcGVuZCh0ZDEpLmFwcGVuZCh0ZDIpO1xyXG4gICAgICAgICQodGJvZHkpLmFwcGVuZCh0cik7XHJcbiAgICB9XHJcbn0oKSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
