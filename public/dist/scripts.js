"use strict";var plotGraph=function(){function t(t){return function(e){var n=(0).toFixed(2);return function(e){var a=t.x*e;this.textContent="( "+a.toFixed(2)+", "+n+")"}}}function e(t){return function(){var e=t.x.toFixed(2),n=t.y;return function(t){this.textContent="( "+e+", "+(n*t).toFixed(2)+")"}}}function n(t){return"graphPoint"+t}function a(t){var e=d3.selectAll(c).append("g").attr("class","point").attr("id",n(t.id));return e.append("circle").attr("r",4).attr("cx",0).attr("cy",0),e.append("text").text("(0, 0)").attr("x",5).attr("y",15),e.attr("transform","translate("+d(0)+" "+l(0)+")"),e}function r(r,i){var o,u,s=r.datapoints[r.currentRound];document.querySelectorAll(c+" .graph .line").length>0;r.datapoints.forEach(function(t){t.updatePoint&&d3.select("#"+n(t.id)).remove()}),r.graphOpt.graphHide?d3.select(c+" .graph .line").attr("display","none"):d3.select(c+" .graph .line").attr("display","inline"),s.updatePoint?(o=a(s),r.graphOpt.animateHide?(o.attr("transform","translate("+d(s.x)+" "+l(s.y)+")"),o.select("text").text("("+s.x+", "+s.y+")"),i(r)):(u=o.transition().duration(1500).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+l(0)+")"),u.select("text").tween("text",t(s)),u.transition().duration(1500).ease("cubic-out").attr("transform","translate("+d(s.x)+" "+l(s.y)+")").each("end",function(){i(r)}).select("text").tween("text",e(s)))):i(r)}function i(t,e){var n=t.graphOpt,a={target:e,data:[{fn:n.equation}],xAxis:{domain:[n.view.x.min,n.view.x.max]},yAxis:{domain:[n.view.y.min,n.view.y.max]}};o=e,c=o+" .content",u=n.equation,s=functionPlot(a),d=s.meta.xScale,l=s.meta.yScale,d3.selectAll(c+" .point").remove()}var o,c,u,s,d,l;return{update:r,setup:i}}();
"use strict";!function(){for(var t,a,d,p,r=$("tbody"),n=19,e=1;e<=n;e++)p=$("<input>"),t=$("<td></td>"),a=$("<td></td>"),d=$("<tr></tr>"),$(d).attr("id","row"+e),$(p).attr("name","input"+e).attr("type","number"),$(a).attr("id","yval"+e),$(t).append(p),$(d).append(t).append(a),$(r).append(d)}();
"use strict";$(document).ready(function(){function n(n){var t=$("<option></option>").append(n.name);$(t).val(n.equation),$("select").append(t)}var t=location.search.substring(1),o=t.split("=")[1]+".json";$.getJSON(o,function(t){window.professorConfigFile=t,$.each(t,function(t,o){n(o),0===t&&changePlot(o.equation)})}).fail(function(){$("#status p").append("Add a query string")})});
"use strict";function changePlot(t){xMemory=[],clearValues(),window.profOpt=checkConfig(t);var n="y = ",e=""+t,o=$("#functionMachine #equ")[0],i=$("#functionMachine #y");$(o).empty(""),katex.render(n,i[0]),katex.render(e,o)}function stairStep(t){var n=246.5,e=document.styleSheets[document.styleSheets.length-1];e.insertRule("@keyframes "+t.name+" {\n                            0% {\n                                opacity: 1;\n                                top: "+t.startTopOff+"px;\n                                left: "+t.startLeftOff+"px;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            33% {\n                                top: "+t.startTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            66% {\n                                top: "+t.endTopOff+"px;\n                                left: "+n+"px;\n                            }\n                            90% {\n                                opacity: 1;\n                            }\n                            100% {\n                                opacity: 0;\n                                top: "+t.endTopOff+"px;\n                                left: "+t.endLeftOff+"px;\n                            }\n                        }",e.cssRules.length)}function makeXToMachine(t,n){stairStep({startTopOff:t.top+5,startLeftOff:t.left+30,endTopOff:55,endLeftOff:300,name:"xToMachine"+n})}function makeMachineToY(t,n){stairStep({startTopOff:100,startLeftOff:530,endTopOff:t.top+5,endLeftOff:t.right+5,name:"machineToY"+n})}function makeYToStatusBar(t,n){stairStep({startTopOff:t.top+5,startLeftOff:t.right+10,endTopOff:150,endLeftOff:300,name:"yToStatusBar"+n})}function setUpObject(t,n,e){t.each(function(t){var o,i,a=$(this).val();if(a&&(o=+a,i=o.toFixed(profOpt.rounding),$(this).val(i),profOpt.view.x.min<=i&&i<=profOpt.view.x.max)){var p=n.equation.replace("x","("+i+")"),r=math.eval(p),u=(this.getBoundingClientRect(),{x:i,y:r.toFixed(profOpt.rounding),id:t,changeEqu:profOpt.equation.replace("x","("+i+")"),updatePoint:xMemory[t]!==i,element:$("#numContainer p").get(t)});u.updatePoint&&$("td#yval"+(t+1)).html(""),xMemory[t]=i,e.datapoints.push(u)}})}function startFuncMach(){var t=$("input[type='number']"),n=$("#animate:checked").length>0,e=$("#showGraph:checked").length>0,o={callback:function(t){return new Promise(function(n){console.log("finished plotting datapoint!"),n(t)})},animateHide:n,graphHide:e,equation:profOpt.equation,view:profOpt.view},i={datapoints:[],currentRound:0,graphOpt:o};setUpObject(t,o,i),animatorControl(i)}function checkConfig(t){var n;return $.each(professorConfigFile,function(e,o){o.equation===t&&(n=o)}),n}function clearValues(){var t=$("input[type='number']"),n=$("tr td:nth-of-type(2)");t.each(function(t,n){n.value=""}),n.each(function(t,n){n.innerHTML=""})}for(var xMemory=[],inputs=document.querySelectorAll("input[type='number']"),inputCount=inputs.length,run=!0,i=0;i<inputs.length;i++)inputs[i].oninput=function(t){var n=t.srcElement.value;profOpt.view.x.min<=n&&n<=profOpt.view.x.max?(run=!0,$("input[type='button'][value='Go!']").prop("disabled",!1).css({cursor:"pointer"}),$("#status p").html("")):(run=!1,$("input[type='button'][value='Go!']").prop("disabled",!0).css({cursor:"not-allowed"}),$("#status p").html(n+" x-value out of domains."))};for(var i=0;i<inputCount;i++){xMemory[i]=null;var inputCoor=inputs[i].getBoundingClientRect();makeXToMachine(inputCoor,i),makeMachineToY(inputCoor,i),makeYToStatusBar(inputCoor,i),$("#numContainer").append($("<p></p>"))}$("select").change(function(t){changePlot(t.target.value)}),$(document).keypress(function(t){13==t.which&&run&&startFuncMach()}),$("input[type='button'][value='Go!']").click(function(){run&&startFuncMach()});
"use strict";function runAnimation(n,t){return function(a){var e=a.datapoints[a.currentRound],i=e.element;return new Promise(function(e){$(i).html(t).css({animation:""+n+a.currentRound+" "+aniDuration+"s ease-in-out"}).one("animationend",function(n){e(a)})})}}function statusMessage(n){var t=$("#status p");return function(a){return new Promise(function(e){t.html(n),e(a)})}}function replaceXEqu(n){return new Promise(function(t){$(equPara).css("animation","textDisappear "+aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",0),t(n)})})}function showEvaluateEqu(n){var t=n.datapoints[n.currentRound],a=t.changeEqu;return new Promise(function(t){katex.render(""+a,equPara),$(equPara).css("animation","textAppear "+aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)})})}function showYAns(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){$(equPara).css("animation","textDisappear "+aniDuration+"s ease-in-out").one("animationend",function(){$(equPara).css("opacity",0),katex.render(""+t.y,equPara),a(n)})})}function showEquationAgain(n){return new Promise(function(t){$(equPara).css("animation","textAppear "+aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)})})}function placeYValue(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){var e=$("td#yval"+(t.id+1))[0];$(e).html(""),$(e).append("<p>"+t.y+"</p>"),a(n)})}function resetRound(n){n.datapoints[n.currentRound];return new Promise(function(t){$(equPara).css("animation","textDisappear "+aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",0),katex.render(""+profOpt.equation,equPara),t(n)})})}function showDefaultEqu(n){return new Promise(function(t){$(equPara).css("animation","textAppear "+aniDuration+"s ease-in-out").one("animationend",function(a){$(equPara).css("opacity",1),t(n)})})}function plotter(n){n.datapoints[n.currentRound];return new Promise(function(t){n.graphOpt.callback(),t(n)})}function updateRound(n){var t=n.datapoints[n.currentRound];return new Promise(function(a){n.currentRound+=1,t.updatePoint=!1,a(n)})}function animateFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(./functionMachineAni.gif)"}),t(n)})}function stopAniFuncMachine(n){return new Promise(function(t){$("#functionMachine").css({"background-image":"url(./functionMachineStill.gif)"}),t(n)})}function miniAni(n){return new Promise(function(t){var a=n.datapoints[n.currentRound],e=a.y,i=$("<p>"+e+"</p>");$("body").append(i),i.css({position:"absolute",opacity:0,left:550,top:50}).animate({opacity:1,top:100},function(a){i.css({display:"none"}),t(n)})})}function aniPromiseChain(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(runAnimation("xToMachine",n.x)).then(animateFuncMachine).then(statusMessage("Calculating")).then(replaceXEqu).then(showEvaluateEqu).then(showYAns).then(showEquationAgain).then(stopAniFuncMachine).then(miniAni).then(runAnimation("machineToY",n.y)).then(placeYValue).then(runAnimation("yToStatusBar","("+n.x+","+n.y+")")).then(statusMessage("Plotting ("+n.x+","+n.y+")")).then(plotter).then(resetRound).then(statusMessage("")).then(showDefaultEqu)),t=t.then(updateRound)})}function noAniPromiseChain(n,t){n.datapoints.forEach(function(n){n.updatePoint===!0&&(t=t.then(placeYValue).then(plotter)),t=t.then(updateRound)})}function animatorControl(n){var t=$("#numContainer"),a=Promise.resolve(n);t.innerHTML="",n.graphOpt.animateHide?noAniPromiseChain(n,a):aniPromiseChain(n,a)}var equPara=$("#functionMachine #equ")[0],aniDuration=2;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsb3RHcmFwaC5qcyIsIm1haW4uanMiLCJhamF4LmpzIiwiZXZlbnRzLmpzIiwiYW5pbWF0b3Jjb250cm9sLmpzIl0sIm5hbWVzIjpbInBsb3RHcmFwaCIsInVwZGF0ZVRleHRYIiwiY3VycmVudFBvaW50IiwiZCIsInplcm8iLCJ0b0ZpeGVkIiwidCIsImxvY2F0aW9uIiwieCIsInRoaXMiLCJ0ZXh0Q29udGVudCIsInVwZGF0ZVRleHRZIiwieFJvdW5kZWQiLCJ5VmFsIiwieSIsIm1ha2VQb2ludElkIiwibnVtSW4iLCJtYWtlUG9pbnRHcm91cCIsInBvaW50R3JvdXAiLCJkMyIsInNlbGVjdEFsbCIsImRvdExvY2F0aW9uIiwiYXBwZW5kIiwiYXR0ciIsImlkIiwidGV4dCIsInhTY2FsZSIsInlTY2FsZSIsInVwZGF0ZSIsImFuaU9wdGlvbnMiLCJjYWxsYmFjayIsInRyYW5zaXRpb24iLCJkYXRhcG9pbnRzIiwiY3VycmVudFJvdW5kIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiZm9yRWFjaCIsInBvaW50IiwidXBkYXRlUG9pbnQiLCJzZWxlY3QiLCJyZW1vdmUiLCJncmFwaE9wdCIsImdyYXBoSGlkZSIsImFuaW1hdGVIaWRlIiwiZHVyYXRpb24iLCJlYXNlIiwidHdlZW4iLCJlYWNoIiwic2V0dXAiLCJzZWxlY3RvciIsIm9wdHNJbiIsImdyYXBoT3B0aW9ucyIsInRhcmdldCIsImRhdGEiLCJmbiIsImVxdWF0aW9uIiwieEF4aXMiLCJkb21haW4iLCJ2aWV3IiwibWluIiwibWF4IiwieUF4aXMiLCJncmFwaExvY2F0aW9uU2VsZWN0b3IiLCJjdXJyZW50RXF1YXRpb24iLCJmdW5QbG90IiwiZnVuY3Rpb25QbG90IiwibWV0YSIsInRkMSIsInRkMiIsInRyIiwiaW5wdXQiLCJ0Ym9keSIsIiQiLCJyb3dDb3VudCIsImoiLCJyZWFkeSIsInNob3dQcm9mT3B0aW9ucyIsInByb2ZPcHQiLCJvcHQiLCJuYW1lIiwidmFsIiwicXVlcnlTdHJpbmciLCJzZWFyY2giLCJzdWJzdHJpbmciLCJxdWVyeSIsInNwbGl0IiwiZ2V0SlNPTiIsInJlc3VsdCIsIndpbmRvdyIsInByb2Zlc3NvckNvbmZpZ0ZpbGUiLCJpIiwiY2hhbmdlUGxvdCIsImZhaWwiLCJ4TWVtb3J5IiwiY2xlYXJWYWx1ZXMiLCJjaGVja0NvbmZpZyIsImVxdWF0IiwiZXF1UGFyYSIsInlQYXJhIiwiZW1wdHkiLCJrYXRleCIsInJlbmRlciIsInN0YWlyU3RlcCIsIm9wdGlvbnMiLCJoaWdod2F5UGF0aCIsImxhc3RTaGVldCIsInN0eWxlU2hlZXRzIiwiaW5zZXJ0UnVsZSIsInN0YXJ0VG9wT2ZmIiwic3RhcnRMZWZ0T2ZmIiwiZW5kVG9wT2ZmIiwiZW5kTGVmdE9mZiIsImNzc1J1bGVzIiwibWFrZVhUb01hY2hpbmUiLCJpbnB1dENvcmRzIiwiaW5kZXgiLCJ0b3AiLCJsZWZ0IiwibWFrZU1hY2hpbmVUb1kiLCJyaWdodCIsIm1ha2VZVG9TdGF0dXNCYXIiLCJzZXRVcE9iamVjdCIsInhpbnB1dHMiLCJhbmlTZXR0aW5ncyIsInh2YWwiLCJyb3VuZGl0IiwieHZhbHVlIiwicm91bmRpbmciLCJyZXBsYWNlWCIsInJlcGxhY2UiLCJ5dmFsIiwibWF0aCIsImV2YWwiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjaGFuZ2VFcXUiLCJlbGVtZW50IiwiZ2V0IiwiaHRtbCIsInB1c2giLCJzdGFydEZ1bmNNYWNoIiwiaGlkZUFuaW1hdGlvbkNoZWNrZWQiLCJoaWRlR3JhcGhDaGVja2VkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjb25zb2xlIiwibG9nIiwiYW5pbWF0b3JDb250cm9sIiwiaXRlbSIsInlpbnB1dHMiLCJ2YWx1ZSIsImlubmVySFRNTCIsImlucHV0cyIsImlucHV0Q291bnQiLCJydW4iLCJvbmlucHV0IiwiZSIsInhJbnB1dFZhbCIsInNyY0VsZW1lbnQiLCJwcm9wIiwiY3NzIiwiY3Vyc29yIiwiaW5wdXRDb29yIiwiY2hhbmdlIiwia2V5cHJlc3MiLCJ3aGljaCIsImNsaWNrIiwicnVuQW5pbWF0aW9uIiwiZGF0YXBvaW50IiwibnVtUGFyYSIsImFuaW1hdGlvbiIsImFuaUR1cmF0aW9uIiwib25lIiwic3RhdHVzTWVzc2FnZSIsIm1lc3NhZ2UiLCJzdGF0dXNCYXIiLCJyZXBsYWNlWEVxdSIsInNob3dFdmFsdWF0ZUVxdSIsInBvaW50RGF0YSIsInNob3dZQW5zIiwic2hvd0VxdWF0aW9uQWdhaW4iLCJwbGFjZVlWYWx1ZSIsInJlc2V0Um91bmQiLCJzaG93RGVmYXVsdEVxdSIsInBsb3R0ZXIiLCJ1cGRhdGVSb3VuZCIsInBsYWNlaG9sZGVyIiwiYW5pbWF0ZUZ1bmNNYWNoaW5lIiwiYmFja2dyb3VuZC1pbWFnZSIsInN0b3BBbmlGdW5jTWFjaGluZSIsIm1pbmlBbmkiLCJ5dmFsdWUiLCJwYXJhIiwicG9zaXRpb24iLCJvcGFjaXR5IiwiYW5pbWF0ZSIsImRpc3BsYXkiLCJhbmlQcm9taXNlQ2hhaW4iLCJkcHMiLCJjaGFpbiIsInRoZW4iLCJub0FuaVByb21pc2VDaGFpbiIsIm51bUNvbnRhaW5lciJdLCJtYXBwaW5ncyI6IkFBQUEsWUFFQSxJQUFJQSxXQUFhLFdBV2QsUUFBU0MsR0FBWUMsR0FDbEIsTUFBTyxVQUFVQyxHQUNkLEdBQUlDLElBQVEsR0FBR0MsUUFBUSxFQUV2QixPQUFPLFVBQVVDLEdBQ2QsR0FBSUMsR0FBV0wsRUFBYU0sRUFBSUYsQ0FDaENHLE1BQUtDLFlBQWMsS0FBT0gsRUFBU0YsUUFBUSxHQUFLLEtBQU9ELEVBQU8sTUFLdkUsUUFBU08sR0FBWVQsR0FDbEIsTUFBTyxZQUNKLEdBQUlVLEdBQVdWLEVBQWFNLEVBQUVILFFBQVEsR0FDbkNRLEVBQU9YLEVBQWFZLENBRXZCLE9BQU8sVUFBVVIsR0FDZEcsS0FBS0MsWUFBYyxLQUFPRSxFQUFXLE1BQVFDLEVBQU9QLEdBQUdELFFBQVEsR0FBSyxNQUs3RSxRQUFTVSxHQUFZQyxHQUNsQixNQUFPLGFBQWVBLEVBR3pCLFFBQVNDLEdBQWVmLEdBQ3JCLEdBQUlnQixH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S0FBSzNCLGNBQWMsZ0JBQ25CMkIsS0FBS3hCLGFBQ0x3QixLQUFLdkIsaUJBQ0x1QixLQUFLckIsVUFDTHFCLEtBQUtwQixtQkFDTG9CLEtBQUtYLG9CQUNMVyxLQUFLVixTQUNMVSxLQUFLakMsYUFBYSxhQUFjQyxFQUFVMUosSUFDMUMwTCxLQUFLbkIsYUFDTG1CLEtBQUtqQyxhQUFhLGVBQWIsSUFBaUNDLEVBQVVoSyxFQUEzQyxJQUFnRGdLLEVBQVUxSixFQUExRCxNQUNMMEwsS0FBSzNCLGNBQUEsYUFBMkJMLEVBQVVoSyxFQUFyQyxJQUEwQ2dLLEVBQVUxSixFQUFwRCxNQUNMMEwsS0FBS2hCLFNBQ0xnQixLQUFLbEIsWUFDTGtCLEtBQUszQixjQUFBLEtBQ0wyQixLQUFLakIsaUJBR2RnQixFQUFRQSxFQUFNQyxLQUFLZixlQVEzQixRQUFTZ0IsbUJBQWtCSCxFQUFLQyxHQUM1QkQsRUFBSXRLLFdBQVdLLFFBQVEsU0FBVW1JLEdBQ3pCQSxFQUFVakksZUFBZ0IsSUFDMUJnSyxFQUFRQSxFQUNIQyxLQUFLbkIsYUFDTG1CLEtBQUtoQixVQUVkZSxFQUFRQSxFQUFNQyxLQUFLZixlQU8zQixRQUFTdEMsaUJBQWdCbUQsR0FHckIsR0FBSUksR0FBZWpJLEVBQUUsaUJBQ2pCOEgsRUFBUXhELFFBQVFDLFFBQVFzRCxFQUU1QkksR0FBYW5ELFVBQVksR0FFckIrQyxFQUFJNUosU0FBU0UsWUFDYjZKLGtCQUFrQkgsRUFBS0MsR0FFdkJGLGdCQUFnQkMsRUFBS0MsR0FuVTdCLEdBQUlyRyxTQUFVekIsRUFBRSx5QkFBeUIsR0FDckNrRyxZQUFjIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmpzbGludCBwbHVzcGx1czogdHJ1ZSwgYnJvd3NlcjogdHJ1ZSwgZGV2ZWw6IHRydWUqL1xyXG4vKmdsb2JhbCBkMywgZnVuY3Rpb25QbG90Ki9cclxudmFyIHBsb3RHcmFwaCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgIFwidXNlIHN0cmljdFwiO1xyXG4gICB2YXIgZ3JhcGhMb2NhdGlvblNlbGVjdG9yLFxyXG4gICAgICBkb3RMb2NhdGlvbixcclxuICAgICAgY3VycmVudEVxdWF0aW9uLFxyXG4gICAgICBmdW5QbG90LFxyXG4gICAgICB4U2NhbGUsXHJcbiAgICAgIHlTY2FsZSxcclxuICAgICAgZnJlZUlkID0gMDtcclxuXHJcbiAgIC8vdGhlc2UgdHdvIGZ1bmN0aW9ucyBtYWtlIHRoZSBmYWN0b3J5IGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCBpbiB0aGUgYW5pbWF0aW9ucyBmb3IgdGhlIHBvaW50IGxhYmVscyBcclxuICAgZnVuY3Rpb24gdXBkYXRlVGV4dFgoY3VycmVudFBvaW50KSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICB2YXIgemVybyA9ICgwKS50b0ZpeGVkKDIpO1xyXG5cclxuICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGN1cnJlbnRQb2ludC54ICogdDtcclxuICAgICAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IFwiKCBcIiArIGxvY2F0aW9uLnRvRml4ZWQoMikgKyBcIiwgXCIgKyB6ZXJvICsgXCIpXCI7XHJcbiAgICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgIH1cclxuXHJcbiAgIGZ1bmN0aW9uIHVwZGF0ZVRleHRZKGN1cnJlbnRQb2ludCkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICB2YXIgeFJvdW5kZWQgPSBjdXJyZW50UG9pbnQueC50b0ZpeGVkKDIpLFxyXG4gICAgICAgICAgICB5VmFsID0gY3VycmVudFBvaW50Lnk7XHJcblxyXG4gICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IFwiKCBcIiArIHhSb3VuZGVkICsgXCIsIFwiICsgKHlWYWwgKiB0KS50b0ZpeGVkKDIpICsgXCIpXCI7XHJcbiAgICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgIH1cclxuXHJcbiAgIGZ1bmN0aW9uIG1ha2VQb2ludElkKG51bUluKSB7XHJcbiAgICAgIHJldHVybiAnZ3JhcGhQb2ludCcgKyBudW1JbjtcclxuICAgfVxyXG5cclxuICAgZnVuY3Rpb24gbWFrZVBvaW50R3JvdXAoY3VycmVudFBvaW50KSB7XHJcbiAgICAgIHZhciBwb2ludEdyb3VwID0gZDMuc2VsZWN0QWxsKGRvdExvY2F0aW9uKS5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAuYXR0cignY2xhc3MnLCAncG9pbnQnKVxyXG4gICAgICAgICAuYXR0cignaWQnLCBtYWtlUG9pbnRJZChjdXJyZW50UG9pbnQuaWQpKTtcclxuXHJcbiAgICAgIC8vYWRkIHRoZSBjaXJjbGVcclxuICAgICAgcG9pbnRHcm91cC5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgIC5hdHRyKCdyJywgNClcclxuICAgICAgICAgLmF0dHIoJ2N4JywgMClcclxuICAgICAgICAgLmF0dHIoJ2N5JywgMCk7XHJcblxyXG4gICAgICAvL2FkZCB0aGUgbGFiZWxcclxuICAgICAgcG9pbnRHcm91cC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAudGV4dCgnKDAsIDApJylcclxuICAgICAgICAgLmF0dHIoJ3gnLCA1KVxyXG4gICAgICAgICAuYXR0cigneScsIDE1KTtcclxuICAgICAgLy9tb3ZlIGl0IHRvICgwLDApXHJcbiAgICAgIHBvaW50R3JvdXAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeFNjYWxlKDApICsgJyAnICsgeVNjYWxlKDApICsgJyknKTtcclxuICAgICAgcmV0dXJuIHBvaW50R3JvdXA7XHJcbiAgIH1cclxuXHJcbiAgIGZ1bmN0aW9uIHVwZGF0ZShhbmlPcHRpb25zLCBjYWxsYmFjaykge1xyXG4gICAgICB2YXIgY3VycmVudFBvaW50ID0gYW5pT3B0aW9ucy5kYXRhcG9pbnRzW2FuaU9wdGlvbnMuY3VycmVudFJvdW5kXSxcclxuICAgICAgICAgbGluZUlzUGxvdHRlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZG90TG9jYXRpb24gKyAnIC5ncmFwaCAubGluZScpLmxlbmd0aCA+IDAsXHJcbiAgICAgICAgIHBvaW50R3JvdXAsXHJcbiAgICAgICAgIHRyYW5zaXRpb247XHJcblxyXG4gICAgICAvL2NsZWFyIGFueSBwb2ludHMgdGhhdCB3aWxsIGdldCB1cGRhdGVkXHJcbiAgICAgIGFuaU9wdGlvbnMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCkge1xyXG4gICAgICAgICBpZiAocG9pbnQudXBkYXRlUG9pbnQpIHtcclxuICAgICAgICAgICAgZDMuc2VsZWN0KCcjJyArIG1ha2VQb2ludElkKHBvaW50LmlkKSkucmVtb3ZlKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvL2NoZWNrIGlmIHdlIG5lZWQgdG8gaGlkZSBvciBzaG93IHRoZSBwbG90bGluZVxyXG4gICAgICBpZiAoYW5pT3B0aW9ucy5ncmFwaE9wdC5ncmFwaEhpZGUpIHtcclxuICAgICAgICAgZDMuc2VsZWN0KGRvdExvY2F0aW9uICsgJyAuZ3JhcGggLmxpbmUnKS5hdHRyKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgZDMuc2VsZWN0KGRvdExvY2F0aW9uICsgJyAuZ3JhcGggLmxpbmUnKS5hdHRyKCdkaXNwbGF5JywgJ2lubGluZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL2RvZXMgdGhlIGN1cnJlbnRSb3VuZCBuZWVkIHRvIGJlIHVwZGF0ZWRlZD9cclxuICAgICAgaWYgKCFjdXJyZW50UG9pbnQudXBkYXRlUG9pbnQpIHtcclxuICAgICAgICAgLy9ub3RoaXRuZyB0byBzZWUgaGVyZSBqdXN0IGtlZXAgb24gbW92aW5nXHJcbiAgICAgICAgIGNhbGxiYWNrKGFuaU9wdGlvbnMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAvL2RyYXcgcG9pbnQgXHJcbiAgICAgICAgIHBvaW50R3JvdXAgPSBtYWtlUG9pbnRHcm91cChjdXJyZW50UG9pbnQpO1xyXG5cclxuICAgICAgICAgLy9pcyBhbmltYXRpb24gb24/XHJcbiAgICAgICAgIGlmIChhbmlPcHRpb25zLmdyYXBoT3B0LmFuaW1hdGVIaWRlKSB7XHJcbiAgICAgICAgICAgIC8vbW92ZSBpdCBpbnRvIHBsYWNlIHdpdGhvdXQgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgIHBvaW50R3JvdXAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeFNjYWxlKGN1cnJlbnRQb2ludC54KSArICcgJyArIHlTY2FsZShjdXJyZW50UG9pbnQueSkgKyAnKScpO1xyXG4gICAgICAgICAgICAvL3VwZGF0ZSB0aGUgbGFibGVcclxuICAgICAgICAgICAgcG9pbnRHcm91cC5zZWxlY3QoJ3RleHQnKS50ZXh0KCcoJyArIGN1cnJlbnRQb2ludC54ICsgJywgJyArIGN1cnJlbnRQb2ludC55ICsgJyknKTtcclxuICAgICAgICAgICAgLy9jYWxsIGNhbGxiYWNrXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGFuaU9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9kcmF3IHBvaW50IHdpdGggYW5pbWFpb25cclxuICAgICAgICAgICAgLy9GaXJzdCB0cmFuc2l0aW9uIC0gbW92ZSB0aGUgZ3JvdXAgaW4gdGhlIFhcclxuICAgICAgICAgICAgdHJhbnNpdGlvbiA9IHBvaW50R3JvdXBcclxuICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAuZHVyYXRpb24oMTUwMClcclxuICAgICAgICAgICAgICAgLmVhc2UoJ2N1YmljLW91dCcpXHJcbiAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB4U2NhbGUoY3VycmVudFBvaW50LngpICsgJyAnICsgeVNjYWxlKDApICsgJyknKTtcclxuICAgICAgICAgICAgLy9zdWIgdHJhbnNpdGlvbiAtIHVwZGF0ZSB0aGUgbGFiZWxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbi5zZWxlY3QoJ3RleHQnKS50d2VlbigndGV4dCcsIHVwZGF0ZVRleHRYKGN1cnJlbnRQb2ludCkpO1xyXG5cclxuICAgICAgICAgICAgLy9TZWNvbmQgdHJhbnNpdGlvbiAtIG1vdmUgdGhlIGdyb3VwIGluIHRoZSBZXHJcbiAgICAgICAgICAgIC8vc3ViIHRyYW5zaXRpb24gLSB1cGRhdGUgdGhlIGxhYmVsXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24udHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgIC5kdXJhdGlvbigxNTAwKVxyXG4gICAgICAgICAgICAgICAuZWFzZSgnY3ViaWMtb3V0JylcclxuICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHhTY2FsZShjdXJyZW50UG9pbnQueCkgKyAnICcgKyB5U2NhbGUoY3VycmVudFBvaW50LnkpICsgJyknKVxyXG4gICAgICAgICAgICAgICAuZWFjaCgnZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICBjYWxsYmFjayhhbmlPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgLnNlbGVjdCgndGV4dCcpLnR3ZWVuKCd0ZXh0JywgdXBkYXRlVGV4dFkoY3VycmVudFBvaW50KSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBmdW5jdGlvbiBzZXR1cChhbmlPcHRpb25zLCBzZWxlY3Rvcikge1xyXG4gICAgICAvL3N1Z2FyXHJcbiAgICAgIHZhciBvcHRzSW4gPSBhbmlPcHRpb25zLmdyYXBoT3B0LFxyXG4gICAgICAgICBncmFwaE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHRhcmdldDogc2VsZWN0b3IsXHJcbiAgICAgICAgICAgIGRhdGE6IFt7XHJcbiAgICAgICAgICAgICAgIGZuOiBvcHRzSW4uZXF1YXRpb25cclxuICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgIHhBeGlzOiB7XHJcbiAgICAgICAgICAgICAgIGRvbWFpbjogW29wdHNJbi52aWV3LngubWluLCBvcHRzSW4udmlldy54Lm1heF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeUF4aXM6IHtcclxuICAgICAgICAgICAgICAgZG9tYWluOiBbb3B0c0luLnZpZXcueS5taW4sIG9wdHNJbi52aWV3LnkubWF4XVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH07XHJcblxyXG4gICAgICAvL3NhdmUgc29tZSB0aGluZ3MgZm9yIGxhdGVyXHJcbiAgICAgIGdyYXBoTG9jYXRpb25TZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgICBkb3RMb2NhdGlvbiA9IGdyYXBoTG9jYXRpb25TZWxlY3RvciArICcgLmNvbnRlbnQnO1xyXG4gICAgICBjdXJyZW50RXF1YXRpb24gPSBvcHRzSW4uZXF1YXRpb247XHJcblxyXG4gICAgICAvL21ha2UgdGhlIHBsb3QgYW5kIHNjYWxlc1xyXG4gICAgICBmdW5QbG90ID0gZnVuY3Rpb25QbG90KGdyYXBoT3B0aW9ucyk7XHJcbiAgICAgIHhTY2FsZSA9IGZ1blBsb3QubWV0YS54U2NhbGU7XHJcbiAgICAgIHlTY2FsZSA9IGZ1blBsb3QubWV0YS55U2NhbGU7XHJcblxyXG4gICAgICAvL2NsZWFuIG91dCBhbnkgb2xkIHBvaW50cyBmaXJzdFxyXG4gICAgICBkMy5zZWxlY3RBbGwoZG90TG9jYXRpb24gKyAnIC5wb2ludCcpLnJlbW92ZSgpO1xyXG4gICB9XHJcblxyXG4gICByZXR1cm4ge1xyXG4gICAgICB1cGRhdGU6IHVwZGF0ZSxcclxuICAgICAgc2V0dXA6IHNldHVwXHJcbiAgIH07XHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBNYWtlIHRoZSB3aG9sZSB0YWJsZSBhbmQgY2VsbHMgZm9yIHRoZSBpbnB1dCBib3hlcyBhbmQgdXNlciBpbnRlcmFjdGlvbi5cclxuICAgICovXHJcbiAgICB2YXIgdGJvZHkgPSAkKFwidGJvZHlcIiksXHJcbiAgICAgICAgdGQxLFxyXG4gICAgICAgIHRkMixcclxuICAgICAgICB0cixcclxuICAgICAgICBpbnB1dCxcclxuICAgICAgICByb3dDb3VudCA9IDE5O1xyXG5cclxuICAgIGZvciAodmFyIGogPSAxOyBqIDw9IHJvd0NvdW50OyBqKyspIHtcclxuICAgICAgICBpbnB1dCA9ICQoXCI8aW5wdXQ+XCIpO1xyXG4gICAgICAgIHRkMSA9ICQoXCI8dGQ+PC90ZD5cIik7XHJcbiAgICAgICAgdGQyID0gJChcIjx0ZD48L3RkPlwiKTtcclxuICAgICAgICB0ciA9ICQoXCI8dHI+PC90cj5cIik7XHJcblxyXG4gICAgICAgICQodHIpLmF0dHIoXCJpZFwiLCBgcm93JHtqfWApO1xyXG5cclxuICAgICAgICAkKGlucHV0KS5hdHRyKFwibmFtZVwiLCBgaW5wdXQke2p9YCkuYXR0cihcInR5cGVcIiwgXCJudW1iZXJcIik7XHJcblxyXG4gICAgICAgICQodGQyKS5hdHRyKFwiaWRcIiwgYHl2YWwke2p9YCk7XHJcblxyXG4gICAgICAgICQodGQxKS5hcHBlbmQoaW5wdXQpO1xyXG4gICAgICAgICQodHIpLmFwcGVuZCh0ZDEpLmFwcGVuZCh0ZDIpO1xyXG4gICAgICAgICQodGJvZHkpLmFwcGVuZCh0cik7XHJcbiAgICB9XHJcbn0oKSk7XHJcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAvKlxyXG4gICAgTG9hZCBRdWVyeSBzdWJzdHJpbmdcclxuICAgICovXHJcbiAgICB2YXIgcXVlcnlTdHJpbmcgPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpLFxyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnlTdHJpbmcuc3BsaXQoXCI9XCIpWzFdICsgXCIuanNvblwiO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dQcm9mT3B0aW9ucyhwcm9mT3B0KSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICBBcHBlbmQgdGhlIHByb2Zlc3NvcidzIGNob3NlbiBlcXVhdGlvbnMgdG8gdGhlIGFwcGxpY2F0aW9uXHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgdmFyIG9wdCA9ICQoXCI8b3B0aW9uPjwvb3B0aW9uPlwiKS5hcHBlbmQocHJvZk9wdC5uYW1lKTtcclxuXHJcbiAgICAgICAgJChvcHQpLnZhbChwcm9mT3B0LmVxdWF0aW9uKTtcclxuXHJcbiAgICAgICAgJChcInNlbGVjdFwiKS5hcHBlbmQob3B0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgTG9hZCB0aGUgcHJvZmVzc29yIGNvbmZpZ3VyYXRpb24gZmlsZVxyXG4gICAgKi9cclxuXHJcbiAgICAkLmdldEpTT04ocXVlcnksIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuXHJcbiAgICAgICAgd2luZG93LnByb2Zlc3NvckNvbmZpZ0ZpbGUgPSByZXN1bHQ7XHJcblxyXG4gICAgICAgICQuZWFjaChyZXN1bHQsIGZ1bmN0aW9uIChpLCBwcm9mT3B0KSB7XHJcblxyXG4gICAgICAgICAgICBzaG93UHJvZk9wdGlvbnMocHJvZk9wdCk7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBEaXNwbGF5IHRoZSBkZWZhdWx0IGVxdWF0aW9uIHRvIHRoZSBmdW5jdGlvbiBtYWNoaW5lXHJcbiAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy9pbiBldmVudHMuanNcclxuICAgICAgICAgICAgICAgIGNoYW5nZVBsb3QocHJvZk9wdC5lcXVhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSkuZmFpbChmdW5jdGlvbigpIHtcclxuICAgICAgICAkKFwiI3N0YXR1cyBwXCIpLmFwcGVuZChcIkFkZCBhIHF1ZXJ5IHN0cmluZ1wiKVxyXG4gICAgfSk7O1xyXG5cclxufSk7XHJcbiIsIi8qXHJcblNldCB1cCB0aGUgYmFzaWMgdmFyaWFibGVzLlxyXG4qL1xyXG52YXIgeE1lbW9yeSA9IFtdLFxyXG4gICAgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxyXG4gICAgaW5wdXRDb3VudCA9IGlucHV0cy5sZW5ndGgsXHJcbiAgICBydW4gPSB0cnVlO1xyXG5cclxuLypcclxuQXR0YWNoIGFuIG9uaW5wdXQgZXZlbnQgdG8gYWxsIHRoZSBpbnB1dCBib3hlcyBpbiBvcmRlciB0byB2YWxpZGF0ZSB0aGVtIHdpdGhpbiB0aGUgYm91bmRzXHJcbnRoYXQgdGhlIHByb2Zlc3NvciBoYXMgY2hvc2VuLiAgSWYgdGhlIGJvdW5kcyBhcmUgZXhjZWVkZWQsIHRoZW4gZGlzYWJsZSB0aGUgXCJHbyFcIiBidXR0b25cclxuYW5kIG91dHB1dCBhIG1lc3NhZ2UgdG8gdGhlIHN0YXR1cyBiYXIuXHJcbiovXHJcbmZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgaW5wdXRzW2ldLm9uaW5wdXQgPSBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICB2YXIgeElucHV0VmFsID0gZS5zcmNFbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIGlmIChwcm9mT3B0LnZpZXcueC5taW4gPD0geElucHV0VmFsICYmIHhJbnB1dFZhbCA8PSBwcm9mT3B0LnZpZXcueC5tYXgpIHtcclxuICAgICAgICAgICAgcnVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgJChcImlucHV0W3R5cGU9J2J1dHRvbiddW3ZhbHVlPSdHbyEnXVwiKVxyXG4gICAgICAgICAgICAgICAgLnByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiY3Vyc29yXCI6IFwicG9pbnRlclwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChcIiNzdGF0dXMgcFwiKS5odG1sKGBgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBydW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgJChcImlucHV0W3R5cGU9J2J1dHRvbiddW3ZhbHVlPSdHbyEnXVwiKVxyXG4gICAgICAgICAgICAgICAgLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJjdXJzb3JcIjogXCJub3QtYWxsb3dlZFwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChcIiNzdGF0dXMgcFwiKS5odG1sKGAke3hJbnB1dFZhbH0geC12YWx1ZSBvdXQgb2YgZG9tYWlucy5gKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKlxyXG5EaXBzbGF5IEthdGV4IGVxdWF0aW9uLiBBTFNPIHVzZWQgaW4gYWpheC5qc1xyXG4qL1xyXG5mdW5jdGlvbiBjaGFuZ2VQbG90KHZhbCkge1xyXG5cclxuICAgIHhNZW1vcnkgPSBbXTtcclxuXHJcbiAgICBjbGVhclZhbHVlcygpO1xyXG5cclxuICAgIHdpbmRvdy5wcm9mT3B0ID0gY2hlY2tDb25maWcodmFsKTtcclxuICAgIHZhciB5ID0gYHkgPSBgLFxyXG4gICAgICAgIGVxdWF0ID0gYCR7dmFsfWAsXHJcbiAgICAgICAgZXF1UGFyYSA9ICQoXCIjZnVuY3Rpb25NYWNoaW5lICNlcXVcIilbMF0sXHJcbiAgICAgICAgeVBhcmEgPSAkKFwiI2Z1bmN0aW9uTWFjaGluZSAjeVwiKTtcclxuXHJcbiAgICAkKGVxdVBhcmEpLmVtcHR5KFwiXCIpO1xyXG5cclxuICAgIGthdGV4LnJlbmRlcih5LCB5UGFyYVswXSk7XHJcbiAgICBrYXRleC5yZW5kZXIoZXF1YXQsIGVxdVBhcmEpO1xyXG59XHJcblxyXG4vKlxyXG5BbmltYXRpb24gcGF0aCBmb3IgdGhlIHN0YWlyc3RlcFxyXG4qL1xyXG5mdW5jdGlvbiBzdGFpclN0ZXAob3B0aW9ucykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgaGlnaHdheVBhdGggPSAyNDYuNSxcclxuICAgICAgICBsYXN0U2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGggLSAxXTtcclxuICAgIGxhc3RTaGVldC5pbnNlcnRSdWxlKGBAa2V5ZnJhbWVzICR7b3B0aW9ucy5uYW1lfSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7b3B0aW9ucy5zdGFydFRvcE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke29wdGlvbnMuc3RhcnRMZWZ0T2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMzMlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7b3B0aW9ucy5zdGFydFRvcE9mZn1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke2hpZ2h3YXlQYXRofXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNjYlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICR7b3B0aW9ucy5lbmRUb3BPZmZ9cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJHtoaWdod2F5UGF0aH1weDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDkwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAke29wdGlvbnMuZW5kVG9wT2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICR7b3B0aW9ucy5lbmRMZWZ0T2ZmfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCwgbGFzdFNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XHJcbn1cclxuXHJcbi8qXHJcbkEgc2V0IG9mIGZ1bmN0aW9ucyB1c2luZyB0aGUgc3RhaXJzdGVwIGFuaW1hdGlvbiB0ZW1wbGF0ZVxyXG50byBjcmVhdGUgcGF0aHdheXMgd2l0aCBjb29yZGluYXRlIGRhdGFcclxuKi9cclxuZnVuY3Rpb24gbWFrZVhUb01hY2hpbmUoaW5wdXRDb3JkcywgaW5kZXgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgc3RhaXJTdGVwKHtcclxuICAgICAgICBzdGFydFRvcE9mZjogaW5wdXRDb3Jkcy50b3AgKyA1LFxyXG4gICAgICAgIHN0YXJ0TGVmdE9mZjogaW5wdXRDb3Jkcy5sZWZ0ICsgMzAsXHJcbiAgICAgICAgZW5kVG9wT2ZmOiA1NSxcclxuICAgICAgICBlbmRMZWZ0T2ZmOiAzMDAsXHJcbiAgICAgICAgbmFtZTogYHhUb01hY2hpbmUke2luZGV4fWBcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTWFjaGluZVRvWShpbnB1dENvcmRzLCBpbmRleCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBzdGFpclN0ZXAoe1xyXG4gICAgICAgIHN0YXJ0VG9wT2ZmOiAxMDAsXHJcbiAgICAgICAgc3RhcnRMZWZ0T2ZmOiA1MzAsXHJcbiAgICAgICAgZW5kVG9wT2ZmOiBpbnB1dENvcmRzLnRvcCArIDUsXHJcbiAgICAgICAgZW5kTGVmdE9mZjogaW5wdXRDb3Jkcy5yaWdodCArIDUsXHJcbiAgICAgICAgbmFtZTogYG1hY2hpbmVUb1kke2luZGV4fWBcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlWVRvU3RhdHVzQmFyKGlucHV0Q29yZHMsIGluZGV4KSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHN0YWlyU3RlcCh7XHJcbiAgICAgICAgc3RhcnRUb3BPZmY6IGlucHV0Q29yZHMudG9wICsgNSxcclxuICAgICAgICBzdGFydExlZnRPZmY6IGlucHV0Q29yZHMucmlnaHQgKyAxMCxcclxuICAgICAgICBlbmRUb3BPZmY6IDE1MCxcclxuICAgICAgICBlbmRMZWZ0T2ZmOiAzMDAsXHJcbiAgICAgICAgbmFtZTogYHlUb1N0YXR1c0JhciR7aW5kZXh9YFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcblNldCB1cCB0aGUgeE1lbW9yeSBhcnJheSBhbmQgdGhlIGFuaW1hdGlvbiBwYXRocyBmb3IgZWFjaCBpbnB1dCBib3guXHJcblxyXG5OT1RFOiBTZXR0aW5nIHVwIHRoZSB4TWVtb3J5IGFycmF5IGFsc28gbWFrZXMgaXQgc28gdGhhdCBubyBhbmltYXRpb25zXHJcbiAgICAgIGFyZSByZXBlYXRlZCBieSBtdWx0aXBsZSBjbGlja3Mgb24gdGhlIFwiR28hXCIgYnV0dG9uLlxyXG4qL1xyXG5mb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Q291bnQ7IGkrKykge1xyXG4gICAgeE1lbW9yeVtpXSA9IG51bGw7XHJcblxyXG4gICAgdmFyIGlucHV0Q29vciA9IGlucHV0c1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICBtYWtlWFRvTWFjaGluZShpbnB1dENvb3IsIGkpO1xyXG4gICAgbWFrZU1hY2hpbmVUb1koaW5wdXRDb29yLCBpKTtcclxuICAgIG1ha2VZVG9TdGF0dXNCYXIoaW5wdXRDb29yLCBpKTtcclxuICAgICQoXCIjbnVtQ29udGFpbmVyXCIpLmFwcGVuZCgkKGA8cD48L3A+YCkpO1xyXG59XHJcblxyXG4vKlxyXG5TZXQgdXAgdGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdGhlIHByb21pc2UgY2hhaW5cclxuaW4gYW5pbWF0b3Jjb250cm9sLlxyXG4qL1xyXG5mdW5jdGlvbiBzZXRVcE9iamVjdCh4aW5wdXRzLCBncmFwaE9wdCwgYW5pU2V0dGluZ3MpIHtcclxuICAgIHhpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgIHZhciB4dmFsdWUgPSAkKHRoaXMpLnZhbCgpLFxyXG4gICAgICAgICAgICB4dmFsLFxyXG4gICAgICAgICAgICByb3VuZGl0O1xyXG5cclxuICAgICAgICBpZiAoeHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHh2YWwgPSAreHZhbHVlO1xyXG4gICAgICAgICAgICByb3VuZGl0ID0geHZhbC50b0ZpeGVkKHByb2ZPcHQucm91bmRpbmcpO1xyXG5cclxuICAgICAgICAgICAgJCh0aGlzKS52YWwocm91bmRpdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvZk9wdC52aWV3LngubWluIDw9IHJvdW5kaXQgJiYgcm91bmRpdCA8PSBwcm9mT3B0LnZpZXcueC5tYXgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZVggPSBncmFwaE9wdC5lcXVhdGlvbi5yZXBsYWNlKFwieFwiLCBgKCR7cm91bmRpdH0pYCksXHJcbiAgICAgICAgICAgICAgICAgICAgeXZhbCA9IG1hdGguZXZhbChyZXBsYWNlWCksXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRDb29yID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogcm91bmRpdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogeXZhbC50b0ZpeGVkKHByb2ZPcHQucm91bmRpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlRXF1OiBwcm9mT3B0LmVxdWF0aW9uLnJlcGxhY2UoXCJ4XCIsIGAoJHtyb3VuZGl0fSlgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUG9pbnQ6IHhNZW1vcnlbaV0gIT09IHJvdW5kaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICQoXCIjbnVtQ29udGFpbmVyIHBcIikuZ2V0KGkpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgQ2xlYXIgb3V0IHRoZSBZcyB3aGVuIHRoZXkgZG9uJ3QgZXF1YWwgZWFjaCBvdGhlciBhbmQgbmVlZCB0byBiZSB1cGRhdGVkXHJcbiAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnVwZGF0ZVBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChgdGQjeXZhbCR7aSArIDF9YCkuaHRtbChcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKlVwZGF0ZSB0aGUgeG1lbW9yeSovXHJcbiAgICAgICAgICAgICAgICB4TWVtb3J5W2ldID0gcm91bmRpdDtcclxuICAgICAgICAgICAgICAgIGFuaVNldHRpbmdzLmRhdGFwb2ludHMucHVzaChwb2ludCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuU2V0IGFsbCB0aGUgZGF0YSB0aGF0IHdpbGwgYmUgc2V0IHRvIGFuaVNldHRpbmdzIGluIHRoZSBzZXRVcE9iamVjdCBmdW5jdGlvblxyXG5cclxuTk9URVxyXG5ncmFwaE9wdC5jYWxsYmFjayBzdGlsbCBuZWVkcyBhIHZpYWJsZSBtZXRob2QhXHJcbiovXHJcbmZ1bmN0aW9uIHN0YXJ0RnVuY01hY2goKSB7XHJcblxyXG4gICAgdmFyIHhpbnB1dHMgPSAkKFwiaW5wdXRbdHlwZT0nbnVtYmVyJ11cIiksXHJcbiAgICAgICAgaGlkZUFuaW1hdGlvbkNoZWNrZWQgPSAkKFwiI2FuaW1hdGU6Y2hlY2tlZFwiKS5sZW5ndGggPiAwLFxyXG4gICAgICAgIGhpZGVHcmFwaENoZWNrZWQgPSAkKFwiI3Nob3dHcmFwaDpjaGVja2VkXCIpLmxlbmd0aCA+IDAsXHJcbiAgICAgICAgZ3JhcGhPcHQgPSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoYW5pU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmluaXNoZWQgcGxvdHRpbmcgZGF0YXBvaW50IVwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhbmltYXRlSGlkZTogaGlkZUFuaW1hdGlvbkNoZWNrZWQsXHJcbiAgICAgICAgICAgIGdyYXBoSGlkZTogaGlkZUdyYXBoQ2hlY2tlZCxcclxuICAgICAgICAgICAgZXF1YXRpb246IHByb2ZPcHQuZXF1YXRpb24sXHJcbiAgICAgICAgICAgIHZpZXc6IHByb2ZPcHQudmlld1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pU2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgIGRhdGFwb2ludHM6IFtdLFxyXG4gICAgICAgICAgICBjdXJyZW50Um91bmQ6IDAsXHJcbiAgICAgICAgICAgIGdyYXBoT3B0OiBncmFwaE9wdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgc2V0VXBPYmplY3QoeGlucHV0cywgZ3JhcGhPcHQsIGFuaVNldHRpbmdzKTtcclxuICAgIFxyXG4gICAgLypTZXQgdXAgdGhlIGdyYXBoKi9cclxuLy8gICAgcGxvdEdyYXBoLnNldHVwKGFuaVNldHRpbmdzLCBcIiNncmFwaFwiKTtcclxuICAgIFxyXG4gICAgYW5pbWF0b3JDb250cm9sKGFuaVNldHRpbmdzKTtcclxufVxyXG5cclxuLypcclxuRnVuY3Rpb24gdG8gc2VsZWN0IHRoZSBjaG9zZW4gZXF1YXRpb24gd2l0aCBpdHMgbmFtZSBhbmQgZ3JhcGggd2luZG93IGJvdW5kYXJpZXMuXHJcbiovXHJcbmZ1bmN0aW9uIGNoZWNrQ29uZmlnKHZhbCkge1xyXG4gICAgdmFyIHByb2ZPcHQ7XHJcbiAgICAkLmVhY2gocHJvZmVzc29yQ29uZmlnRmlsZSwgZnVuY3Rpb24gKGksIGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbS5lcXVhdGlvbiA9PT0gdmFsKSB7XHJcbiAgICAgICAgICAgIHByb2ZPcHQgPSBpdGVtO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gcHJvZk9wdDtcclxufVxyXG5cclxuLypcclxuVXBvbiBjaG9vc2luZyBhbm90aGVyIGVxdWF0aW9uIHRvIGdyYXBoLCBjbGVhciBhbGwgdGhlIHZhbHVlc1xyXG4qL1xyXG5mdW5jdGlvbiBjbGVhclZhbHVlcygpIHtcclxuICAgIHZhciB4aW5wdXRzID0gJChcImlucHV0W3R5cGU9J251bWJlciddXCIpLFxyXG4gICAgICAgIHlpbnB1dHMgPSAkKGB0ciB0ZDpudGgtb2YtdHlwZSgyKWApO1xyXG5cclxuICAgIHhpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSwgaXRlbSkge1xyXG4gICAgICAgIGl0ZW0udmFsdWUgPSBcIlwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgeWlucHV0cy5lYWNoKGZ1bmN0aW9uIChpLCBpdGVtKSB7XHJcbiAgICAgICAgaXRlbS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbk9uY2hhbmdlIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBzZWxlY3QgaHRtbCBlbGVtZW50LlxyXG4qL1xyXG4kKFwic2VsZWN0XCIpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xyXG4gICAgY2hhbmdlUGxvdChlLnRhcmdldC52YWx1ZSk7XHJcbn0pO1xyXG5cclxuLypcclxuRE9DVU1FTlQga2V5ZG93biBldmVudCBoYW5kbGVyXHJcbiovXHJcbiQoZG9jdW1lbnQpLmtleXByZXNzKGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAoZS53aGljaCA9PSAxMyAmJiBydW4pIHtcclxuICAgICAgICBzdGFydEZ1bmNNYWNoKCk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLypcclxuR08hIENsaWNrIGV2ZW50IGhhbmRsZXJcclxuKi9cclxuJChcImlucHV0W3R5cGU9J2J1dHRvbiddW3ZhbHVlPSdHbyEnXVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAocnVuKSB7XHJcbiAgICAgICAgc3RhcnRGdW5jTWFjaCgpO1xyXG4gICAgfVxyXG59KTtcclxuIiwidmFyIGVxdVBhcmEgPSAkKFwiI2Z1bmN0aW9uTWFjaGluZSAjZXF1XCIpWzBdLFxyXG4gICAgYW5pRHVyYXRpb24gPSAyO1xyXG5cclxuZnVuY3Rpb24gcnVuQW5pbWF0aW9uKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAvKlxyXG4gICAgVGhpcyBpcyBhIGZ1bmN0aW9uIGZhY3Rvcnkgd2hpY2ggd2lsbCBncmFiIHRoZVxyXG4gICAgbmVjZXNzYXJ5IGRhdGEgYW5kIHRoZW4gcmV0dXJuIHRoZSBmdW5jdGlvbiBwcm9taXNlXHJcbiAgICAqL1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGFuaW1hdGlvbihhbmlTZXR0aW5ncykge1xyXG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgICAgIHZhciBkYXRhcG9pbnQgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXHJcbiAgICAgICAgICAgIG51bVBhcmEgPSBkYXRhcG9pbnQuZWxlbWVudDtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICBNYWtlIHRoZSBwcm9taXNlIHRoYXQgd2hlbiB0aGUgZHluYW1pY1xyXG4gICAgICAgIGFuaW1hdGlvbiBwYXRoIGlzIGRvbmUgdGhlbiB0aGlzIHByb21pc2UgaXMgZmluaXNoZWRcclxuICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAkKG51bVBhcmEpXHJcbiAgICAgICAgICAgICAgICAuaHRtbCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYW5pbWF0aW9uXCI6IGAke25hbWV9JHthbmlTZXR0aW5ncy5jdXJyZW50Um91bmR9ICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGAsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uZSgnYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YXR1c01lc3NhZ2UobWVzc2FnZSkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAvKlxyXG4gICAgVGhpcyBpcyBhIGZ1bmN0aW9uIGZhY3Rvcnkgd2hpY2ggd2lsbCBncmFiIHRoZVxyXG4gICAgbmVjZXNzYXJ5IGRhdGEgYW5kIHRoZW4gcmV0dXJuIHRoZSBmdW5jdGlvbiBwcm9taXNlXHJcbiAgICAqL1xyXG4gICAgdmFyIHN0YXR1c0JhciA9ICQoXCIjc3RhdHVzIHBcIik7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhbmlTZXR0aW5ncykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICBzdGF0dXNCYXIuaHRtbChtZXNzYWdlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVwbGFjZVhFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBSZXBsYWNlIHRoZSB4IGluIHRoZSBkaXNhcHBlYXJlZCBlcXVhdGlvbiB3aXRob3V0IGhhdmluZyB0aGUgeSBkaXNhcHBlYXIuXHJcbiAgICAqL1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgJChlcXVQYXJhKVxyXG4gICAgICAgICAgICAuY3NzKFwiYW5pbWF0aW9uXCIsIGB0ZXh0RGlzYXBwZWFyICR7YW5pRHVyYXRpb259cyBlYXNlLWluLW91dGApXHJcbiAgICAgICAgICAgIC5vbmUoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICQoZXF1UGFyYSkuY3NzKFwib3BhY2l0eVwiLCAwKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RXZhbHVhdGVFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qXHJcbiAgICBHZXQgdGhlIHkgYW5zd2VyIGFuZCB0aGUgeC1jaGFuZ2VkIGVxdWF0aW9uXHJcbiAgICAqL1xyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXSxcclxuICAgICAgICBjaGFuZ2VFcXUgPSBwb2ludERhdGEuY2hhbmdlRXF1O1xyXG5cclxuICAgIC8qXHJcbiAgICBTaG93IHRoZSBuZXcgZXF1YXRpb24gd2l0aCB0aGUgcmVwbGFjZWQgeC12YWx1ZSBlcXVhdGlvblxyXG4gICAgKi9cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIGthdGV4LnJlbmRlcihgJHtjaGFuZ2VFcXV9YCwgZXF1UGFyYSk7XHJcblxyXG4gICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cmF0aW9ufXMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93WUFucyhhbmlTZXR0aW5ncykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgLypcclxuICAgIEdldCB0aGUgY3VycmVudCByb3VuZCBhbmQgY3VycmVudCBkYXRhIHBvaW50c1xyXG4gICAgKi9cclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XHJcblxyXG4gICAgLypcclxuICAgIEFuaW1hdGUgdGhlIG5ldyB5IHZhbHVlIHRvIHRoZSBjb29yZGluYXRlZCB5IGNvbHVtbiBhbmQgb25jZVxyXG4gICAgYW5pbWF0aW9uIGlzIGRvbmUgdGhlbiByZXR1cm4gdGhlIHByb21pc2VcclxuICAgICovXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJhdGlvbn1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICBrYXRleC5yZW5kZXIoYCR7cG9pbnREYXRhLnl9YCwgZXF1UGFyYSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuU2hvdyB0aGUgY2hvc2VuIGVxdWF0aW9uIHRvIGdyYXBoXHJcbiovXHJcbmZ1bmN0aW9uIHNob3dFcXVhdGlvbkFnYWluKGFuaVNldHRpbmdzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHRBcHBlYXIgJHthbmlEdXJhdGlvbn1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhbmlTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbk9uY2UgdGhlIHktdmFsdWUgYXBwZWFycyBpbiB0aGUgY29ycmVjdCB5LWNvbHVtbiB0aGVuIGZ1bGZpbGwgdGhlIHByb21pc2UuXHJcbiovXHJcbmZ1bmN0aW9uIHBsYWNlWVZhbHVlKGFuaVNldHRpbmdzKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBwb2ludERhdGEgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF07XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICB2YXIgaW5wdXQgPSAkKGB0ZCN5dmFsJHtwb2ludERhdGEuaWQgKyAxfWApWzBdO1xyXG4gICAgICAgICQoaW5wdXQpLmh0bWwoXCJcIik7XHJcbiAgICAgICAgJChpbnB1dCkuYXBwZW5kKGA8cD4ke3BvaW50RGF0YS55fTwvcD5gKTtcclxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKlxyXG5PbmNlIHRoZSBlcXVhdGlvbiBpcyBjbGVhcmVkIGFuZCByZXNldCB0byB0aGUgZGVmYXVsdCBlcXVhdGlvblxyXG50aGVuIGZ1bGZpbGwgdGhlIHByb21pc2VcclxuKi9cclxuZnVuY3Rpb24gcmVzZXRSb3VuZChhbmlTZXR0aW5ncykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKGVxdVBhcmEpXHJcbiAgICAgICAgICAgIC5jc3MoXCJhbmltYXRpb25cIiwgYHRleHREaXNhcHBlYXIgJHthbmlEdXJhdGlvbn1zIGVhc2UtaW4tb3V0YClcclxuICAgICAgICAgICAgLm9uZShcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgJChlcXVQYXJhKS5jc3MoXCJvcGFjaXR5XCIsIDApO1xyXG4gICAgICAgICAgICAgICAga2F0ZXgucmVuZGVyKGAke3Byb2ZPcHQuZXF1YXRpb259YCwgZXF1UGFyYSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuUmV0dXJuIHRvIGRlZmF1bHQgYmVnaW5uaW5nIGVxdWF0aW9uIGZvciB0aGUgbmV4dCBhbmltYXRpb24gb3IgZm9yIHRoZSBlbmRcclxuKi9cclxuZnVuY3Rpb24gc2hvd0RlZmF1bHRFcXUoYW5pU2V0dGluZ3MpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICQoZXF1UGFyYSlcclxuICAgICAgICAgICAgLmNzcyhcImFuaW1hdGlvblwiLCBgdGV4dEFwcGVhciAke2FuaUR1cmF0aW9ufXMgZWFzZS1pbi1vdXRgKVxyXG4gICAgICAgICAgICAub25lKFwiYW5pbWF0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVxdVBhcmEpLmNzcyhcIm9wYWNpdHlcIiwgMSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuQWNjZXB0IHRoZSBkYXRhcG9pbnQgYW5kIGl0cyBpdGVyYXRvciBhbmQgcGxvdCB0aGF0IHBvaW50IGJlaW5nIHBhc3NlZCB0aHJvdWdoXHJcbiovXHJcbmZ1bmN0aW9uIHBsb3R0ZXIoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIHBvaW50RGF0YSA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBhbmlTZXR0aW5ncy5ncmFwaE9wdC5jYWxsYmFjaygpO1xyXG4gICAgICAgIHJlc29sdmUoYW5pU2V0dGluZ3MpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcblRoaXMgZnVuY3Rpb24gYWN0cyBhcyBhbiBpdGVyYXRvciBzbyB0aGF0IHRoZSBwcm9taXNlIGNoYWluIGtub3dzIHdoaWNoXHJcbmRhdGFwb2ludCB0byBoYW5kbGUgYW5kIHRvIGFuaW1hdGVcclxuKi9cclxuZnVuY3Rpb24gdXBkYXRlUm91bmQoYW5pU2V0dGluZ3MpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBwbGFjZWhvbGRlciA9IGFuaVNldHRpbmdzLmRhdGFwb2ludHNbYW5pU2V0dGluZ3MuY3VycmVudFJvdW5kXTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBhbmlTZXR0aW5ncy5jdXJyZW50Um91bmQgKz0gMTtcclxuICAgICAgICBwbGFjZWhvbGRlci51cGRhdGVQb2ludCA9IGZhbHNlO1xyXG5cclxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLypcclxuVHdvIGZ1bmN0aW9ucyBpbiBvcmRlciB0byByZXBsYWNlIHRoZSBmdW5jdGlvbiBtYWNoaW5lIGdpZiB3aXRoIHRoZSBhbmltYXRlZFxyXG5naWYgYW5kIGJhY2t3YXJkcy5cclxuKi9cclxuZnVuY3Rpb24gYW5pbWF0ZUZ1bmNNYWNoaW5lKGFuaVNldHRpbmdzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAkKFwiI2Z1bmN0aW9uTWFjaGluZVwiKS5jc3Moe1xyXG4gICAgICAgICAgICBcImJhY2tncm91bmQtaW1hZ2VcIjogXCJ1cmwoLi9mdW5jdGlvbk1hY2hpbmVBbmkuZ2lmKVwiXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0b3BBbmlGdW5jTWFjaGluZShhbmlTZXR0aW5ncykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgJChcIiNmdW5jdGlvbk1hY2hpbmVcIikuY3NzKHtcclxuICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCI6IFwidXJsKC4vZnVuY3Rpb25NYWNoaW5lU3RpbGwuZ2lmKVwiXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbkEgZnVuY3Rpb24gdG8gc2hvdyB0aGUgeSBhbnN3ZXIgbGVhdmluZyB0aGUgZnVuY3Rpb24gbWFjaGluZSB0b1xyXG5zdGFydCB0aGUgbmV4dCBhbmltYXRpb24gb2YgZ29pbmcgYmFjayB0byB0aGUgeSBjb2x1bW4uXHJcbiovXHJcbmZ1bmN0aW9uIG1pbmlBbmkoYW5pU2V0dGluZ3MpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG5cclxuICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSBhbmlTZXR0aW5ncy5kYXRhcG9pbnRzW2FuaVNldHRpbmdzLmN1cnJlbnRSb3VuZF0sXHJcbiAgICAgICAgICAgIHl2YWx1ZSA9IHBsYWNlaG9sZGVyLnksXHJcbiAgICAgICAgICAgIHBhcmEgPSAkKGA8cD4ke3l2YWx1ZX08L3A+YCk7XHJcblxyXG4gICAgICAgICQoXCJib2R5XCIpLmFwcGVuZChwYXJhKTtcclxuXHJcbiAgICAgICAgcGFyYVxyXG4gICAgICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogNTUwLFxyXG4gICAgICAgICAgICAgICAgdG9wOiA1MFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgdG9wOiAxMDBcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHBhcmEuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGFuaVNldHRpbmdzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuQSBwcm9taXNlIGNoYWluIHRvIHJ1biB0aHJvdWdoIHRoZSB3aG9sZSBhbmltYXRpb24gcHJvY2Vzc1xyXG5cclxuTk9URVxyXG5BIHByb21pc2UgY2hhaW4gaGFzIGJlZW4gdXRpemlsZWQgaW4gb3JkZXIgdG8gZWFzaWx5IHBsdWdpblxyXG5leHRyYSBmdW5jdGlvbnMgdGhhdCB3b3VsZCBiZSBncmVhdCB0byBoYXZlIGluIHRoZSBhbmltYXRpb25cclxucHJvY2Vzcy4gIEEgcHJvbWlzZSBjaGFpbiBoYXMgYWxzbyBiZWVuIHVzZWQgaW4gb3JkZXIgdG8gd2FpdFxyXG5mb3IgYSBhbmltYXRpb24gdG8gZW5kIHRvIHN0YXJ0IHRoZSBuZXh0IGFuaW1hdGlvbi5cclxuKi9cclxuXHJcbmZ1bmN0aW9uIGFuaVByb21pc2VDaGFpbihkcHMsIGNoYWluKSB7XHJcbiAgICBkcHMuZGF0YXBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhcG9pbnQpIHtcclxuICAgICAgICBpZiAoZGF0YXBvaW50LnVwZGF0ZVBvaW50ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNoYWluID0gY2hhaW5cclxuICAgICAgICAgICAgICAgIC50aGVuKHJ1bkFuaW1hdGlvbihcInhUb01hY2hpbmVcIiwgZGF0YXBvaW50LngpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oYW5pbWF0ZUZ1bmNNYWNoaW5lKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShcIkNhbGN1bGF0aW5nXCIpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVwbGFjZVhFcXUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RXZhbHVhdGVFcXUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihzaG93WUFucylcclxuICAgICAgICAgICAgICAgIC50aGVuKHNob3dFcXVhdGlvbkFnYWluKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RvcEFuaUZ1bmNNYWNoaW5lKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4obWluaUFuaSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJ1bkFuaW1hdGlvbihcIm1hY2hpbmVUb1lcIiwgZGF0YXBvaW50LnkpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocGxhY2VZVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihydW5BbmltYXRpb24oXCJ5VG9TdGF0dXNCYXJcIiwgYCgke2RhdGFwb2ludC54fSwke2RhdGFwb2ludC55fSlgKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHN0YXR1c01lc3NhZ2UoYFBsb3R0aW5nICgke2RhdGFwb2ludC54fSwke2RhdGFwb2ludC55fSlgKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHBsb3R0ZXIpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXNldFJvdW5kKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3RhdHVzTWVzc2FnZShgYCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihzaG93RGVmYXVsdEVxdSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBjaGFpbiA9IGNoYWluLnRoZW4odXBkYXRlUm91bmQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbklmIHRoZSBcIkhpZGUgQW5pbWF0aW9uXCIgY2hlY2tib3ggaXMgY2hlY2tlZCB0aGVuIHNraXAgdGhlIHdob2xlIGFuaW1hdGlvblxyXG5wcm9taXNlIGNoYWluIGFuZCBqdXN0IGFwcGVuZCB0aGUgeSB2YWx1ZXNcclxuKi9cclxuZnVuY3Rpb24gbm9BbmlQcm9taXNlQ2hhaW4oZHBzLCBjaGFpbikge1xyXG4gICAgZHBzLmRhdGFwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoZGF0YXBvaW50KSB7XHJcbiAgICAgICAgaWYgKGRhdGFwb2ludC51cGRhdGVQb2ludCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjaGFpbiA9IGNoYWluXHJcbiAgICAgICAgICAgICAgICAudGhlbihwbGFjZVlWYWx1ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHBsb3R0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGFpbiA9IGNoYWluLnRoZW4odXBkYXRlUm91bmQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbkhhbmRsZSBhbGwgQ1NTIGFuaW1hdGlvbnMgYnkgY3JlYXRpbmcgYSBQcm9taXNlIGNoYWluIHRocm91Z2ggYSBmb3IgbG9vcC5cclxuKi9cclxuZnVuY3Rpb24gYW5pbWF0b3JDb250cm9sKGRwcykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIG51bUNvbnRhaW5lciA9ICQoXCIjbnVtQ29udGFpbmVyXCIpLFxyXG4gICAgICAgIGNoYWluID0gUHJvbWlzZS5yZXNvbHZlKGRwcyk7XHJcblxyXG4gICAgbnVtQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgaWYgKGRwcy5ncmFwaE9wdC5hbmltYXRlSGlkZSkge1xyXG4gICAgICAgIG5vQW5pUHJvbWlzZUNoYWluKGRwcywgY2hhaW4pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbmlQcm9taXNlQ2hhaW4oZHBzLCBjaGFpbik7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
